<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>What are `defer` and `async` attributes on a `&lt;script&gt;` tag?</title>
      <link href="/2020/03/06/2020-3-6-async-defer-attributes/"/>
      <url>/2020/03/06/2020-3-6-async-defer-attributes/</url>
      
        <content type="html"><![CDATA[<h3 id="What-are-defer-and-async-attributes-on-a-lt-script-gt-tag"><a href="#What-are-defer-and-async-attributes-on-a-lt-script-gt-tag" class="headerlink" title="What are defer and async attributes on a &lt;script&gt; tag?"></a>What are <code>defer</code> and <code>async</code> attributes on a <code>&lt;script&gt;</code> tag?</h3><h4 id="Answer"><a href="#Answer" class="headerlink" title="Answer"></a>Answer</h4><p>If neither attribute is present, the script is downloaded and executed synchronously, and will halt parsing of the document until it has finished executing (default behavior). Scripts are downloaded and executed in the order<br>they are encountered.</p><p>The <code>defer</code> attribute downloads the script while the document is still parsing but waits until the document has finished parsing before executing it, equivalent to executing inside a <code>DOMContentLoaded</code> event listener. <code>defer</code> scripts will execute in order.</p><p>The <code>async</code> attribute downloads the script during parsing the document but will pause the parser to execute the script before it has fully finished parsing. <code>async</code> scripts will not necessarily execute in order.</p><p>Note: both attributes must only be used if the script has a <code>src</code> attribute (i.e. not an inline script).</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"myscript.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"myscript.js"</span> <span class="attr">defer</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"myscript.js"</span> <span class="attr">async</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="Good-to-hear"><a href="#Good-to-hear" class="headerlink" title="Good to hear"></a>Good to hear</h4><ul><li>Placing a <code>defer</code> script in the <code>&lt;head&gt;</code> allows the browser to download the script while the page is still parsing, and is therefore a better option than placing the script before the end of the body.</li><li>If the scripts rely on each other, use <code>defer</code>.</li><li>If the script is independent, use <code>async</code>.</li><li>Use <code>defer</code> if the DOM must be ready and the contents are not placed within a <code>DOMContentLoaded</code> listener.</li></ul><h5 id="Additional-links"><a href="#Additional-links" class="headerlink" title="Additional links"></a>Additional links</h5><!-- Whenever possible, link a more detailed explanation. --><ul><li><a href="http://www.growingwiththeweb.com/2014/02/async-vs-defer-attributes.html" target="_blank" rel="noopener">async vs defer attributes</a></li></ul><!-- tags: (html) --><!-- expertise: (1) -->]]></content>
      
      
      <categories>
          
          <category> 基础知识 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HTML </tag>
            
            <tag> 基础知识 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>What is the purpose of the `alt` attribute on images?</title>
      <link href="/2020/03/05/2020-3-5-alt-attribute/"/>
      <url>/2020/03/05/2020-3-5-alt-attribute/</url>
      
        <content type="html"><![CDATA[<h3 id="What-is-the-purpose-of-the-alt-attribute-on-images"><a href="#What-is-the-purpose-of-the-alt-attribute-on-images" class="headerlink" title="What is the purpose of the alt attribute on images?"></a>What is the purpose of the <code>alt</code> attribute on images?</h3><h4 id="Answer"><a href="#Answer" class="headerlink" title="Answer"></a>Answer</h4><p>The <code>alt</code> attribute provides alternative information for an image if a user cannot view it. The <code>alt</code> attribute should be used to describe any images except those which only serve a decorative purposes, in which case it should be left empty.</p><h4 id="Good-to-hear"><a href="#Good-to-hear" class="headerlink" title="Good to hear"></a>Good to hear</h4><ul><li>Decorative images should have an empty <code>alt</code> attribute.</li><li>Web crawlers use <code>alt</code> tags to understand image content, so they are considered important for Search Engine Optimization (SEO).</li><li>Put the <code>.</code> at the end of <code>alt</code> tag to improve accessibility.</li></ul><h5 id="Additional-links"><a href="#Additional-links" class="headerlink" title="Additional links"></a>Additional links</h5><ul><li><a href="https://developer.mozilla.org/en-US/docs/Learn/Accessibility/HTML" target="_blank" rel="noopener">A good basis for accessibility</a></li></ul><!-- tags: (html) --><!-- expertise: (0) -->]]></content>
      
      
      <categories>
          
          <category> 基础知识 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HTML </tag>
            
            <tag> 基础知识 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CORS</title>
      <link href="/2020/03/04/2020-3-4-CORS/"/>
      <url>/2020/03/04/2020-3-4-CORS/</url>
      
        <content type="html"><![CDATA[<h2 id="What-is-CORS"><a href="#What-is-CORS" class="headerlink" title="What is CORS?"></a>What is CORS?</h2><h3 id="Answer"><a href="#Answer" class="headerlink" title="Answer"></a>Answer</h3><ul><li>Cross-Origin Resource Sharing or CORS is a mechanism that uses additional HTTP headers to grant a browser permission to access resources from a server at an origin different from the website origin.</li><li>An example of a cross-origin request is a web application served from <a href="http://mydomain.com" target="_blank" rel="noopener">http://mydomain.com</a> that uses AJAX to make a request for <a href="http://yourdomain.com" target="_blank" rel="noopener">http://yourdomain.com</a>.</li><li>For security reasons, browsers restrict cross-origin HTTP requests initiated by JavaScript. XMLHttpRequest and fetch follow the same-origin policy, meaning a web application using those APIs can only request HTTP resources from the same origin the application was accessed, unless the response from the other origin includes the correct CORS headers.</li></ul><h3 id="Good-to-hear"><a href="#Good-to-hear" class="headerlink" title="Good to hear"></a>Good to hear</h3><ul><li>CORS behavior is not an error,  it’s a security mechanism to protect users.</li><li>CORS is designed to prevent a malicious website that a user may unintentionally visit from making a request to a legitimate website to read their personal data or perform actions against their will.</li></ul><h3 id="Additional-links"><a href="#Additional-links" class="headerlink" title="Additional links"></a>Additional links</h3><p><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS" target="_blank" rel="noopener">MDN docs for CORS</a></p>]]></content>
      
      
      <categories>
          
          <category> 基础知识 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 基础知识 </tag>
            
            <tag> CORS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSS Circle</title>
      <link href="/2020/03/03/2020-3-3-CSS-Circle/"/>
      <url>/2020/03/03/2020-3-3-CSS-Circle/</url>
      
        <content type="html"><![CDATA[<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"circle"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.circle</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">2rem</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">2rem</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#333</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Explanation"><a href="#Explanation" class="headerlink" title="Explanation"></a>Explanation</h2><ul><li>border-radius: 50% curves the borders of an element to create a circle.</li><li>Since a circle has the same radius at any given point, the width and height must be the same. Differing values will create an ellipse.</li></ul>]]></content>
      
      
      <categories>
          
          <category> CSS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Bind()辅助函数</title>
      <link href="/2020/03/02/2020-3-2-Bind-function/"/>
      <url>/2020/03/02/2020-3-2-Bind-function/</url>
      
        <content type="html"><![CDATA[<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">somethine</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.a, something);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.a + something;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//bind辅助函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bind</span>(<span class="params">fn, obj</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> fn.apply(obj, <span class="built_in">arguments</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    a:<span class="number">2</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> bar = bind(foo, obj);</span><br><span class="line"><span class="keyword">var</span> b = bar(<span class="number">3</span>); <span class="comment">//2+3</span></span><br><span class="line"><span class="built_in">console</span>.log(b); <span class="comment">//5</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> 前端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Cookie</title>
      <link href="/2020/03/01/2020-3-1-Cookie/"/>
      <url>/2020/03/01/2020-3-1-Cookie/</url>
      
        <content type="html"><![CDATA[<h1 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h1><p>HTTP Cookie（也叫Web Cookie或浏览器Cookie）是服务器发送到用户浏览器并保存在本地的一小块数据，它会在浏览器下次向同一服务器再发起请求时被携带并发送到服务器上。通常，它用于告知服务端两个请求是否来自同一浏览器，如保持用户的登录状态。Cookie使基于无状态的HTTP协议记录稳定的状态信息成为了可能。</p><h3 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h3><p>Cookie总是保存在客户端中（早期Java中经常会将Cookie与Session作为存储技术进行比较，Session是将数据保存在服务器端，大量的数据存储会增加服务器的负担），按在客户端中的存储位置，可分为内存Cookie和硬盘Cookie。内存Cookie由浏览器维护，保存在内存中，浏览器关闭后就消失了，其存在时间是短暂的。硬盘Cookie保存在硬盘里，有一个过期时间，除非用户手工清理或到了过期时间，硬盘Cookie不会被删除，其存在时间是长期的。所以，按存在时间，可分为非持久Cookie和持久Cookie。</p><h3 id="创建Cookie"><a href="#创建Cookie" class="headerlink" title="创建Cookie"></a>创建Cookie</h3><p>Set-Cookie响应头部和Cookie请求头部节服务器使用Set-Cookie响应头部向用户代理（一般是浏览器）发送Cookie信息。一个简单的Cookie可能像这样：Set-Cookie: &lt;cookie名&gt;=&lt;cookie值&gt;服务器通过该头部告知客户端保存Cookie信息浏览器环境下获取非HttpOnly标记的 cookie</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> cookies = <span class="built_in">document</span>.cookie;</span><br></pre></td></tr></table></figure><h3 id="Cookie的缺点"><a href="#Cookie的缺点" class="headerlink" title="Cookie的缺点"></a>Cookie的缺点</h3><p>Cookie会被附加在每个HTTP请求中，所以无形中增加了流量。由于在HTTP请求中的Cookie是明文传递的，所以安全性成问题，除非用HTTPS。Cookie的大小限制在4KB左右，对于复杂的存储需求来说是不够用的。</p><h3 id="Cookie的简单封装"><a href="#Cookie的简单封装" class="headerlink" title="Cookie的简单封装"></a>Cookie的简单封装</h3><p>设置Cookie时一般会将路径和过期时间一并设置，注意过期时间需要转换成GMT或者UTC</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> <span class="title">IIFE</span>(<span class="params">root</span>)</span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">getCookie</span>(<span class="params">cname, defaultValue</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> value = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">'(^|;| )'</span>+cname+<span class="string">'=([^;]*?)(;|$)'</span>, <span class="string">'g'</span>).exec(<span class="built_in">document</span>.cookie);</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'value:'</span>, value);</span><br><span class="line">        <span class="keyword">if</span>(!value) <span class="keyword">return</span> defaultValue;</span><br><span class="line">        <span class="keyword">return</span> value[<span class="number">2</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">setCookie</span>(<span class="params">cname, cvalue, day, path</span>)</span>&#123;</span><br><span class="line">        day = day || <span class="number">1</span>;</span><br><span class="line">        path = path || <span class="string">'/'</span>;</span><br><span class="line">        <span class="keyword">var</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">        date.setTime(date.getTime() + day * <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span>);</span><br><span class="line">        <span class="built_in">document</span>.cookie = cname+<span class="string">'='</span>+cvalue+<span class="string">'; expires='</span> + date.toGMTString() + <span class="string">'; path='</span>+path+<span class="string">'; '</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">deleteCookie</span>(<span class="params">cname</span>)</span>&#123;</span><br><span class="line">        setCookie(cname, <span class="literal">null</span>, <span class="number">-1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    root.Util = &#123;</span><br><span class="line">        getCookie: getCookie,</span><br><span class="line">        setCookie: setCookie,</span><br><span class="line">        deleteCookie: deleteCookie,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)(<span class="built_in">window</span>);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> 前端 </tag>
            
            <tag> Cookie </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CreateRequest</title>
      <link href="/2020/02/29/2020-2-29-CreateRequest/"/>
      <url>/2020/02/29/2020-2-29-CreateRequest/</url>
      
        <content type="html"><![CDATA[<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createRequest</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">        request = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (tryMS)&#123;</span><br><span class="line">       <span class="keyword">try</span>&#123;</span><br><span class="line">           request = <span class="keyword">new</span> ActiveXObject(<span class="string">"Msxm12.XMLHTTP"</span>);</span><br><span class="line">       &#125; <span class="keyword">catch</span> (otherMS)&#123;</span><br><span class="line">           <span class="keyword">try</span>&#123;</span><br><span class="line">               request = <span class="keyword">new</span> ActiveXObject(<span class="string">"Microsoft.XMLHTTP"</span>);</span><br><span class="line">           &#125; <span class="keyword">catch</span> (failed)&#123;</span><br><span class="line">               request = <span class="literal">null</span>;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">    &#125; </span><br><span class="line">        </span><br><span class="line">    <span class="keyword">return</span> request;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> 前端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSS Reset</title>
      <link href="/2020/02/28/2020-2-28-CSS-Reset/"/>
      <url>/2020/02/28/2020-2-28-CSS-Reset/</url>
      
        <content type="html"><![CDATA[<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* http://meyerweb.com/eric/tools/css/reset/ </span></span><br><span class="line"><span class="comment">   v2.0 | 20110126</span></span><br><span class="line"><span class="comment">   License: none (public domain)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@viewport</span>&#123;</span><br><span class="line">    <span class="selector-tag">width</span><span class="selector-pseudo">:device-width</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">*&#123;</span><br><span class="line">    <span class="attribute">-moz-box-sizing</span>:border-box;</span><br><span class="line">    <span class="attribute">box-sizing</span>:border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">html</span>, <span class="selector-tag">body</span>, <span class="selector-tag">div</span>, <span class="selector-tag">span</span>, <span class="selector-tag">applet</span>, <span class="selector-tag">object</span>, <span class="selector-tag">iframe</span>, <span class="selector-tag">h1</span>, <span class="selector-tag">h2</span>, <span class="selector-tag">h3</span>, <span class="selector-tag">h4</span>, <span class="selector-tag">h5</span>, <span class="selector-tag">h6</span>, </span><br><span class="line"><span class="selector-tag">p</span>, <span class="selector-tag">blockquote</span>, <span class="selector-tag">pre</span>, <span class="selector-tag">a</span>, <span class="selector-tag">abbr</span>, <span class="selector-tag">acronym</span>, <span class="selector-tag">address</span>, <span class="selector-tag">big</span>, <span class="selector-tag">cite</span>, <span class="selector-tag">code</span>, <span class="selector-tag">del</span>, <span class="selector-tag">dfn</span>, </span><br><span class="line"><span class="selector-tag">em</span>, <span class="selector-tag">img</span>, <span class="selector-tag">ins</span>, <span class="selector-tag">kbd</span>, <span class="selector-tag">q</span>, <span class="selector-tag">s</span>, <span class="selector-tag">samp</span>, <span class="selector-tag">small</span>, <span class="selector-tag">strike</span>, <span class="selector-tag">strong</span>, <span class="selector-tag">sub</span>, <span class="selector-tag">sup</span>, <span class="selector-tag">tt</span>, <span class="selector-tag">var</span>, <span class="selector-tag">b</span>, </span><br><span class="line"><span class="selector-tag">u</span>, <span class="selector-tag">i</span>, <span class="selector-tag">center</span>, <span class="selector-tag">dl</span>, <span class="selector-tag">dt</span>, <span class="selector-tag">dd</span>, <span class="selector-tag">ol</span>, <span class="selector-tag">ul</span>, <span class="selector-tag">li</span>, <span class="selector-tag">fieldset</span>, <span class="selector-tag">form</span>, <span class="selector-tag">label</span>, <span class="selector-tag">legend</span>, <span class="selector-tag">table</span>,</span><br><span class="line"><span class="selector-tag">caption</span>, <span class="selector-tag">tbody</span>, <span class="selector-tag">tfoot</span>, <span class="selector-tag">thead</span>, <span class="selector-tag">tr</span>, <span class="selector-tag">th</span>, <span class="selector-tag">td</span>, <span class="selector-tag">article</span>, <span class="selector-tag">aside</span>, <span class="selector-tag">canvas</span>, <span class="selector-tag">details</span>, </span><br><span class="line"><span class="selector-tag">embed</span>, <span class="selector-tag">figure</span>, <span class="selector-tag">figcaption</span>, <span class="selector-tag">footer</span>, <span class="selector-tag">header</span>, <span class="selector-tag">hgroup</span>, <span class="selector-tag">menu</span>, <span class="selector-tag">nav</span>, <span class="selector-tag">output</span>, <span class="selector-tag">ruby</span>, </span><br><span class="line"><span class="selector-tag">section</span>, <span class="selector-tag">summary</span>, <span class="selector-tag">time</span>, <span class="selector-tag">mark</span>, <span class="selector-tag">audio</span>, <span class="selector-tag">video</span> &#123;</span><br><span class="line"><span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line"><span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line"><span class="attribute">border</span>: <span class="number">0</span>;</span><br><span class="line"><span class="attribute">font-size</span>: <span class="number">100%</span>;</span><br><span class="line"><span class="attribute">font</span>: inherit;</span><br><span class="line"><span class="attribute">vertical-align</span>: baseline;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* HTML5 display-role reset for older browsers */</span></span><br><span class="line"><span class="selector-tag">article</span>, <span class="selector-tag">aside</span>, <span class="selector-tag">details</span>, <span class="selector-tag">figcaption</span>, <span class="selector-tag">figure</span>, <span class="selector-tag">footer</span>, <span class="selector-tag">header</span>, <span class="selector-tag">hgroup</span>, <span class="selector-tag">menu</span>, <span class="selector-tag">nav</span>, <span class="selector-tag">section</span> &#123;</span><br><span class="line"><span class="attribute">display</span>: block;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line"><span class="attribute">line-height</span>: <span class="number">1.2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">table</span> &#123;</span><br><span class="line"><span class="attribute">border-collapse</span>: collapse;</span><br><span class="line"><span class="attribute">border-spacing</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">ol</span>, <span class="selector-tag">ul</span>&#123;</span><br><span class="line">    <span class="attribute">padding-left</span>:<span class="number">1.4em</span>;</span><br><span class="line"><span class="attribute">list-style</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">blockquote</span>, <span class="selector-tag">q</span> &#123;</span><br><span class="line"><span class="attribute">quotes</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">blockquote</span><span class="selector-pseudo">:before</span>, <span class="selector-tag">blockquote</span><span class="selector-pseudo">:after</span>, <span class="selector-tag">q</span><span class="selector-pseudo">:before</span>, <span class="selector-tag">q</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line"><span class="attribute">content</span>: <span class="string">''</span>;</span><br><span class="line"><span class="attribute">content</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">img</span>, <span class="selector-tag">video</span>, <span class="selector-tag">embed</span>, <span class="selector-tag">object</span>&#123;</span><br><span class="line">    <span class="attribute">max-width</span>:<span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*end reset browser styles*/</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> CSS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Div容器凸起放大显示效果</title>
      <link href="/2020/02/27/2020-2-27-Div-CSS/"/>
      <url>/2020/02/27/2020-2-27-Div-CSS/</url>
      
        <content type="html"><![CDATA[<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">style</span>&gt;</span> </span><br><span class="line"><span class="css">        <span class="selector-tag">div</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">margin-left</span><span class="selector-pseudo">:20px</span>;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">width</span><span class="selector-pseudo">:300px</span>;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">height</span><span class="selector-pseudo">:100px</span>;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">border</span><span class="selector-pseudo">:thin</span> <span class="selector-tag">solid</span> <span class="selector-id">#000</span>;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">background-color</span>:<span class="selector-id">#ff9900</span>;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">-moz-box-shadow</span>: 0<span class="selector-tag">px</span> 0<span class="selector-tag">px</span> 10<span class="selector-tag">px</span> <span class="selector-tag">rgba</span>(34, 25, 25, 0<span class="selector-class">.8</span>); <span class="comment">/* 老的 Firefox */</span></span></span><br><span class="line"><span class="css">            <span class="selector-tag">box-shadow</span>: 0<span class="selector-tag">px</span> 0<span class="selector-tag">px</span> 10<span class="selector-tag">px</span> <span class="selector-tag">rgba</span>(34, 25, 25, 0<span class="selector-class">.8</span>);</span></span><br><span class="line"><span class="css">            <span class="selector-tag">transform</span><span class="selector-pseudo">:scale(1.1</span>,1<span class="selector-class">.1</span>);</span></span><br><span class="line">        &#125;</span><br><span class="line">        div &#123;</span><br><span class="line"><span class="css">            <span class="selector-tag">margin-left</span><span class="selector-pseudo">:20px</span>;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">border</span><span class="selector-pseudo">:thin</span> <span class="selector-tag">solid</span> <span class="selector-id">#000</span>;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">width</span><span class="selector-pseudo">:300px</span>;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">height</span><span class="selector-pseudo">:100px</span>;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">background-color</span>:<span class="selector-id">#ff9900</span>;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">transition</span><span class="selector-pseudo">:transform</span> 0<span class="selector-class">.25s</span> <span class="selector-tag">ease</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> CSS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Div自适应浏览器窗口高度</title>
      <link href="/2020/02/26/2020-2-26-Div-auto-height/"/>
      <url>/2020/02/26/2020-2-26-Div-auto-height/</url>
      
        <content type="html"><![CDATA[<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">autodivheight();  </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">autodivheight</span>(<span class="params"></span>)</span>&#123; <span class="comment">//函数：获取尺寸  </span></span><br><span class="line"><span class="comment">//获取浏览器窗口高度  </span></span><br><span class="line"><span class="keyword">var</span> winHeight=<span class="number">0</span>;  </span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">window</span>.innerHeight)  </span><br><span class="line">winHeight = <span class="built_in">window</span>.innerHeight;  </span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> ((<span class="built_in">document</span>.body) &amp;&amp; (<span class="built_in">document</span>.body.clientHeight))  </span><br><span class="line">winHeight = <span class="built_in">document</span>.body.clientHeight;  </span><br><span class="line"><span class="comment">//通过深入Document内部对body进行检测，获取浏览器窗口高度  </span></span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">document</span>.documentElement &amp;&amp; <span class="built_in">document</span>.documentElement.clientHeight)  </span><br><span class="line">winHeight = <span class="built_in">document</span>.documentElement.clientHeight;  </span><br><span class="line"><span class="comment">//DIV高度为浏览器窗口的高度  </span></span><br><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">"test"</span>).style.height= winHeight*<span class="number">0.8</span> +<span class="string">"px"</span>;  </span><br><span class="line">&#125;  </span><br><span class="line"><span class="built_in">window</span>.onresize=autodivheight; <span class="comment">//浏览器窗口发生变化时同时变化DIV高度</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> 前端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Echarts Ajax加载数据</title>
      <link href="/2020/02/25/2020-2-25-Echarts-AJAX/"/>
      <url>/2020/02/25/2020-2-25-Echarts-AJAX/</url>
      
        <content type="html"><![CDATA[<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">echartPie.showLoading();</span><br><span class="line">echartGauge.showLoading();</span><br><span class="line">echartBar.showLoading();</span><br><span class="line">setInterval(<span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">$.ajax(&#123;</span><br><span class="line">type : <span class="string">"get"</span>, </span><br><span class="line"><span class="keyword">async</span> : <span class="literal">false</span>,   <span class="comment">//异步请求（同步请求将会锁住浏览器，用户其他操作必须等待请求完成才可以执行）</span></span><br><span class="line">url : <span class="string">"../php/preview.php"</span>,    <span class="comment">//请求发送到TestServlet处</span></span><br><span class="line">dataType : <span class="string">"json"</span>,        <span class="comment">//返回数据形式为json</span></span><br><span class="line">success : <span class="function"><span class="keyword">function</span>(<span class="params">resData</span>) </span>&#123;</span><br><span class="line"><span class="comment">//请求成功时执行该函数内容，result即为服务器返回的json对象</span></span><br><span class="line"><span class="keyword">if</span> (resData) &#123;</span><br><span class="line">echartPie.hideLoading();</span><br><span class="line">echartGauge.hideLoading();</span><br><span class="line">echartBar.hideLoading();</span><br><span class="line"></span><br><span class="line">resData.online_status[<span class="number">0</span>].name = <span class="built_in">window</span>.parent.languageData.terminalstate_online;</span><br><span class="line">resData.online_status[<span class="number">1</span>].name = <span class="built_in">window</span>.parent.languageData.terminalstate_offline;</span><br><span class="line">echartPie.setOption(&#123;</span><br><span class="line">series: [&#123;</span><br><span class="line">data: resData.online_status</span><br><span class="line">&#125;]</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">option.series[<span class="number">0</span>].data[<span class="number">0</span>].value = resData.CPU_usage;</span><br><span class="line">option.series[<span class="number">1</span>].data[<span class="number">0</span>].value = resData.RAM_usage;</span><br><span class="line">echartGauge.setOption(option,<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">echartBar.setOption(&#123;</span><br><span class="line">series: [&#123;</span><br><span class="line">data: resData.tasks_status</span><br><span class="line">&#125;]</span><br><span class="line">&#125;);</span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line">error : <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="comment">//请求失败时执行该函数</span></span><br><span class="line">toastr.error(<span class="built_in">window</span>.parent.languageData.echart_fail, <span class="built_in">window</span>.parent.languageData.common_tip);</span><br><span class="line">echartPie.hideLoading();</span><br><span class="line">echartGauge.hideLoading();</span><br><span class="line">echartBar.hideLoading();</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line">&#125;,<span class="number">1000</span>);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> 前端 </tag>
            
            <tag> Echart </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HTML5中Drag &amp; Drop拖曳效果的用法</title>
      <link href="/2020/02/24/2020-2-24-HTML5-Drag-Drop/"/>
      <url>/2020/02/24/2020-2-24-HTML5-Drag-Drop/</url>
      
        <content type="html"><![CDATA[<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">缺乏对clearData() dropEffect() effectAllowed()的理解</span><br><span class="line"></span><br><span class="line">eg1:</span><br><span class="line">把图像放在边框中</span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">HTML</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line"><span class="css"><span class="selector-id">#div1</span> &#123;<span class="attribute">width</span>:<span class="number">198px</span>; <span class="attribute">height</span>:<span class="number">66px</span>;<span class="attribute">padding</span>:<span class="number">10px</span>;<span class="attribute">border</span>:<span class="number">2px</span> solid <span class="number">#aaaaaa</span>;&#125;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="actionscript"><span class="function"><span class="keyword">function</span> <span class="title">allowDrop</span><span class="params">(ev)</span></span></span></span><br><span class="line">&#123;</span><br><span class="line">ev.preventDefault();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="actionscript"><span class="function"><span class="keyword">function</span> <span class="title">drag</span><span class="params">(ev)</span></span></span></span><br><span class="line">&#123;</span><br><span class="line"><span class="actionscript">ev.dataTransfer.setData(<span class="string">"img"</span>,ev.target.id);</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="actionscript"><span class="function"><span class="keyword">function</span> <span class="title">drop</span><span class="params">(ev)</span></span></span></span><br><span class="line">&#123;</span><br><span class="line">ev.preventDefault();</span><br><span class="line"><span class="actionscript"><span class="keyword">var</span> data=ev.dataTransfer.getData(<span class="string">"img"</span>);</span></span><br><span class="line"><span class="javascript">ev.target.appendChild(<span class="built_in">document</span>.getElementById(data));</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>请把 W3School 的图片拖放到矩形中：<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"div1"</span> <span class="attr">ondrop</span>=<span class="string">"drop(event)"</span> <span class="attr">ondragover</span>=<span class="string">"allowDrop(event)"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">id</span>=<span class="string">"drag1"</span> <span class="attr">width</span>=<span class="string">"100px"</span> <span class="attr">height</span>=<span class="string">"50px"</span> <span class="attr">src</span>=<span class="string">"drag.jpg"</span> <span class="attr">draggable</span>=<span class="string">"true"</span> <span class="attr">ondragstart</span>=<span class="string">"drag(event)"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">eg2:图片在两个边框之中来回拖放</span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">HTML</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line"><span class="css"><span class="selector-id">#div1</span>, <span class="selector-id">#div2</span></span></span><br><span class="line"><span class="css">&#123;<span class="attribute">float</span>:left; <span class="attribute">width</span>:<span class="number">198px</span>; <span class="attribute">height</span>:<span class="number">66px</span>; <span class="attribute">margin</span>:<span class="number">10px</span>;<span class="attribute">padding</span>:<span class="number">10px</span>;<span class="attribute">border</span>:<span class="number">1px</span> solid <span class="number">#aaaaaa</span>;&#125;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="actionscript"><span class="function"><span class="keyword">function</span> <span class="title">allowDrop</span><span class="params">(ev)</span></span></span></span><br><span class="line">&#123;</span><br><span class="line">ev.preventDefault();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="actionscript"><span class="function"><span class="keyword">function</span> <span class="title">drag</span><span class="params">(ev)</span></span></span></span><br><span class="line">&#123;</span><br><span class="line"><span class="actionscript">ev.dataTransfer.setData(<span class="string">"Text"</span>,ev.target.id);</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="actionscript"><span class="function"><span class="keyword">function</span> <span class="title">drop</span><span class="params">(ev)</span></span></span></span><br><span class="line">&#123;</span><br><span class="line">ev.preventDefault();</span><br><span class="line"><span class="actionscript"><span class="keyword">var</span> data=ev.dataTransfer.getData(<span class="string">"Text"</span>);</span></span><br><span class="line"><span class="javascript">ev.target.appendChild(<span class="built_in">document</span>.getElementById(data));</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"div1"</span> <span class="attr">ondrop</span>=<span class="string">"drop(event)"</span> <span class="attr">ondragover</span>=<span class="string">"allowDrop(event)"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"/i/eg_dragdrop_w3school.gif"</span> <span class="attr">draggable</span>=<span class="string">"true"</span> <span class="attr">ondragstart</span>=<span class="string">"drag(event)"</span> <span class="attr">id</span>=<span class="string">"drag1"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"div2"</span> <span class="attr">ondrop</span>=<span class="string">"drop(event)"</span> <span class="attr">ondragover</span>=<span class="string">"allowDrop(event)"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
          <category> HTML </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> 前端 </tag>
            
            <tag> HTML </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Flv.js视频流支持HTML5</title>
      <link href="/2020/02/24/2020-2-24-Flv-js-Streaming-HTML5/"/>
      <url>/2020/02/24/2020-2-24-Flv-js-Streaming-HTML5/</url>
      
        <content type="html"><![CDATA[<h2 id="常见直播协议"><a href="#常见直播协议" class="headerlink" title="常见直播协议"></a>常见直播协议</h2><ul><li>RTMP: 底层基于TCP，在浏览器端依赖Flash。</li><li>HTTP-FLV: 基于HTTP流式IO传输FLV，依赖浏览器支持播放FLV。</li><li>WebSocket-FLV: 基于WebSocket传输FLV，依赖浏览器支持播放FLV。WebSocket建立在HTTP之上，建立WebSocket连接前还要先建立HTTP连接。</li><li>HLS: Http Live Streaming，苹果提出基于HTTP的流媒体传输协议。HTML5可以直接打开播放。</li><li>RTP: 基于UDP，延迟1秒，浏览器不支持。</li></ul><hr><p>常见直播协议延迟与性能数据以下数据只做对比参考</p><table><thead><tr><th>传输协议</th><th>播放器</th><th>延迟</th><th>内存</th><th>CPU</th></tr></thead><tbody><tr><td>RTMP</td><td>Flash</td><td>1s</td><td>430M</td><td>11%</td></tr><tr><td>HTTP-FLV</td><td>Video</td><td>1s</td><td>310M</td><td>4.4%</td></tr><tr><td>HLS</td><td>Video</td><td>20s</td><td>205M</td><td>3%</td></tr></tbody></table><hr><p>在支持浏览器的协议里，延迟排序是：</p><p>++RTMP = HTTP-FLV = WebSocket-FLV &lt; HLS++</p><p>而性能排序恰好相反：</p><p>++RTMP &gt; HTTP-FLV = WebSocket-FLV &gt; HLS++</p><p>也就是说延迟小的性能不好。</p><p><em>可以看出在浏览器里做直播，使用HTTP-FLV协议是不错的，性能优于RTMP+Flash，延迟可以做到和RTMP+Flash一样甚至更好。</em></p><h2 id="flv-js-简介"><a href="#flv-js-简介" class="headerlink" title="flv.js 简介"></a>flv.js 简介</h2><p>flv.js是来自Bilibli的开源项目。它解析FLV文件喂给原生HTML5 Video标签播放音视频数据，使浏览器在不借助Flash的情况下播放FLV成为可能。</p><h2 id="flv-js-限制"><a href="#flv-js-限制" class="headerlink" title="flv.js 限制"></a>flv.js 限制</h2><ul><li>FLV里所包含的视频编码必须是H.264，音频编码必须是AAC或MP3， IE11和Edge浏览器不支持MP3音频编码，所以FLV里采用的编码最好是H.264+AAC，这个让音视频服务兼容不是问题。</li><li>对于录播，依赖 原生HTML5 Video标签 和 Media Source Extensions API</li><li>对于直播，依赖录播所需要的播放技术，同时依赖 HTTP FLV 或者 WebSocket 中的一种协议来传输FLV。其中HTTP FLV需通过流式IO去拉取数据，支持流式IO的有fetch或者stream</li><li>flv.min.js 文件大小 164Kb，gzip后 35.5Kb，flash播放器gzip后差不多也是这么大。</li><li>由于依赖Media Source Extensions，目前所有iOS和Android4.4.4以下里的浏览器都不支持，也就是说目前对于移动端flv.js基本是不能用的。</li></ul><p>flv.js依赖的浏览器特性兼容列表</p><ul><li><a href="http://caniuse.com/#feat=webm" target="_blank" rel="noopener">HTML5 Video</a></li><li><a href="http://caniuse.com/#feat=mediasource" target="_blank" rel="noopener">Media Source Extensions</a></li><li><a href="http://caniuse.com/#feat=websockets" target="_blank" rel="noopener">WebSocket</a></li><li>HTTP FLV: <a href="http://caniuse.com/#feat=fetch" target="_blank" rel="noopener">fetch</a> 或 <a href="http://caniuse.com/#feat=http-live-streaming" target="_blank" rel="noopener">stream</a> </li></ul><h2 id="flv-js-原理"><a href="#flv-js-原理" class="headerlink" title="flv.js 原理"></a>flv.js 原理</h2><p>flv.js只做了一件事，在获取到FLV格式的音视频数据后通过原生的JS去解码FLV数据，再通过<a href="http://caniuse.com/#feat=mediasource" target="_blank" rel="noopener">Media Source Extensions API</a> 喂给原生HTML5 Video标签。(HTML5 原生仅支持播放 mp4/webm 格式，不支持 FLV)</p><p>flv.js 为什么要绕一圈，从服务器获取FLV再解码转换后再喂给Video标签呢？原因如下：</p><ol><li>兼容目前的直播方案：目前大多数直播方案的音视频服务都是采用FLV容器格式传输音视频数据。</li><li>FLV容器格式相比于MP4格式更加简单，解析起来更快更方便。</li></ol><p>由于目前flv.js兼容性还不是很好，要用在产品中必要要兼顾到不支持flv.js的浏览器。兼容方案如下：</p><h2 id="flv-js兼容方案"><a href="#flv-js兼容方案" class="headerlink" title="flv.js兼容方案"></a>flv.js兼容方案</h2><ul><li>PC端</li></ul><ol><li>优先使用 HTTP-FLV，因为它延迟小，性能也不差1080P都很流畅。</li><li>不支持 flv.js 就使用 Flash播放器播 RTMP 流。Flash兼容性很好，但是性能差默认被很多浏览器禁用。</li><li>不想用Flash兼容也可以用HLS，但是PC端只有Safari支持HLS</li></ol><ul><li>移动端</li></ul><ol><li>优先使用 HTTP-FLV，因为它延迟小，支持HTTP-FLV的设备性能运行 flv.js 足够了。</li><li>不支持 flv.js 就使用 HLS，但是 HLS延迟非常大。</li><li>HLS 也不支持就没法直播了，因为移动端都不支持Flash。</li></ol><h2 id="flv-js延迟优化"><a href="#flv-js延迟优化" class="headerlink" title="flv.js延迟优化"></a>flv.js延迟优化</h2><p>按照上面的教程运行起来的直播延迟大概有3秒，经过优化可以到1秒。在教你怎么优化前先要介绍下直播运行流程：</p><ol><li><p>主播端在采集到一段时间的音视频原数据后，因为音视频原数据庞大需要先压缩数据：</p><ul><li>通过H264视频编码压缩数据数据</li><li>通过PCM音频编码压缩音频AAC数据</li><li>压缩完后再通过FLV容器格式封装压缩后的数据，封装成一个FLV TAG</li></ul></li><li><p>再把FLV TAG通过RTMP协议推流到音视频服务器，音视频服务器再从RTMP协议里解析出FLV TAG。</p></li><li><p>音视频服务器再通过HTTP协议通过和浏览器建立的长链接流式把FLV TAG传给浏览器。</p></li><li><p>flv.js 获取FLV TAG后解析出压缩后的音视频数据喂给Video播放。</p></li></ol><p>知道流程后我们就知道从哪入手优化了：</p><ul><li>主播端采集时收集了一段时间的音视频原数据，它专业的叫法是GOP。缩短这个收集时间(也就是减少GOP长度)可以优化延迟，但这样做的坏处是导致视频压缩率不高，传输效率低。</li><li>关闭音视频服务器的I桢缓存可以优化延迟，坏处是用户看到直播首屏的时间变大。</li><li>减少音视频服务器的buffer可以优化延迟，坏处是音视频服务器处理效率降低。</li><li>减少浏览器端flv.js的buffer可以优化延迟，坏处是浏览器端处理效率降低。</li><li>浏览器端开启flv.js的Worker，多线程运行flv.js提升解析速度可以优化延迟，这样做的flv.js配置代码是：</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">          enableWorker: <span class="literal">true</span>,</span><br><span class="line">          enableStashBuffer: <span class="literal">false</span>,</span><br><span class="line">          stashInitialSize: <span class="number">128</span>,<span class="comment">// 减少首桢显示等待时长</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>完整示例代码</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!doctype <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"zh"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"pragma"</span> <span class="attr">content</span>=<span class="string">"no-cache"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"cache-control"</span> <span class="attr">content</span>=<span class="string">"no-cache"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"expires"</span> <span class="attr">content</span>=<span class="string">"0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1, minimum-scale=1.0, maximum-scale=1.0, minimal-ui"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge,chrome=1"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"x-ua-compatible"</span> <span class="attr">content</span>=<span class="string">"IE=7,9,10"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-Type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span> <span class="attr">id</span>=<span class="string">"title"</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello flv<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">"play()"</span>&gt;</span>播放<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">"pause()"</span>&gt;</span>暂停<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">video</span> <span class="attr">id</span>=<span class="string">"videoElement"</span> <span class="attr">height</span>=<span class="string">"500"</span> <span class="attr">width</span>=<span class="string">"1000"</span> <span class="attr">style</span>=<span class="string">"border:thin solid black"</span> <span class="attr">controls</span> <span class="attr">loop</span>&gt;</span><span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"flv.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> videoElement = <span class="built_in">document</span>.getElementById(<span class="string">'videoElement'</span>);</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">var</span> flvPlayer = flvjs.createPlayer(&#123;</span></span><br><span class="line"><span class="actionscript">            isLive:<span class="literal">true</span>,</span></span><br><span class="line"><span class="actionscript">            type: <span class="string">'flv'</span>,</span></span><br><span class="line"><span class="actionscript">            url: <span class="string">'http://localhost:8089/movie'</span>,</span></span><br><span class="line"><span class="actionscript">            enableWorker: <span class="literal">true</span>,</span></span><br><span class="line"><span class="actionscript">            enableStashBuffer: <span class="literal">false</span>,</span></span><br><span class="line"><span class="actionscript">            stashInitialSize: <span class="number">128</span>    <span class="comment">// 减少首桢显示等待时长</span></span></span><br><span class="line">        &#125;);</span><br><span class="line">        flvPlayer.attachMediaElement(videoElement);</span><br><span class="line">        flvPlayer.load();</span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="function"><span class="keyword">function</span> <span class="title">play</span><span class="params">()</span></span>&#123;</span></span><br><span class="line">            flvPlayer.play();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="function"><span class="keyword">function</span> <span class="title">pause</span><span class="params">()</span></span>&#123;</span></span><br><span class="line">            flvPlayer.pause();</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> 前端 </tag>
            
            <tag> Video </tag>
            
            <tag> Flv.js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HTML5拍照,摄像机功能实战</title>
      <link href="/2020/02/23/2020-2-23-Camera-control-in-HTML/"/>
      <url>/2020/02/23/2020-2-23-Camera-control-in-HTML/</url>
      
        <content type="html"><![CDATA[<h2 id="拍照"><a href="#拍照" class="headerlink" title="拍照"></a>拍照</h2><p>HTML5的getUserMedia API为用户提供访问硬件设备媒体（摄像头、视频、音频、地理位置等）的接口，基于该接口，开发者可以在不依赖任何浏览器插件的条件下访问硬件媒体设备。</p><ol><li>获取视频流，并用video标签播放。<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;video id=<span class="string">"video"</span> autoplay&gt;&lt;<span class="regexp">/video&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">--------------------------------------------------------------</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">const videoConstraints = &#123; width: 1366, height: 768 &#125;;</span></span><br><span class="line"><span class="regexp">const videoNode = document.querySelector('#video');</span></span><br><span class="line"><span class="regexp">let stream = await navigator.mediaDevices.getUserMedia(&#123; audio: true, video: videoConstraints &#125;);</span></span><br><span class="line"><span class="regexp">videoNode.srcObject = stream;</span></span><br><span class="line"><span class="regexp">videoNode.play();</span></span><br></pre></td></tr></table></figure></li><li>多个摄像头设备，如何切换？</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// enumerateDevices获取所有媒体设备</span></span><br><span class="line"><span class="keyword">const</span> mediaDevices = <span class="keyword">await</span> navigator.mediaDevices.enumerateDevices();</span><br><span class="line"><span class="comment">// 通过设备实例king属性videoinput，过滤获取摄像头设备</span></span><br><span class="line"><span class="keyword">const</span> videoDevices = mediaDevices.filter(<span class="function"><span class="params">item</span> =&gt;</span> item.kind === <span class="string">'videoinput'</span>) || [];</span><br><span class="line"><span class="comment">// 获取前置摄像头</span></span><br><span class="line"><span class="keyword">const</span> videoDeviceId = videoDevices[<span class="number">0</span>].deviceId;</span><br><span class="line"><span class="keyword">const</span> videoConstraints = &#123; <span class="attr">deviceId</span>: &#123; <span class="attr">exact</span>: videoDeviceId &#125;, <span class="attr">width</span>: <span class="number">1366</span>, <span class="attr">height</span>: <span class="number">768</span> &#125;;</span><br><span class="line"><span class="keyword">let</span> stream = <span class="keyword">await</span> navigator.mediaDevices.getUserMedia(&#123; <span class="attr">audio</span>: <span class="literal">true</span>, <span class="attr">video</span>: videoConstraints &#125;);</span><br><span class="line"><span class="comment">// 获取后置摄像头</span></span><br><span class="line"><span class="keyword">const</span> videoDeviceId = videoDevices[<span class="number">1</span>].deviceId;</span><br><span class="line"><span class="keyword">const</span> videoConstraints = &#123; <span class="attr">deviceId</span>: &#123; <span class="attr">exact</span>: videoDeviceId &#125;, <span class="attr">width</span>: <span class="number">1366</span>, <span class="attr">height</span>: <span class="number">768</span> &#125;;</span><br><span class="line"><span class="keyword">let</span> stream = <span class="keyword">await</span> navigator.mediaDevices.getUserMedia(&#123; <span class="attr">audio</span>: <span class="literal">true</span>, <span class="attr">video</span>: videoConstraints &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 依次类推...</span></span><br></pre></td></tr></table></figure><ol start="3"><li>拍照保存图片</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 通过canvas捕捉video流，生成base64格式图片</span></span><br><span class="line"><span class="keyword">const</span> canvas = <span class="built_in">document</span>.createElement(<span class="string">'canvas'</span>);</span><br><span class="line"><span class="keyword">const</span> context = canvas.getContext(<span class="string">'2d'</span>);</span><br><span class="line">canvas.width = <span class="number">1366</span>;</span><br><span class="line">canvas.height = <span class="number">768</span>;</span><br><span class="line">context.drawImage(videoNode, <span class="number">0</span>, <span class="number">0</span>, canvas.width, canvas.height);</span><br><span class="line">download(canvas.toDataURL(<span class="string">'image/jpeg'</span>));</span><br><span class="line"><span class="comment">// 下载图片</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">download</span> (<span class="params">src</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!src) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">const</span> a = <span class="built_in">document</span>.createElement(<span class="string">'a'</span>);</span><br><span class="line">    a.setAttribute(<span class="string">'download'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>());</span><br><span class="line">    a.href = src;</span><br><span class="line">    a.click();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="4"><li>关闭摄像头设备</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> stream = <span class="keyword">await</span> navigator.mediaDevices.getUserMedia(&#123; <span class="attr">audio</span>: <span class="literal">true</span>, <span class="attr">video</span>: videoConstraints &#125;);</span><br><span class="line"><span class="comment">// 3s后关闭摄像头</span></span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    stream.getTracks().forEach(<span class="function"><span class="params">track</span> =&gt;</span> track.stop());</span><br><span class="line">    stream = <span class="literal">null</span>;</span><br><span class="line">&#125;, <span class="number">3000</span>);</span><br></pre></td></tr></table></figure><p>到此完成简单的相机拍照功能</p><h2 id="摄像"><a href="#摄像" class="headerlink" title="摄像"></a>摄像</h2><p>摄像基本流程，是录制一段视频流并保存为音视频文件。HTML5 MediaRecorder对象提供了多媒体录音和录视频功能。</p><p>==注意：摄像预览播放器video标签要设置静音muted（消除回声导致的刺耳噪音）==</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> videoConstraints = &#123; <span class="attr">width</span>: <span class="number">1366</span>, <span class="attr">height</span>: <span class="number">768</span> &#125;;</span><br><span class="line"><span class="keyword">let</span> stream = <span class="keyword">await</span> navigator.mediaDevices.getUserMedia(&#123; <span class="attr">audio</span>: <span class="literal">true</span>, <span class="attr">video</span>: videoConstraints &#125;);</span><br><span class="line"><span class="keyword">let</span> mediaRecorder = <span class="keyword">new</span> MediaRecorder(stream);</span><br><span class="line"><span class="keyword">let</span> mediaRecorderChunks = []; <span class="comment">// 记录数据流</span></span><br><span class="line">   </span><br><span class="line">mediaRecorder.ondataavailable = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    mediaRecorderChunks.push(e.data);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">mediaRecorder.onstop = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 通过Blob对象，创建文件二进制数据实例。</span></span><br><span class="line">    <span class="keyword">let</span> recorderFile = <span class="keyword">new</span> Blob(mediaRecorderChunks, &#123; <span class="string">'type'</span> : mediaRecorder.mimeType &#125;);</span><br><span class="line">    mediaRecorderChunks = [];</span><br><span class="line">    <span class="keyword">const</span> file = <span class="keyword">new</span> File([<span class="keyword">this</span>.recorderFile], (<span class="keyword">new</span> <span class="built_in">Date</span>).toISOString().replace(<span class="regexp">/:|\./g</span>, <span class="string">'-'</span>) + <span class="string">'.mp4'</span>, &#123;</span><br><span class="line">        type: <span class="string">'video/mp4'</span></span><br><span class="line">    &#125;);</span><br><span class="line">    download(URL.createObjectURL(file));</span><br><span class="line">    <span class="comment">// 下载视频</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">download</span> (<span class="params">src</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!src) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">const</span> a = <span class="built_in">document</span>.createElement(<span class="string">'a'</span>);</span><br><span class="line">        a.setAttribute(<span class="string">'download'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>());</span><br><span class="line">        a.href = src;</span><br><span class="line">        a.click();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">mediaRecorder.stop(); <span class="comment">// 停止录制，触发onstop事件</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> 前端 </tag>
            
            <tag> Video </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HTML中让表单Input等文本框为只读不可编辑的方法</title>
      <link href="/2020/02/22/2020-2-22-ReadOnly-Input-in-HTML/"/>
      <url>/2020/02/22/2020-2-22-ReadOnly-Input-in-HTML/</url>
      
        <content type="html"><![CDATA[<h2 id="HTML中让表单input等文本框为只读不可编辑的方法"><a href="#HTML中让表单input等文本框为只读不可编辑的方法" class="headerlink" title="HTML中让表单input等文本框为只读不可编辑的方法"></a>HTML中让表单input等文本框为只读不可编辑的方法</h2><p>有时候，我们希望表单中的文本框是只读的，让用户不能修改其中的信息，实现的方式归纳一下，有如下几种。 </p><p>方法1: onfocus=this.blur() 当鼠标放不上就离开焦点</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"input1"</span> <span class="attr">value</span>=<span class="string">"中国"</span> <span class="attr">onfocus</span>=<span class="string">this.blur()</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><p>方法2:readonly</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"input1"</span> <span class="attr">value</span>=<span class="string">"中国"</span> <span class="attr">readonly</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"input1"</span> <span class="attr">value</span>=<span class="string">"中国"</span> <span class="attr">readonly</span>=<span class="string">"true"</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><p>方法3: disabled</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"input1"</span> <span class="attr">value</span>=<span class="string">"中国"</span> <span class="attr">disabled</span>=<span class="string">"true"</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><p>完整的例子:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"ly_qq"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">tabindex</span>=<span class="string">"2"</span></span></span><br><span class="line"><span class="tag"><span class="attr">onMouseOver</span>=<span class="string">"this.className='input_1'"</span> </span></span><br><span class="line"><span class="tag"><span class="attr">onMouseOut</span>=<span class="string">"this.className='input_2'"</span> </span></span><br><span class="line"><span class="tag"><span class="attr">value</span>=<span class="string">"123456789"</span> <span class="attr">disabled</span>=<span class="string">"true"</span>　<span class="attr">readOnly</span>=<span class="string">"true"</span> /&gt;</span></span><br></pre></td></tr></table></figure><ul><li>disabled=”true” 文字会变成灰色，不可编辑。 </li><li>readOnly=”true” 文字不会变色，也是不可编辑的</li></ul><hr><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">css屏蔽输入：<span class="tag">&lt;<span class="name">input</span> <span class="attr">style</span>=<span class="string">"ime-mode: disabled"</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><ul><li>第一：disabled=”disabled”这样定义之后被禁用的 input 元素既不可用，也不可点击。</li><li>第二：readonly=”readonly” 只读字段是不能修改的。不过，用户仍然可以使用 tab 键切换到该字段，还可以选中或拷贝其文本；</li></ul>]]></content>
      
      
      <categories>
          
          <category> HTML </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> HTML </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>IE文字转语音</title>
      <link href="/2020/02/21/2020-2-21-IE-TTS/"/>
      <url>/2020/02/21/2020-2-21-IE-TTS/</url>
      
        <content type="html"><![CDATA[<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>语音播报<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">utf-8</span>"&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"语音播报"</span> <span class="attr">onclick</span>=<span class="string">"listen1();"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"语音播报2"</span> <span class="attr">onclick</span>=<span class="string">"listen2();"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"语音播报3"</span> <span class="attr">onclick</span>=<span class="string">"listen3();"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">//每次播报都重新创建对象会导致播放中断或间隔性播放等问题，因此建议只全局创建一次</span></span></span><br><span class="line"><span class="actionscript">        <span class="keyword">var</span> voiceObj = <span class="keyword">new</span> ActiveXObject(<span class="string">"Sapi.SpVoice"</span>);</span></span><br><span class="line">        </span><br><span class="line"><span class="actionscript">        <span class="function"><span class="keyword">function</span> <span class="title">listen1</span><span class="params">()</span></span>&#123;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">//朗读</span></span></span><br><span class="line"><span class="actionscript">        voiceObj.Speak(<span class="string">"开始在ie浏览器上朗读文本了"</span>,<span class="number">1</span>);</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">var</span> handle=voiceObj.SpeakCompleteEvent();</span></span><br><span class="line">        voiceObj.WaitUntilDone(handle);</span><br><span class="line">        &#125;</span><br><span class="line"><span class="actionscript">        <span class="function"><span class="keyword">function</span> <span class="title">listen2</span><span class="params">()</span></span>&#123;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">//朗读</span></span></span><br><span class="line"><span class="actionscript">        voiceObj.Speak(<span class="string">"开始在ie浏览器上朗读文本了"</span>,<span class="number">1</span>);</span></span><br><span class="line">        &#125;</span><br><span class="line"><span class="actionscript">        <span class="function"><span class="keyword">function</span> <span class="title">listen3</span><span class="params">()</span></span>&#123;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">//语速</span></span></span><br><span class="line">        voiceObj.Rate=-1;</span><br><span class="line"><span class="actionscript">        <span class="comment">//音量</span></span></span><br><span class="line">        voiceObj.Volume=60;</span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> text=<span class="built_in">document</span>.getElementById(<span class="string">"p1"</span>).innerHTML;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">//朗读</span></span></span><br><span class="line">        voiceObj.Speak(text,1);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> 前端 </tag>
            
            <tag> TTS </tag>
            
            <tag> IE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>iframe高度调节</title>
      <link href="/2020/02/20/2020-2-20-iframe-height/"/>
      <url>/2020/02/20/2020-2-20-iframe-height/</url>
      
        <content type="html"><![CDATA[<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">startInit(<span class="string">'contextframe'</span>, <span class="number">560</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> browserVersion = <span class="built_in">window</span>.navigator.userAgent.toUpperCase();</span><br><span class="line"><span class="keyword">var</span> isOpera = browserVersion.indexOf(<span class="string">"OPERA"</span>) &gt; <span class="number">-1</span> ? <span class="literal">true</span> : <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">var</span> isFireFox = browserVersion.indexOf(<span class="string">"FIREFOX"</span>) &gt; <span class="number">-1</span> ? <span class="literal">true</span> : <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">var</span> isChrome = browserVersion.indexOf(<span class="string">"CHROME"</span>) &gt; <span class="number">-1</span> ? <span class="literal">true</span> : <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">var</span> isSafari = browserVersion.indexOf(<span class="string">"SAFARI"</span>) &gt; <span class="number">-1</span> ? <span class="literal">true</span> : <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">var</span> isIE = (!!<span class="built_in">window</span>.ActiveXObject || <span class="string">"ActiveXObject"</span> <span class="keyword">in</span> <span class="built_in">window</span>);</span><br><span class="line"><span class="keyword">var</span> isIE9More = (! -[<span class="number">1</span>, ] == <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">reinitIframe</span>(<span class="params">iframeId, minHeight</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> iframe = <span class="built_in">document</span>.getElementById(iframeId);</span><br><span class="line">        <span class="keyword">var</span> sidebar = <span class="built_in">document</span>.getElementById(<span class="string">'sidebar-menu'</span>);</span><br><span class="line">        <span class="keyword">var</span> bHeight = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (isChrome == <span class="literal">false</span> &amp;&amp; isSafari == <span class="literal">false</span>)</span><br><span class="line">            bHeight = iframe.contentWindow.document.body.scrollHeight;</span><br><span class="line">            <span class="keyword">var</span> dHeight = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (isFireFox == <span class="literal">true</span>)</span><br><span class="line">            dHeight = iframe.contentWindow.document.documentElement.offsetHeight + <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (isIE == <span class="literal">false</span> &amp;&amp; isOpera == <span class="literal">false</span>)</span><br><span class="line">            dHeight = iframe.contentWindow.document.documentElement.scrollHeight;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (isIE == <span class="literal">true</span> &amp;&amp; isIE9More) &#123;<span class="comment">//ie9+</span></span><br><span class="line">                <span class="keyword">var</span> heightDeviation = bHeight - <span class="built_in">eval</span>(<span class="string">"window.IE9MoreRealHeight"</span> + iframeId);</span><br><span class="line">                <span class="keyword">if</span> (heightDeviation == <span class="number">0</span>) &#123;</span><br><span class="line">                    bHeight += <span class="number">3</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (heightDeviation != <span class="number">3</span>) &#123;</span><br><span class="line">                    <span class="built_in">eval</span>(<span class="string">"window.IE9MoreRealHeight"</span> + iframeId + <span class="string">"="</span> + bHeight);</span><br><span class="line">                    bHeight += <span class="number">3</span>;</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span><span class="comment">//ie[6-8]、OPERA</span></span><br><span class="line">            bHeight += <span class="number">3</span>;</span><br><span class="line">        <span class="keyword">var</span> height = <span class="built_in">Math</span>.max(bHeight, dHeight);</span><br><span class="line">        <span class="keyword">if</span> (height &lt; minHeight) height = minHeight;</span><br><span class="line">        iframe.style.height = height + <span class="string">"px"</span>;</span><br><span class="line">        sidebar.style.height = height + <span class="string">"px"</span>;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (ex) &#123; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">startInit</span>(<span class="params">iframeId, minHeight</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">eval</span>(<span class="string">"window.IE9MoreRealHeight"</span> + iframeId + <span class="string">"=0"</span>);</span><br><span class="line">    <span class="built_in">window</span>.setInterval(<span class="string">"reinitIframe('"</span> + iframeId + <span class="string">"',"</span> + minHeight + <span class="string">")"</span>, <span class="number">100</span>);</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">autoWidth</span>(<span class="params">iframe</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (iframe) &#123;</span><br><span class="line">        <span class="keyword">var</span> iframeWin = iframe.contentWindow || iframe.contentDocument.parentWindow;</span><br><span class="line">        <span class="keyword">if</span> (iframeWin.document.body) &#123;</span><br><span class="line">        <span class="comment">//  iframe.height = iframeWin.document.documentElement.scrollHeight || iframeWin.document.body.scrollHeight;</span></span><br><span class="line">            iframe.width = iframeWin.document.documentElement.clientWidth || iframeWin.document.body.clientWidth;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> 前端 </tag>
            
            <tag> iframe </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>IndexedDB</title>
      <link href="/2020/02/19/2020-2-19-IndexedDB/"/>
      <url>/2020/02/19/2020-2-19-IndexedDB/</url>
      
        <content type="html"><![CDATA[<h1 id="IndexedDB"><a href="#IndexedDB" class="headerlink" title="IndexedDB"></a>IndexedDB</h1><p>随着浏览器的功能不断增强，越来越多的网站开始考虑，将大量数据储存在客户端，这样可以减少从服务器获取数据，直接从本地获取数据。</p><p>现有的浏览器数据储存方案，都不适合储存大量数据：Cookie 的大小不超过 4KB，且每次请求都会发送回服务器；LocalStorage 在 2.5MB 到 10MB 之间（各家浏览器不同），而且不提供搜索功能，不能建立自定义的索引。所以，需要一种新的解决方案，这就是 IndexedDB 诞生的背景。</p><p>通俗地说，IndexedDB 就是浏览器提供的本地数据库，它可以被网页脚本创建和操作。IndexedDB 允许储存大量数据，提供查找接口，还能建立索引。这些都是 LocalStorage 所不具备的。就数据库类型而言，IndexedDB 不属于关系型数据库（不支持 SQL 查询语句），更接近 NoSQL 数据库。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> <span class="title">IIFE</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!<span class="built_in">window</span>.indexedDB)&#123;</span><br><span class="line">        alert(<span class="string">'your browser is not support indexedDB!'</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> request = <span class="built_in">window</span>.indexedDB.open(<span class="string">'person'</span>, <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">var</span> db;</span><br><span class="line">    request.onerror = <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'数据库打开报错'</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">    request.onsuccess = <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">        db = request.result;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'数据库打开成功'</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">    request.onupgradeneeded = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'onupgradeneeded...'</span>);</span><br><span class="line">        db = event.target.result;</span><br><span class="line">        <span class="keyword">var</span> objectStore = db.createObjectStore(<span class="string">'person'</span>, &#123; <span class="attr">keyPath</span>: <span class="string">'id'</span> &#125;);</span><br><span class="line">        objectStore.createIndex(<span class="string">'name'</span>, <span class="string">'name'</span>, &#123; <span class="attr">unique</span>: <span class="literal">false</span> &#125;);</span><br><span class="line">        objectStore.createIndex(<span class="string">'email'</span>, <span class="string">'email'</span>, &#123; <span class="attr">unique</span>: <span class="literal">true</span> &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> request = db.transaction([<span class="string">'person'</span>], <span class="string">'readwrite'</span>)</span><br><span class="line">            .objectStore(<span class="string">'person'</span>)</span><br><span class="line">            .add(obj)</span><br><span class="line">            <span class="comment">//.add(&#123; id: 1, name: 'ccy', age: 18, email: 'test@example.com' &#125;);</span></span><br><span class="line"></span><br><span class="line">        request.onsuccess = <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'数据写入成功'</span>);</span><br><span class="line">        &#125;;</span><br><span class="line">        request.onerror = <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'数据写入失败'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">read</span>(<span class="params">index</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> transaction = db.transaction([<span class="string">'person'</span>]);</span><br><span class="line">        <span class="keyword">var</span> objectStore = transaction.objectStore(<span class="string">'person'</span>);</span><br><span class="line">        <span class="keyword">var</span> request = objectStore.get(index);</span><br><span class="line">        request.onerror = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'事务失败'</span>);</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        request.onsuccess = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (request.result) &#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">'Name: '</span> + request.result.name);</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">'Age: '</span> + request.result.age);</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">'Email: '</span> + request.result.email);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">'未获得数据记录'</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">readAll</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> objectStore = db.transaction(<span class="string">'person'</span>).objectStore(<span class="string">'person'</span>);</span><br><span class="line">        objectStore.openCursor().onsuccess = <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> cursor = event.target.result;</span><br><span class="line">            <span class="keyword">if</span> (cursor) &#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">'Id: '</span> + cursor.key);</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">'Name: '</span> + cursor.value.name);</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">'Age: '</span> + cursor.value.age);</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">'Email: '</span> + cursor.value.email);</span><br><span class="line">                cursor.continue();</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">'没有更多数据了！'</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">update</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> request = db.transaction([<span class="string">'person'</span>], <span class="string">'readwrite'</span>)</span><br><span class="line">            .objectStore(<span class="string">'person'</span>)</span><br><span class="line">            .put(obj)</span><br><span class="line">            <span class="comment">//.put(&#123; id: 1, name: '李四', age: 35, email: 'lisi@example.com' &#125;);</span></span><br><span class="line"></span><br><span class="line">        request.onsuccess = <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'数据更新成功'</span>);</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        request.onerror = <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'数据更新失败'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">remove</span>(<span class="params">index</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> request = db.transaction([<span class="string">'person'</span>], <span class="string">'readwrite'</span>)</span><br><span class="line">            .objectStore(<span class="string">'person'</span>)</span><br><span class="line">            .delete(index);</span><br><span class="line"></span><br><span class="line">        request.onsuccess = <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'数据删除成功'</span>);</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">window</span>.util = &#123;</span><br><span class="line">        add: add,</span><br><span class="line">        read: read,</span><br><span class="line">        readAll: readAll,</span><br><span class="line">        update: update,</span><br><span class="line">        remove: remove,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Database </category>
          
      </categories>
      
      
        <tags>
            
            <tag> IndexedDB </tag>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>iOS设备上iframe的宽度会扩大的解决办法</title>
      <link href="/2020/02/18/2020-2-18-iframe-width-bug-in-ios/"/>
      <url>/2020/02/18/2020-2-18-iframe-width-bug-in-ios/</url>
      
        <content type="html"><![CDATA[<h5 id="解决办法，就是在iframe加载完成后，设置-iframe里面body的宽度为多少PX。"><a href="#解决办法，就是在iframe加载完成后，设置-iframe里面body的宽度为多少PX。" class="headerlink" title="解决办法，就是在iframe加载完成后，设置 iframe里面body的宽度为多少PX。"></a>解决办法，就是在iframe加载完成后，设置 iframe里面body的宽度为多少PX。</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"#iframe1"</span>)[<span class="number">0</span>].onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    iosIframeWidthBug();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*修复ios iframe width bug*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">iosIframeWidthBug</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//不是 iphone ipad就不执行了</span></span><br><span class="line">    <span class="keyword">if</span> (!navigator.userAgent.match(<span class="regexp">/iPad|iPhone/i</span>))&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="comment">//获取子iframe</span></span><br><span class="line">        <span class="keyword">var</span> iframebody = <span class="built_in">document</span>.getElementById(<span class="string">'iframe1'</span>).contentWindow.document.body;</span><br><span class="line">        iframebody.style.width = <span class="built_in">document</span>.body.clientWidth+<span class="string">'px'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> 前端 </tag>
            
            <tag> iframe </tag>
            
            <tag> iOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>iView的表格如何单击这行就选中</title>
      <link href="/2020/02/17/2020-2-17-iView-selected-one-row/"/>
      <url>/2020/02/17/2020-2-17-iView-selected-one-row/</url>
      
        <content type="html"><![CDATA[<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Table</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">border</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">ref</span>=<span class="string">"table"</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">:columns</span>=<span class="string">"columns"</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">:data</span>=<span class="string">"list"</span> </span></span><br><span class="line"><span class="tag">    @<span class="attr">on-row-click</span>=<span class="string">"rowClick"</span> </span></span><br><span class="line"><span class="tag">    @<span class="attr">on-selection-change</span>=<span class="string">"SelectGoods"</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Table</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rowClick(data,index)&#123;</span><br><span class="line">    <span class="keyword">this</span>.$refs.table.toggleSelect(index);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
          <category> Vue.js </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> 前端 </tag>
            
            <tag> iView </tag>
            
            <tag> Vue.js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jQuery.pep.js</title>
      <link href="/2020/02/16/2020-2-16-jQuery-pep-js/"/>
      <url>/2020/02/16/2020-2-16-jQuery-pep-js/</url>
      
        <content type="html"><![CDATA[<h1 id="jQuery-pep"><a href="#jQuery-pep" class="headerlink" title="jQuery.pep"></a>jQuery.pep</h1><h2 id="Getting-Started"><a href="#Getting-Started" class="headerlink" title="Getting Started"></a>Getting Started</h2><p>Getting started is simple: include jQuery, include pep, then:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'.pep'</span>).pep(); <span class="comment">// yup, that simple.</span></span><br></pre></td></tr></table></figure><h2 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h2><p>Pep has many options. Here they are in their entirety, with their defaults. </p><table><thead><tr><th>Name</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>initiate</td><td><code>function(){}</code></td><td>[≘ touchstart/mousedown] called when first touch / click event is triggered on the object</td></tr><tr><td>start</td><td><code>function(){}</code></td><td>called when dragging starts; when <code>dx</code> or <code>dy</code> are greater than <code>startThreshold[0]</code> or <code>startThreshold[1]</code></td></tr><tr><td>drag</td><td><code>function(){}</code></td><td>[≘ touchmove/mousemove] called continuously while the object is dragging</td></tr><tr><td>stop</td><td><code>function(){}</code></td><td>[≘ touchend/mouseup] called when dragging stops</td></tr><tr><td>easing</td><td><code>function(){}</code></td><td>called while object is easing</td></tr><tr><td>rest</td><td><code>function(){}</code></td><td>called after dragging stops, and object has come to rest</td></tr><tr><td>moveTo</td><td><code>false</code></td><td>custom method to override the default moveTo functionality.</td></tr><tr><td>callIfNotStarted</td><td><code>[&#39;stop&#39;, &#39;rest&#39;]</code></td><td>if object has <em>not</em> moved outside of the <code>startThreshold</code>, call either the user-provided <code>stop</code> or <code>rest</code> fxn’s anyway, or call both</td></tr><tr><td>startThreshold</td><td><code>[0,0]</code></td><td>how far past should the object move in the [x,y] direction before user ‘start’ function is called</td></tr><tr><td>grid</td><td><code>[0,0]</code></td><td>define an [x,y] grid for the object to move along</td></tr><tr><td>revert</td><td><code>false</code></td><td>revert back to initial position</td></tr><tr><td>revertAfter</td><td><code>stop</code></td><td>revert after given event - <code>&#39;stop&#39;</code> or <code>&#39;ease&#39;</code></td></tr><tr><td>revertIf</td><td><code>function(){ return true; }</code></td><td>return <code>false</code> / <code>true</code> from this function to conditionally revert an object</td></tr><tr><td>droppable</td><td><code>false</code></td><td>CSS selector that this element can be dropped on, false to disable</td></tr><tr><td>droppableActiveClass</td><td><code>&#39;pep-dpa&#39;</code></td><td>class to add to active droppable parents, default to pep-dpa (droppable parent active); inspect <code>this.activeDropRegions</code> within each function for valuable info</td></tr><tr><td>overlapFunction</td><td><code>false</code></td><td>override pep’s default overlap function; takes two args: a &amp; b and returns true if they overlap</td></tr><tr><td>cssEaseString</td><td><em>cubic-bezier(0.190, 1.000, 0.220, 1.000)</em></td><td>get more css ease params from [ <a href="http://matthewlein.com/ceaser/" target="_blank" rel="noopener">http://matthewlein.com/ceaser/</a> ]</td></tr><tr><td>cssEaseDuration</td><td><code>750</code></td><td>how long should it take (in ms) for the object to get from stop to rest?</td></tr><tr><td>constrainTo</td><td><code>false</code></td><td>constrain object to <code>&#39;window&#39;</code> or <code>&#39;parent&#39;</code> or <code>[top, right, bottom, left]</code>; works best w/ useCSSTranslation set to false</td></tr><tr><td>axis</td><td><code>null</code></td><td>constrain object to either ‘x’ or ‘y’ axis</td></tr><tr><td>debug</td><td><code>false</code></td><td>show debug values and events in the lower-righthand corner of page</td></tr><tr><td>activeClass</td><td><code>&#39;pep-active&#39;</code></td><td>class to add to the pep element while dragging</td></tr><tr><td>multiplier</td><td><code>1</code></td><td>+/- this number to modify to 1:1 ratio of finger/mouse movement to el movement</td></tr><tr><td>velocityMultiplier</td><td><code>1.9</code></td><td>+/- this number to modify the springiness of the object as your release it</td></tr><tr><td>shouldPreventDefault</td><td><code>true</code></td><td>in some cases, we don’t want to prevent the default mousedown/touchstart on our Pep object, your call</td></tr><tr><td>allowDragEventPropagation</td><td><code>true</code></td><td>set to false to stop drag events from bubbling up through the DOM tree</td></tr><tr><td>stopEvents</td><td><code>&#39;&#39;</code></td><td>space delimited set of events which programmatically cause the object to stop</td></tr><tr><td>hardwareAccelerate</td><td><code>true</code></td><td>apply the CSS3 silver bullet method to accelerate the pep object: <a href="http://indiegamr.com/ios6-html-hardware-acceleration-changes-and-how-to-fix-them/" target="_blank" rel="noopener">http://indiegamr.com/ios6-html-hardware-acceleration-changes-and-how-to-fix-them/</a></td></tr><tr><td>useCSSTranslation</td><td><code>true</code></td><td>use CSS transform translations as opposed to top/left</td></tr><tr><td>disableSelect</td><td><code>true</code></td><td>apply <code>user-select: none</code> (CSS) to the object</td></tr><tr><td>removeMargins</td><td><code>true</code></td><td>remove margins for better object placement</td></tr><tr><td>shouldEase</td><td><code>true</code></td><td>disable/enable easing</td></tr><tr><td>place</td><td><code>true</code></td><td>bypass pep’s object placement logic</td></tr><tr><td>deferPlacement</td><td><code>false</code></td><td>defer object placement until start event occurs</td></tr><tr><td>forceNonCSS3Movement</td><td><code>false</code></td><td>DO NOT USE: this is subject to come/go. Use at your own risk</td></tr><tr><td>elementsWithInteraction</td><td><code>&#39;input&#39;</code></td><td>valid CSS/jQuery selector for elements within the Pep object that should allow user interaction, and thus propagate to allow movement</td></tr><tr><td>ignoreRightClick</td><td><code>true</code></td><td>start event will be ignored if triggered by a right click</td></tr><tr><td>startPos</td><td><code>{ left: null, top: null }</code></td><td>set the default left/top coordinate to position the object with on load</td></tr><tr><td>useBoundingClientRect</td><td><code>false</code></td><td>use <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect" target="_blank" rel="noopener">getBoundingClientRect()</a> to retrieve element dimensions instead of jQuery’s .outerWidth() &amp; .outerHeight() (useful when your element is scaled via CSS transforms)</td></tr></tbody></table><h2 id="API"><a href="#API" class="headerlink" title="API"></a>API</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Toggle functionality of all Pep objects on the page</span></span><br><span class="line">$.pep.toggleAll()</span><br><span class="line"></span><br><span class="line"><span class="comment">// Explicitly disable all Pep objects on the page</span></span><br><span class="line">$.pep.toggleAll(<span class="literal">false</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Explicitly enable all Pep objects on the page</span></span><br><span class="line">$.pep.toggleAll(<span class="literal">true</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Unbind Pep completely from the object</span></span><br><span class="line"><span class="keyword">var</span> $pep = $(<span class="string">'.pep'</span>);</span><br><span class="line">$pep.pep();               <span class="comment">// bind</span></span><br><span class="line">$.pep.unbind( $pep );     <span class="comment">// unbind</span></span><br><span class="line">$pep.pep();               <span class="comment">// bind</span></span><br><span class="line"><span class="string">`</span></span><br></pre></td></tr></table></figure><h2 id="Class-Applications"><a href="#Class-Applications" class="headerlink" title="Class Applications"></a>Class Applications</h2><p>The following classes are applied corresponding to events that are happening on the pep object:</p><ul><li><code>pep-active</code> – applied when initiate event is triggered; removed when ease has finished</li><li><code>pep-start</code> – applied when start event is triggered; removed when stop event occurs</li><li><code>pep-ease</code> – applied when stop event is triggered; removed when ease has finished</li></ul><h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2><p><strong>Via Bower</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bower install jquery.pep</span><br><span class="line">`</span><br></pre></td></tr></table></figure><p><strong>From CDN</strong></p><p>Bleeding edge, development version:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;rawgithub.com&#x2F;briangonzalez&#x2F;jquery.pep.js&#x2F;master&#x2F;src&#x2F;jquery.pep.js</span><br></pre></td></tr></table></figure><h2 id="A-note-on-droppable-option"><a href="#A-note-on-droppable-option" class="headerlink" title="A note on droppable option"></a>A note on <code>droppable</code> option</h2><p>There is a convenience object within the context of each function pep makes available (drag, rest, ease, etc.) called <code>activeDropRegions</code>, which is an array of jQuery objects that the pep object is currently “over”.</p><p><strong>Example:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'.pep'</span>).pep(&#123;</span><br><span class="line">  droppable:   <span class="string">'.drop-target'</span>,</span><br><span class="line">  drag: <span class="function"><span class="keyword">function</span>(<span class="params">ev, obj</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'There are '</span> + <span class="keyword">this</span>.activeDropRegions.length + <span class="string">'active drop regions.'</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  revert: <span class="literal">true</span>,</span><br><span class="line">  revertIf: <span class="function"><span class="keyword">function</span>(<span class="params">ev, obj</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> !<span class="keyword">this</span>.activeDropRegions.length;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="Examples"><a href="#Examples" class="headerlink" title="Examples"></a>Examples</h2><p>Checkout the examples in the <code>demos</code> folder, which cover a wide array of test cases and options. Or you can check out other examples at <a href="http://pep.briangonzalez.org/" target="_blank" rel="noopener">http://pep.briangonzalez.org/</a> (which can also be found in more detail on Codepen: <a href="http://codepen.io/briangonzalez/tag/pep-demo" target="_blank" rel="noopener">http://codepen.io/briangonzalez/tag/pep-demo</a>)</p>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
          <category> jQuery </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> 前端 </tag>
            
            <tag> jQuery </tag>
            
            <tag> pep.js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jQuery将表单序列化成一个Object对象的实例</title>
      <link href="/2020/02/15/2020-2-15-jQuery-JSON-to-Object/"/>
      <url>/2020/02/15/2020-2-15-jQuery-JSON-to-Object/</url>
      
        <content type="html"><![CDATA[<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">$</span>)</span>&#123; </span><br><span class="line">  $.fn.extend(&#123; </span><br><span class="line">    serializeObject:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; </span><br><span class="line">      <span class="keyword">if</span>(<span class="keyword">this</span>.length&gt;<span class="number">1</span>)&#123; </span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>; </span><br><span class="line">      &#125; </span><br><span class="line">      <span class="keyword">var</span> arr=<span class="keyword">this</span>.serializeArray(); </span><br><span class="line">      <span class="keyword">var</span> obj=<span class="keyword">new</span> <span class="built_in">Object</span>; </span><br><span class="line">      $.each(arr,<span class="function"><span class="keyword">function</span>(<span class="params">k,v</span>)</span>&#123; </span><br><span class="line">        obj[v.name]=v.value; </span><br><span class="line">      &#125;); </span><br><span class="line">      <span class="keyword">return</span> obj; </span><br><span class="line">    &#125; </span><br><span class="line">  &#125;); </span><br><span class="line">&#125;)(jQuery); </span><br><span class="line"></span><br><span class="line">$(<span class="string">":button"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">       <span class="keyword">var</span> test=$(<span class="string">"form"</span>).serializeObject();</span><br><span class="line">       alert(test.id);     </span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">""</span> <span class="attr">method</span>=<span class="string">"get"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">type</span>=<span class="string">"hidden"</span> <span class="attr">value</span>=<span class="string">"110"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"test"</span> <span class="attr">type</span>=<span class="string">"text"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">""</span> <span class="attr">type</span>=<span class="string">"button"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
          <category> JSON </category>
          
          <category> jQuery </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> 前端 </tag>
            
            <tag> JSON </tag>
            
            <tag> jQuery </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jQuery里面获取宽度,高度,x,y坐标</title>
      <link href="/2020/02/14/2020-2-14-jQuery-get-height-x-y/"/>
      <url>/2020/02/14/2020-2-14-jQuery-get-height-x-y/</url>
      
        <content type="html"><![CDATA[<h3 id="jQuery里面获取div区块的宽度与高度"><a href="#jQuery里面获取div区块的宽度与高度" class="headerlink" title="jQuery里面获取div区块的宽度与高度"></a>jQuery里面获取div区块的宽度与高度</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">获取宽度</span><br><span class="line">$(<span class="string">'div'</span>).width();             获取：区块的本身宽度</span><br><span class="line">$(<span class="string">'div'</span>).outerWidth();        获取：区块的宽度+padding宽度+border宽度</span><br><span class="line">$(<span class="string">'div'</span>).outerWidth(<span class="literal">true</span>);    获取：区块的宽度+padding宽度+border宽度+margin的宽度</span><br><span class="line"></span><br><span class="line">获取高度</span><br><span class="line">$(<span class="string">'div'</span>).height();            获取：区块的本身高度</span><br><span class="line">$(<span class="string">'div'</span>).outerHeight();       获取：区块的高度+padding高度+border高度</span><br><span class="line">$(<span class="string">'div'</span>).outerHeight(<span class="literal">true</span>);   获取：区块的高度+padding高度+border高度+margin的高度</span><br></pre></td></tr></table></figure><h3 id="JQuery-获得div绝对-相对位置的坐标方法"><a href="#JQuery-获得div绝对-相对位置的坐标方法" class="headerlink" title="JQuery 获得div绝对,相对位置的坐标方法"></a>JQuery 获得div绝对,相对位置的坐标方法</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">获取页面某一元素的绝对X,Y坐标</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> X = $(<span class="string">'#DivID'</span>).offset().top;</span><br><span class="line"><span class="keyword">var</span> Y = $(<span class="string">'#DivID'</span>).offset().left;</span><br><span class="line"></span><br><span class="line">获取相对(父元素)位置</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> X = $(<span class="string">'#DivID'</span>).position().top;</span><br><span class="line"><span class="keyword">var</span> Y = $(<span class="string">'#DivID'</span>).position().left;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">onmousemove=<span class="string">"getCoords(event, this)"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getCoords</span>(<span class="params">ev,obj</span>)</span>&#123;</span><br><span class="line"><span class="keyword">var</span> width = $(<span class="string">'#scenes'</span>).width(); </span><br><span class="line"><span class="keyword">var</span> height = $(<span class="string">'#scenes'</span>).height();</span><br><span class="line"><span class="keyword">var</span> x = ev.clientX-obj.offsetLeft;</span><br><span class="line">    <span class="keyword">var</span> y = ev.clientY-obj.offsetTop;</span><br><span class="line"><span class="keyword">var</span> coord_x = (x/width*<span class="number">100</span>).toFixed(<span class="number">2</span>) + <span class="string">'%'</span>;</span><br><span class="line"><span class="keyword">var</span> coord_y = (y/height*<span class="number">100</span>).toFixed(<span class="number">2</span>)+ <span class="string">'%'</span>;</span><br><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">'coord_x'</span>).value = coord_x;</span><br><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">'coord_y'</span>).value = coord_y;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
          <category> jQuery </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> 前端 </tag>
            
            <tag> jQuery </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JSON Schema 验证</title>
      <link href="/2020/02/13/2020-2-13-JSON-Schema-Validator/"/>
      <url>/2020/02/13/2020-2-13-JSON-Schema-Validator/</url>
      
        <content type="html"><![CDATA[<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"$schema"</span>: <span class="string">"http://json-schema.org/draft-06/schema#"</span>,  <span class="comment">//schema验证版本</span></span><br><span class="line">  <span class="attr">"title"</span>: <span class="string">"Cat"</span>,   <span class="comment">//json标题</span></span><br><span class="line">  <span class="attr">"properties"</span>: &#123;   <span class="comment">//数据包含属性</span></span><br><span class="line">    <span class="attr">"name"</span>: &#123;</span><br><span class="line">      <span class="attr">"type"</span>: <span class="string">"string"</span>, <span class="comment">//数据类型</span></span><br><span class="line">      <span class="attr">"minLength"</span>: <span class="number">8</span>,   <span class="comment">//数据长度最短范围</span></span><br><span class="line">      <span class="attr">"maxLength"</span>: <span class="number">10</span>   <span class="comment">//数据长度最长范围</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"age"</span>: &#123;</span><br><span class="line">      <span class="attr">"type"</span>: <span class="string">"number"</span>,</span><br><span class="line">      <span class="attr">"description"</span>: <span class="string">"your cat's age in years"</span>,</span><br><span class="line">      <span class="attr">"minimum"</span>: <span class="number">0</span>,    <span class="comment">//数据最小值</span></span><br><span class="line">      <span class="attr">"minimum"</span>: <span class="number">5</span>    <span class="comment">//数据最大值</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"declawed"</span>: &#123;</span><br><span class="line">      <span class="attr">"type"</span>: <span class="string">"boolean"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"description"</span>: &#123;</span><br><span class="line">      <span class="attr">"type"</span>: <span class="string">"string"</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"required"</span>: [  <span class="comment">//必须有的数据</span></span><br><span class="line">    <span class="string">"name"</span>,</span><br><span class="line">    <span class="string">"age"</span>,</span><br><span class="line">    <span class="string">"declawed"</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="https://jsonschemalint.com/" target="_blank" rel="noopener">json schema lint</a></p>]]></content>
      
      
      <categories>
          
          <category> JSON </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JSON </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JS中单双竖线运算符的使用</title>
      <link href="/2020/02/12/2020-2-12-JS-symbol-control/"/>
      <url>/2020/02/12/2020-2-12-JS-symbol-control/</url>
      
        <content type="html"><![CDATA[<ul><li><ol><li>Math.ceil()用作向上取整。</li></ol></li><li><ol start="2"><li>Math.floor()用作向下取整。</li></ol></li><li><ol start="3"><li>Math.round() 我们数学中常用到的四舍五入取整。</li></ol></li></ul><h5 id="1、单竖杠“-”运算"><a href="#1、单竖杠“-”运算" class="headerlink" title="1、单竖杠“|”运算"></a>1、单竖杠“|”运算</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="number">3</span>|<span class="number">4</span>); <span class="comment">//7</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">4</span>|<span class="number">4</span>);<span class="comment">//4</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">8</span>|<span class="number">3</span>);<span class="comment">//11</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">5.3</span>|<span class="number">4.1</span>);<span class="comment">//5</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">9</span>|<span class="number">3455</span>);<span class="comment">//3455</span></span><br></pre></td></tr></table></figure><blockquote><p>3|4<br>转换为二进制之后011|100  相加得到111=7</p></blockquote><blockquote><p>4|4<br>转换为二进制之后100 |100  相加得到100=4</p></blockquote><blockquote><p>8|3<br>转换为二进制之后1000 |011  相加得到1011=11</p></blockquote><blockquote><p>==单竖杠“|”运算就是转换为2进制之后相加得到的结果==</p></blockquote><h5 id="2、双竖杠“-”运算"><a href="#2、双竖杠“-”运算" class="headerlink" title="2、双竖杠“||”运算"></a>2、双竖杠“||”运算</h5><ul><li>1、JS双竖线运算符:是或比较.如null||’1’,返回’1’;’2’||’1’,返回’2’.即或运算符中,第一个为真,后面的就不用计算了.所以得’2’。</li><li>2、js 中 使用双竖线运算符”||”,返回第一个有效值</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> objOne = <span class="literal">undefined</span> || <span class="number">1</span> || <span class="literal">null</span> || <span class="keyword">new</span> <span class="built_in">Date</span>(); </span><br><span class="line"><span class="keyword">var</span> objTwo = <span class="keyword">new</span> <span class="built_in">Date</span>(); </span><br><span class="line"><span class="keyword">var</span> objThree = objOne || objTwo; </span><br><span class="line">alert(objThree.toString()); <span class="comment">//out put "1"</span></span><br></pre></td></tr></table></figure><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><h4 id="性能上的比较"><a href="#性能上的比较" class="headerlink" title="性能上的比较"></a>性能上的比较</h4><p>逻辑运算符&amp;&amp; || 中，如果&amp;&amp;的第一个运算数是false，就不再考虑第二个运算数，直接返回false；</p><p>如果||的第一个运算数是true，也不再考虑第二个运算数，直接返回true。</p><p>而&amp;和|运算符却不是这样的，它们总是要比较两个运算数才得出结果，因而性能上&amp;&amp;和||会比&amp;和|好。</p><h4 id="功能用法"><a href="#功能用法" class="headerlink" title="功能用法"></a>功能用法</h4><p>&amp;&amp;和||只能进行逻辑运算，而&amp;和|除了可以进行”逻辑运算”外，还可以进行位运算</p><h4 id="位运算"><a href="#位运算" class="headerlink" title="位运算"></a>位运算</h4><p>&amp;和|本是位运算符，之所以可以进行”逻辑运算”，是由于JS是无类型的语言、各数据类型可以自由转换这一特性决定的，当用&amp;和|进行”逻辑运算”时，实际上true被转换成1，false被转换成0，再进行逐位运算</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.write(<span class="literal">true</span> &amp; <span class="literal">false</span>); <span class="comment">//JS，结果为0</span></span><br></pre></td></tr></table></figure><p>上面这句，实例等同于逻辑运算被转化成下面的位运算，并执行：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.write(<span class="number">1</span> &amp; <span class="number">0</span>); <span class="comment">//JS，结果为0</span></span><br></pre></td></tr></table></figure><p>也正是由于&amp;和|是逐位运算符，才出现了第一点中所说的，它们总是要比较两个运算数才得出结果，才导致性能会比&amp;&amp;和||低一些。</p>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> 前端 </tag>
            
            <tag> Math </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JS控制全屏</title>
      <link href="/2020/02/11/2020-2-11-JS-fullscreen/"/>
      <url>/2020/02/11/2020-2-11-JS-fullscreen/</url>
      
        <content type="html"><![CDATA[<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"fullscreen_btn"</span> <span class="attr">class</span>=<span class="string">"btn-group"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">id</span>=<span class="string">"fullScreen"</span> <span class="attr">class</span>=<span class="string">"btn btn-link"</span> <span class="attr">onclick</span>=<span class="string">"fullscreen()"</span> &gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fa fa-expand fa-2x"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (!!<span class="built_in">window</span>.ActiveXObject || <span class="string">"ActiveXObject"</span> <span class="keyword">in</span> <span class="built_in">window</span>) &#123;</span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">'fullscreen_btn'</span>).style.display = <span class="string">'none'</span>;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">'fullscreen_btn'</span>).style.display = <span class="string">''</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">"fullscreenchange"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;  </span><br><span class="line">    fullscreenState.innerHTML = (<span class="built_in">document</span>.fullscreen) ? <span class="string">""</span> : <span class="string">"not "</span>;  </span><br><span class="line">&#125;, <span class="literal">false</span>);  </span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">"mozfullscreenchange"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;  </span><br><span class="line">    fullscreenState.innerHTML = (<span class="built_in">document</span>.mozFullScreen) ? <span class="string">""</span> : <span class="string">"not "</span>;  </span><br><span class="line">&#125;, <span class="literal">false</span>);  </span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">"webkitfullscreenchange"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;  </span><br><span class="line">    fullscreenState.innerHTML = (<span class="built_in">document</span>.webkitIsFullScreen) ? <span class="string">""</span> : <span class="string">"not "</span>;  </span><br><span class="line">&#125;, <span class="literal">false</span>);  </span><br><span class="line">  </span><br><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">"msfullscreenchange"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;  </span><br><span class="line">fullscreenState.innerHTML = (<span class="built_in">document</span>.msFullscreenElement) ? <span class="string">""</span> : <span class="string">"not "</span>;  </span><br><span class="line">&#125;, <span class="literal">false</span>); </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fullscreen</span>(<span class="params"></span>) </span>&#123;  </span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">document</span>.fullscreen || <span class="built_in">document</span>.mozFullScreen || <span class="built_in">document</span>.webkitIsFullScreen || <span class="built_in">document</span>.msFullscreenElement)&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">document</span>.exitFullscreen) &#123;  </span><br><span class="line">        <span class="built_in">document</span>.exitFullscreen();  </span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">document</span>.mozCancelFullScreen) &#123;  </span><br><span class="line">        <span class="built_in">document</span>.mozCancelFullScreen();  </span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">document</span>.webkitCancelFullScreen) &#123;  </span><br><span class="line">        <span class="built_in">document</span>.webkitCancelFullScreen();  </span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">document</span>.msExitFullscreen) &#123;  </span><br><span class="line">        <span class="built_in">document</span>.msExitFullscreen();  </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">document</span>.getElementById(<span class="string">'fullScreen'</span>).innerHTML = <span class="string">'&lt;i class="fa fa-expand fa-2x"&gt;&lt;/i&gt;'</span>;</span><br><span class="line">        <span class="built_in">document</span>.getElementById(<span class="string">'fullScreen'</span>).title = <span class="built_in">window</span>.parent.languageData.main_fullscreen;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> docElm = <span class="built_in">document</span>.documentElement;  </span><br><span class="line">    <span class="comment">//W3C   </span></span><br><span class="line">    <span class="keyword">if</span> (docElm.requestFullscreen) &#123;  </span><br><span class="line">    docElm.requestFullscreen();  </span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span> (docElm.mozRequestFullScreen) &#123;  </span><br><span class="line">    docElm.mozRequestFullScreen();  </span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span> (docElm.webkitRequestFullScreen) &#123;  </span><br><span class="line">    docElm.webkitRequestFullScreen();  </span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span> (elem.msRequestFullscreen) &#123;  </span><br><span class="line">    elem.msRequestFullscreen();  </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">'fullScreen'</span>).innerHTML = <span class="string">'&lt;i class="fa fa-compress fa-2x"&gt;&lt;/i&gt;'</span>;</span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">'fullScreen'</span>).title = <span class="built_in">window</span>.parent.languageData.main_exitfullscreen;</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> 前端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JS清除浏览器缓存的几种方法</title>
      <link href="/2020/02/10/2020-2-10-JS-cache-clean/"/>
      <url>/2020/02/10/2020-2-10-JS-cache-clean/</url>
      
        <content type="html"><![CDATA[<h2 id="一、CSS和JS为什么带参数（形如-css-t-与-js-t-）怎样获取代码"><a href="#一、CSS和JS为什么带参数（形如-css-t-与-js-t-）怎样获取代码" class="headerlink" title="一、CSS和JS为什么带参数（形如.css?t=与.js?t=）怎样获取代码"></a>一、CSS和JS为什么带参数（形如.css?t=与.js?t=）怎样获取代码</h2><p>css和js带参数（形如.css?t=与.js?t=）<br>使用参数有两种可能： </p><ul><li>第一、脚本并不存在，而是服务端动态生成的，因此带了个版本号，以示区别。 即上面代码对于文件来说 等价于 但浏览器会认为他是 该文件的某个版本！ </li><li>第二、客户端会缓存这些css或js文件，因此每次升级了js或css文件后，改变版本号，客户端浏览器就会重新下载新的js或css文件 ，刷性缓存的作用。 </li></ul><p>第二种情况最多，也可能两种同时存在。<br>版本号，可以是一个随机数，也可以是一个递增的值，大版本小版本的方式，或者根据脚本的生成时间书写，比如就是精确到了生成脚本的秒，而 2.3.3 就是大版本小版本的方式。</p><h2 id="二、关于浏览器缓存"><a href="#二、关于浏览器缓存" class="headerlink" title="二、关于浏览器缓存"></a>二、关于浏览器缓存</h2><p>浏览器缓存，有时候我们需要他，因为他可以提高网站性能和浏览器速度，提高网站性能。但是有时候我们又不得不清除缓存，因为缓存可能误事，出现一些错误的数据。像股票类网站实时更新等，这样的网站是不要缓存的，像有的网站很少更新，有缓存还是比较好的。</p><p>今天主要介绍清除缓存的几种方法。</p><ul><li>meta方法</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">META</span> <span class="attr">HTTP-EQUIV</span>=<span class="string">"pragma"</span> <span class="attr">CONTENT</span>=<span class="string">"no-cache"</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">META</span> <span class="attr">HTTP-EQUIV</span>=<span class="string">"Cache-Control"</span> <span class="attr">CONTENT</span>=<span class="string">"no-cache, must-revalidate"</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">META</span> <span class="attr">HTTP-EQUIV</span>=<span class="string">"expires"</span> <span class="attr">CONTENT</span>=<span class="string">"0"</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>清理form表单的临时缓存 </li></ul><ol><li>方式一：用ajax请求服务器最新文件，并加上请求头If-Modified-Since和Cache-Control,如下:</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$.ajax(&#123;</span><br><span class="line">     url:<span class="string">'www.haorooms.com'</span>,</span><br><span class="line">     dataType:<span class="string">'json'</span>,</span><br><span class="line">     data:&#123;&#125;,</span><br><span class="line">     beforeSend :<span class="function"><span class="keyword">function</span>(<span class="params">xmlHttp</span>)</span>&#123; </span><br><span class="line">        xmlHttp.setRequestHeader(<span class="string">"If-Modified-Since"</span>,<span class="string">"0"</span>); </span><br><span class="line">        xmlHttp.setRequestHeader(<span class="string">"Cache-Control"</span>,<span class="string">"no-cache"</span>);</span><br><span class="line">     &#125;,</span><br><span class="line">     success:<span class="function"><span class="keyword">function</span>(<span class="params">response</span>)</span>&#123;</span><br><span class="line">         <span class="comment">//操作</span></span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">async</span>:<span class="literal">false</span></span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><ol start="2"><li>方法二，直接用cache:false,</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$.ajax(&#123;</span><br><span class="line">     url:<span class="string">'www.haorooms.com'</span>,</span><br><span class="line">     dataType:<span class="string">'json'</span>,</span><br><span class="line">     data:&#123;&#125;,</span><br><span class="line">     cache:<span class="literal">false</span>, </span><br><span class="line">     ifModified :<span class="literal">true</span> ,</span><br><span class="line"></span><br><span class="line">     success:<span class="function"><span class="keyword">function</span>(<span class="params">response</span>)</span>&#123;</span><br><span class="line">         <span class="comment">//操作</span></span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">async</span>:<span class="literal">false</span></span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><ol start="3"><li>方法三：用随机数，随机数也是避免缓存的一种很不错的方法！</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">URL 参数后加上 <span class="string">"?ran="</span> + <span class="built_in">Math</span>.random(); <span class="comment">//当然这里参数 ran可以任意取了</span></span><br><span class="line"></span><br><span class="line">&lt;script&gt; </span><br><span class="line"><span class="built_in">document</span>.write(<span class="string">"&lt;s"</span>+<span class="string">"cript type='text/javascript' src='/js/test.js?"</span>+<span class="built_in">Math</span>.random()+<span class="string">"'&gt;&lt;/scr"</span>+<span class="string">"ipt&gt;"</span>); </span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">其他的类似，只需在地址后加上+Math.random() </span></span><br><span class="line"><span class="regexp">注意：因为Math.random() 只能在Javascript 下起作用，故只能通过Javascript的调用才可以</span></span><br></pre></td></tr></table></figure><ol start="4"><li>方法四：</li></ol><ul><li>用随机时间，和随机数一样。</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在 URL 参数后加上 <span class="string">"?timestamp="</span> + <span class="keyword">new</span> <span class="built_in">Date</span>().getTime();</span><br></pre></td></tr></table></figure><ul><li>用PHP后端清理</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在服务端加 header(<span class="string">"Cache-Control: no-cache, must-revalidate"</span>);等等(如php中)</span><br></pre></td></tr></table></figure><ol start="5"><li>方法五：<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.location.replace(<span class="string">"WebForm1.aspx"</span>);   </span><br><span class="line">参数就是你要覆盖的页面，replace的原理就是用当前页面替换掉replace参数指定的页面。   </span><br><span class="line">这样可以防止用户点击back键。使用的是javascript脚本，举例如下： </span><br><span class="line"></span><br><span class="line">a.html </span><br><span class="line">以下是引用片段： </span><br><span class="line"><span class="string">``</span><span class="string">`HTML</span></span><br><span class="line"><span class="string">&lt;html&gt; </span></span><br><span class="line"><span class="string">     &lt;head&gt; </span></span><br><span class="line"><span class="string">         &lt;title&gt;a&lt;/title&gt;      </span></span><br><span class="line"><span class="string">         &lt;script language="javascript"&gt; </span></span><br><span class="line"><span class="string">             function jump()&#123; </span></span><br><span class="line"><span class="string">                 window.location.replace("b.html"); </span></span><br><span class="line"><span class="string">             &#125; </span></span><br><span class="line"><span class="string">         &lt;/script&gt; </span></span><br><span class="line"><span class="string">     &lt;/head&gt; </span></span><br><span class="line"><span class="string">     &lt;body&gt; </span></span><br><span class="line"><span class="string">        &lt;a href="javascript:jump()"&gt;b&lt;/a&gt; </span></span><br><span class="line"><span class="string">    &lt;/body&gt; </span></span><br><span class="line"><span class="string">&lt;/html&gt;</span></span><br></pre></td></tr></table></figure>b.html<br>以下是引用片段： </li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span> </span><br><span class="line">     <span class="tag">&lt;<span class="name">head</span>&gt;</span> </span><br><span class="line">         <span class="tag">&lt;<span class="name">title</span>&gt;</span>b<span class="tag">&lt;/<span class="name">title</span>&gt;</span>      </span><br><span class="line">         <span class="tag">&lt;<span class="name">script</span> <span class="attr">language</span>=<span class="string">"javascript"</span>&gt;</span> </span><br><span class="line"><span class="actionscript">             <span class="function"><span class="keyword">function</span> <span class="title">jump</span><span class="params">()</span></span>&#123; </span></span><br><span class="line"><span class="javascript">                 <span class="built_in">window</span>.location.replace(<span class="string">"a.html"</span>); </span></span><br><span class="line">             &#125; </span><br><span class="line">         <span class="tag">&lt;/<span class="name">script</span>&gt;</span> </span><br><span class="line">     <span class="tag">&lt;/<span class="name">head</span>&gt;</span> </span><br><span class="line">     <span class="tag">&lt;<span class="name">body</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript:jump()"</span>&gt;</span>a<span class="tag">&lt;/<span class="name">a</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> 前端 </tag>
            
            <tag> 缓存 </tag>
            
            <tag> Cache </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JS自动判断设备, 浏览器等</title>
      <link href="/2020/02/09/2020-2-9-JS-check-device-type/"/>
      <url>/2020/02/09/2020-2-9-JS-check-device-type/</url>
      
        <content type="html"><![CDATA[<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ua = navigator.userAgent.toLowerCase();</span><br></pre></td></tr></table></figure><h2 id="区分移动设备"><a href="#区分移动设备" class="headerlink" title="区分移动设备"></a>区分移动设备</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="regexp">/android|adr/gi</span>.test(ua)) &#123;</span><br><span class="line">    <span class="comment">// 安卓</span></span><br><span class="line">     </span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="regexp">/\(i[^;]+;( U;)? CPU.+Mac OS X/gi</span>.test(ua))&#123;</span><br><span class="line">    <span class="comment">//苹果</span></span><br><span class="line">     </span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="regexp">/iPad/gi</span>.test(ua))&#123;</span><br><span class="line">    <span class="comment">//ipad</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="区分浏览器"><a href="#区分浏览器" class="headerlink" title="区分浏览器"></a>区分浏览器</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="regexp">/msie/i</span>.test(ua) &amp;&amp; !<span class="regexp">/opera/</span>.test(ua))&#123;  </span><br><span class="line">    alert(<span class="string">"IE"</span>);  </span><br><span class="line">    <span class="keyword">return</span> ;  </span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="regexp">/firefox/i</span>.test(ua))&#123;  </span><br><span class="line">    alert(<span class="string">"Firefox"</span>);  </span><br><span class="line">    <span class="keyword">return</span> ;  </span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="regexp">/chrome/i</span>.test(ua) &amp;&amp; <span class="regexp">/webkit/i</span>.test(ua) &amp;&amp; <span class="regexp">/mozilla/i</span>.test(ua))&#123;  </span><br><span class="line">    alert(<span class="string">"Chrome"</span>);  </span><br><span class="line">    <span class="keyword">return</span> ;  </span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="regexp">/opera/i</span>.test(ua))&#123;  </span><br><span class="line">    alert(<span class="string">"Opera"</span>);  </span><br><span class="line">    <span class="keyword">return</span> ;  </span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="regexp">/iPad/i</span>)&#123; </span><br><span class="line">    alert(<span class="string">"ipad"</span>); </span><br><span class="line">    <span class="keyword">return</span> ; </span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="regexp">/webkit/i</span>.test(ua) &amp;&amp;!(<span class="regexp">/chrome/i</span>.test(ua) &amp;&amp; <span class="regexp">/webkit/i</span>.test(ua) &amp;&amp; <span class="regexp">/mozilla/i</span>.test(ua)))&#123;  </span><br><span class="line">    alert(<span class="string">"Safari"</span>);  </span><br><span class="line">    <span class="keyword">return</span> ;  </span><br><span class="line">&#125;<span class="keyword">else</span>&#123;  </span><br><span class="line">    alert(<span class="string">"unKnow"</span>);  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="区分软件内置浏览器，比如新浪微博、腾讯QQ（非QQ浏览器）和微信"><a href="#区分软件内置浏览器，比如新浪微博、腾讯QQ（非QQ浏览器）和微信" class="headerlink" title="区分软件内置浏览器，比如新浪微博、腾讯QQ（非QQ浏览器）和微信"></a>区分软件内置浏览器，比如新浪微博、腾讯QQ（非QQ浏览器）和微信</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">if</span>(ua.match(<span class="regexp">/weibo/i</span>) == <span class="string">"weibo"</span>)&#123;  </span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(ua.indexOf(<span class="string">'qq/'</span>)!= <span class="number">-1</span>)&#123;  </span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">2</span>);</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(ua.match(<span class="regexp">/MicroMessenger/i</span>)==<span class="string">"micromessenger"</span>)&#123;  </span><br><span class="line"><span class="keyword">var</span> v_weixin = ua.split(<span class="string">'micromessenger'</span>)[<span class="number">1</span>];  </span><br><span class="line">    v_weixin = v_weixin.substring(<span class="number">1</span>,<span class="number">6</span>);  </span><br><span class="line">    v_weixin = v_weixin.split(<span class="string">' '</span>)[<span class="number">0</span>];  </span><br><span class="line"><span class="keyword">if</span>(v_weixin.split(<span class="string">'.'</span>).length == <span class="number">2</span>)&#123;  </span><br><span class="line">    v_weixin = v_weixin + <span class="string">'.0'</span>;  </span><br><span class="line">&#125;  </span><br><span class="line"><span class="keyword">if</span>(v_weixin &lt; <span class="string">'6.0.2'</span>)&#123;  </span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">3</span>);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;  </span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">4</span>);  </span><br><span class="line">&#125;  </span><br><span class="line">&#125;<span class="keyword">else</span>&#123;  </span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">0</span>); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> 前端 </tag>
            
            <tag> 设备类型 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>js选择文件夹路径(IE)</title>
      <link href="/2020/02/08/2020-2-8-JS-choose-folder-dir-in-IE/"/>
      <url>/2020/02/08/2020-2-8-JS-choose-folder-dir-in-IE/</url>
      
        <content type="html"><![CDATA[<p>语法：==strDir=Shell.BrowseForFolder(Hwnd,Title,Options,[RootFolder])==</p><hr><p>参数：</p><ul><li>Hwnd：包含对话框的窗体句柄（handle），一般设置为0</li><li>Title：将在对话框中显示的说明，为字符串</li><li>Options：使用对话框的特殊方式，为长整数，一般设置为0</li><li>RootFolder：（可选的），用来设置浏览的最顶层文件夹，缺省时为“桌面”，可以将其设置为一个路径或“特殊文件夹常数”</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;input id=<span class="string">"show"</span>&gt;</span><br><span class="line">&lt;button onclick=<span class="string">"clickBtn()"</span>&gt;点击&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">function click() &#123;</span></span><br><span class="line"><span class="regexp">    try &#123;</span></span><br><span class="line"><span class="regexp">        var Message = "\u8bf7\u9009\u62e9\u6587\u4ef6\u5939"; /</span><span class="regexp">/选择框提示信息</span></span><br><span class="line"><span class="regexp">        var Shell = new ActiveXObject("Shell.Application");</span></span><br><span class="line"><span class="regexp">        var FolderObj = Shell.BrowseForFolder(0, Message, 64, 17); /</span><span class="regexp">/起始目录为：我的电脑</span></span><br><span class="line"><span class="regexp">        /</span><span class="regexp">/var FolderObj = Shell.BrowseForFolder(0, Message, 0); /</span><span class="regexp">/起始目录为：桌面</span></span><br><span class="line"><span class="regexp">        var filePath;</span></span><br><span class="line"><span class="regexp">        if (Folder != null) &#123;</span></span><br><span class="line"><span class="regexp">            filePath = FolderObj.Items().Item().Path;</span></span><br><span class="line"><span class="regexp">            if (filePath.charAt(0) == ':') &#123;</span></span><br><span class="line"><span class="regexp">                alert('请选择文件夹.');</span></span><br><span class="line"><span class="regexp">                return;</span></span><br><span class="line"><span class="regexp">            &#125;</span></span><br><span class="line"><span class="regexp">            document.getElementById(path).value = filePath;</span></span><br><span class="line"><span class="regexp">        &#125;</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">    catch (e) &#123;</span></span><br><span class="line"><span class="regexp">        alert(e + '请设置IE，Internet选项－安全－自定义级别－将ActiveX控件和插件前3个选项设置为启用，然后再尝试。');</span></span><br><span class="line"><span class="regexp">        return;</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> 前端 </tag>
            
            <tag> IE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LivePhotosKit JS</title>
      <link href="/2020/02/07/2020-2-7-LivePhotosKit-JS/"/>
      <url>/2020/02/07/2020-2-7-LivePhotosKit-JS/</url>
      
        <content type="html"><![CDATA[<h2 id="Framework"><a href="#Framework" class="headerlink" title="Framework"></a>Framework</h2><h1 id="LivePhotosKit-JS"><a href="#LivePhotosKit-JS" class="headerlink" title="LivePhotosKit JS"></a>LivePhotosKit JS</h1><h3 id="Play-Live-Photos-on-the-web"><a href="#Play-Live-Photos-on-the-web" class="headerlink" title="Play Live Photos on the web."></a>Play Live Photos on the web.</h3><h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><p>Use the LivePhotosKit JS library to play Live Photos on your web pages.<br>The JavaScript API presents the player in the form of a DOM element, much like an image or video tag, which can be configured with photo and video resources and other options, and have its playback controlled either programmatically by the consuming developer, or via pre-provided controls by the browsing end-user.<br>Before You Begin</p><ol><li>Embed LivePhotosKit JS in your webpage.<br>Use the script tag and link to Apple’s hosted version of LivePhotosKit JS at <a href="https://cdn.apple-livephotoskit.com/lpk/1/livephotoskit.js" target="_blank" rel="noopener">https://cdn.apple-livephotoskit.com/lpk/1/livephotoskit.js</a>.<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.apple-livephotoskit.com/lpk/1/livephotoskit.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol><p>Note：<br>The LivePhotosKit JS version number is in the URL. For example, 1 specifies LivePhotosKit JS 1.0.0.</p><ol start="2"><li>Enable JavaScript strict mode.<br>To enable strict mode for an entire script, put ‘use strict before any other statements.<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Note</span><br><span class="line">LivePhotosKit JS is also available through NPM at https://www.npmjs.com/package/livephotoskit.</span><br><span class="line">The install command is:</span><br><span class="line">npm install --save livephotoskit</span><br></pre></td></tr></table></figure><h2 id="Declarative-HTML"><a href="#Declarative-HTML" class="headerlink" title="Declarative HTML"></a>Declarative HTML</h2>By including the LivePhotosKit JS script on your page, you can create players by simply adding declarative markup to your HTML. As the page loads, LivePhotosKit JS will determine what player instances are on the page and initialize them. You can use any HTML tag that supports child nodes.</li></ol><p>At minimum, each tag requires the data-live-photo attribute as well as a non-zero height and width. Doing this allows LivePhotosKit JS to find the DOM elements to be initialized as players.</p><p>Then you can specify the locations of the photo and video components by setting the data-photo-src and data-video-src attributes, respectively.</p><p>Optionally, you can use the following additional data attributes:<br>data-photo-time: The timestamp from the beginning of the provided video component, at which the still photo was captured.</p><ul><li>data-proactively-loads-video: Whether or not the Player will download the bytes at the provided data-video-src prior to the user or developer attempting to begin playback.</li><li>data-shows-native-controls: Whether or not the playback controls are enabled for the user.</li><li>Each DOM element assigned to be a Player will be decorated with a playback control.</li></ul><p><strong>Listing 3</strong>  Sample Code</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.apple-livephotoskit.com/lpk/1/livephotoskit.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span></span></span><br><span class="line"><span class="tag">            <span class="attr">data-live-photo</span></span></span><br><span class="line"><span class="tag">            <span class="attr">data-photo-src</span>=<span class="string">"https://..."</span></span></span><br><span class="line"><span class="tag">            <span class="attr">data-video-src</span>=<span class="string">"https://..."</span></span></span><br><span class="line"><span class="tag">            <span class="attr">style</span>=<span class="string">"width: 320px; height: 320px"</span>&gt;</span>            </span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="JavaScript-API"><a href="#JavaScript-API" class="headerlink" title="JavaScript API"></a>JavaScript API</h2><p>Create a new LivePhotosKit.Player by invoking it either as a wrapper around a pre-existing DOM element, or by calling it without an argument, which will create a new DOM element.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// A Player built from a new DIV:</span></span><br><span class="line"><span class="keyword">const</span> myNewPlayer = LivePhotosKit.Player();</span><br><span class="line"><span class="built_in">document</span>.body.appendChild(myNewPlayer);</span><br><span class="line"><span class="comment">// A Player built from a pre-existing element:</span></span><br><span class="line">LivePhotosKit.Player(<span class="built_in">document</span>.getElementById(<span class="string">'myExistingElement'</span>));</span><br></pre></td></tr></table></figure><p>After a Player is created, use the properties and methods to set it up and use it, just as you would with a native image or video element.<br>The player will emit these events:</p><ul><li><strong>&lt;a href=””canplay</strong> when the Player has obtained just enough video frames and is obtaining them quickly enough for smooth playback.</li><li><strong>error</strong> when loading of either the photo or video components of the Live Photo has failed.</li><li><strong>ended</strong> when playback of the Live Photo has completed.</li><li><strong>videoload</strong> when the video component of the Live Photo has finished loading.</li><li><strong>photoload</strong> when the photo component of the Live Photo has finished loading.<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Create the player using a pre-existing DOM element.</span></span><br><span class="line"><span class="keyword">const</span> player = LivePhotosKit.Player(<span class="built_in">document</span>.getElementById(<span class="string">'my-live-photo-target-element'</span>));</span><br><span class="line">player.photoSrc = <span class="string">'https://...'</span>;</span><br><span class="line">player.videoSrc = <span class="string">'https://...'</span>;</span><br><span class="line"><span class="comment">// Listen to events the player emits.</span></span><br><span class="line">player.addEventListener(<span class="string">'canplay'</span>, evt =&gt; <span class="built_in">console</span>.log(<span class="string">'player ready'</span>, evt));</span><br><span class="line">player.addEventListener(<span class="string">'error'</span>, evt =&gt; <span class="built_in">console</span>.log(<span class="string">'player load error'</span>, evt));</span><br><span class="line">player.addEventListener(<span class="string">'ended'</span>, evt =&gt; <span class="built_in">console</span>.log(<span class="string">'player finished playing through'</span>, evt));</span><br><span class="line"><span class="comment">// Use the playback controls.</span></span><br><span class="line">player.playbackStyle = LivePhotosKit.PlaybackStyle.HINT;</span><br><span class="line">player.playbackStyle = LivePhotosKit.PlaybackStyle.FULL;</span><br><span class="line">player.play();</span><br><span class="line">player.pause();</span><br><span class="line">player.toggle();</span><br><span class="line">player.stop();</span><br><span class="line"><span class="comment">// Seek the animation to one quarter through.</span></span><br><span class="line">player.currentTime = <span class="number">0.25</span> * player.duration;</span><br><span class="line"><span class="comment">// Seek the animation to 0.1 seconds into the Live Photo.</span></span><br><span class="line">player.currentTime = <span class="number">0.1</span>;</span><br></pre></td></tr></table></figure><h2 id="Error-Handling"><a href="#Error-Handling" class="headerlink" title="Error Handling"></a>Error Handling</h2>A Player will emit error events, if and when errors occur while attempting to load or play. If a Player does experience an error, it will also publish the error to its public property errors as a way to convey whether or not it is in an error state, and, if so, what the errors were.</li></ul><p>The error states can be seen here LivePhotosKit.Errors.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">player.addEventListener(<span class="string">'error'</span>, (ev) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> ev.detail.errorCode === <span class="string">'number'</span>) &#123;</span><br><span class="line">        <span class="keyword">switch</span> (ev.detail.errorCode) &#123;</span><br><span class="line">        <span class="keyword">case</span> LivePhotosKit.Errors.IMAGE_FAILED_TO_LOAD:</span><br><span class="line">            <span class="comment">// Do something</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> LivePhotosKit.Errors.VIDEO_FAILED_TO_LOAD:</span><br><span class="line">            <span class="comment">// Do something</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// Extract error.</span></span><br><span class="line">        <span class="built_in">console</span>.error(ev.detail.error);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="Browser-Compatibility"><a href="#Browser-Compatibility" class="headerlink" title="Browser Compatibility"></a>Browser Compatibility</h2><p>The LivePhotosKit JS player is supported on the following browsers:</p><ul><li>iOS: Safari, Chrome</li><li>macOS: Safari, Chrome, Firefox</li><li>Android: (performance depends on device) Chrome (beta)</li><li>Windows: Chrome, Firefox, Edge, Internet Explorer 11</li></ul><h2 id="How-to-obtain-Live-Photo-assets"><a href="#How-to-obtain-Live-Photo-assets" class="headerlink" title="How to obtain Live Photo assets"></a>How to obtain Live Photo assets</h2><p>Live Photos consist of two components: a still photo and a video of the moments just before and after the photo is taken. Using one of the following methods will let you obtain the still photo as a JPG and the video as a MOV file.</p><h4 id="Important"><a href="#Important" class="headerlink" title="Important"></a>Important</h4><ul><li>If the assets are large, they will take a long time to download. If the photo takes too long, it will not be able to show the progress badge. To avoid this problem, the element that is being decorated to be a player should explicitly specify its height and width. Downsizing assets will greatly improve performance and reduce bandwidth usage.</li></ul>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> 前端 </tag>
            
            <tag> LivePhoto </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LocalStorage &amp; SessionStorage</title>
      <link href="/2020/02/06/2020-2-6-LocalStorage-and-SessionStorage/"/>
      <url>/2020/02/06/2020-2-6-LocalStorage-and-SessionStorage/</url>
      
        <content type="html"><![CDATA[<h1 id="Storage"><a href="#Storage" class="headerlink" title="Storage"></a>Storage</h1><ul><li>作为 Web Storage API 的接口，Storage 提供了访问特定域名下的会话存储（session storage）或本地存储（local storage）的功能，例如，可以添加、修改或删除存储的数据项。</li><li>如果你想要操作一个域名的会话存储（session storage），可以使用 window.sessionStorage如果想要操作一个域名的本地存储（local storage），可以使用  window.localStorage。</li><li>sessionStorage和localStorage的用法是一样的，区别在于sessionStorage会在会话关闭也就是浏览器关闭时失效，而localStorage是将数据存储在本地，不受关闭浏览器影响，除非手动清除数据</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> <span class="title">IIFE</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!<span class="built_in">window</span>.localStorage)&#123;</span><br><span class="line">        alert(<span class="string">'your browser is not support localStorage!'</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">getStorage</span>(<span class="params">sname, defaultValue</span>)</span>&#123;</span><br><span class="line">        <span class="comment">//result = window.localStorage.sname</span></span><br><span class="line">        <span class="comment">//result = window.localStorage[sname]</span></span><br><span class="line">        <span class="keyword">var</span> result = <span class="built_in">window</span>.localStorage.getItem(sname);</span><br><span class="line">        <span class="keyword">return</span> result || defaultValue;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">setStorage</span>(<span class="params">sname, svalue</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">window</span>.localStorage.setItem(sname, svalue);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">removeItem</span>(<span class="params">sname</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">window</span>.localStorage.removeItem(sname);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">getKey</span>(<span class="params">keyIndex</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">window</span>.localStorage.key(keyIndex);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">getAllKeys</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> arr = [];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="built_in">window</span>.localStorage.length;i++)&#123;</span><br><span class="line">            arr.push(<span class="built_in">window</span>.localStorage.key(i));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> arr;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">clearStorage</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">window</span>.localStorage.clear();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">onStorageChange</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(event)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">window</span>.addEventListener(<span class="string">'storage'</span>, onStorageChange);</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">window</span>.Util = &#123;</span><br><span class="line">        getStorage: getStorage,</span><br><span class="line">        setStorage: setStorage,</span><br><span class="line">        removeItem: removeItem,</span><br><span class="line">        getKey: getKey,</span><br><span class="line">        getAllKeys: getAllKeys,</span><br><span class="line">        clearStorage: clearStorage,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> 前端 </tag>
            
            <tag> LocalStorage </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Meta name解释</title>
      <link href="/2020/02/05/2020-2-5-Meta-name/"/>
      <url>/2020/02/05/2020-2-5-Meta-name/</url>
      
        <content type="html"><![CDATA[<h1 id="meta-name解释"><a href="#meta-name解释" class="headerlink" title="meta name解释"></a>meta name解释</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width,initial-scale=1.0"</span>&gt;</span></span><br></pre></td></tr></table></figure><p><em>content属性值</em></p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">width</span>:可视区域的宽度，值可为数字或关键词<span class="selector-tag">device-width</span></span><br><span class="line"><span class="selector-tag">height</span>:同<span class="selector-tag">width</span></span><br><span class="line"><span class="selector-tag">intial-scale</span>:页面首次被显示是可视区域的缩放级别，取值1<span class="selector-class">.0</span>则页面按实际尺寸显示，无任何缩放</span><br><span class="line">maximum-scale=1.0, minimum-scale=1.0;可视区域的缩放级别，</span><br><span class="line"><span class="selector-tag">maximum-scale</span>用户可将页面放大的程序，1<span class="selector-class">.0</span>将禁止用户放大到实际尺寸之上。</span><br><span class="line"><span class="selector-tag">user-scalable</span>:是否可对页面进行缩放，<span class="selector-tag">no</span> 禁止缩放</span><br><span class="line">``` </span><br><span class="line">```<span class="selector-tag">HTML</span></span><br><span class="line">&lt;meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"&gt;</span><br></pre></td></tr></table></figure><p>Edge 模式告诉 IE 以最高级模式渲染文档，也就是任何 IE 版本都以当前版本所支持的最高级标准模式渲染，避免版本升级造成的影响。简单的说，就是什么版本 IE 就用什么版本的标准模式渲染</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge"</span>&gt;</span></span><br></pre></td></tr></table></figure><p>使用以下代码强制 IE 使用 Chrome Frame 渲染</p><pre><code class="HTML"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"chrome=1"</span>&gt;</span></code></pre><p>最佳的兼容模式方案，结合考虑以上两种：</p><pre><code class="HTML"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge,chrome=1"</span>&gt;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> HTML </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HTML </tag>
            
            <tag> Meta </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Meta大全</title>
      <link href="/2020/02/04/2020-2-4-Meta/"/>
      <url>/2020/02/04/2020-2-4-Meta/</url>
      
        <content type="html"><![CDATA[<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span> <span class="comment">&lt;!-- 使用 HTML5 doctype，不区分大小写 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"zh-cmn-Hans"</span>&gt;</span> <span class="comment">&lt;!-- 更加标准的 lang 属性写法 http://zhi.hu/XyIa --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 声明文档使用的字符编码 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">'utf-8'</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 优先使用 IE 最新版本和 Chrome --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge,chrome=1"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 页面描述 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"description"</span> <span class="attr">content</span>=<span class="string">"不超过150个字符"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 页面关键词 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"keywords"</span> <span class="attr">content</span>=<span class="string">""</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 网页作者 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"author"</span> <span class="attr">content</span>=<span class="string">"name, email@gmail.com"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 搜索引擎抓取 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"robots"</span> <span class="attr">content</span>=<span class="string">"index,follow"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 为移动设备添加 viewport --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"initial-scale=1, maximum-scale=3, minimum-scale=1, user-scalable=no"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- `width=device-width` 会导致 iPhone 5 添加到主屏后以 WebApp 全屏模式打开页面时出现黑边 http://bigc.at/ios-webapp-viewport-meta.orz --&gt;</span></span><br><span class="line"> </span><br><span class="line">    <span class="comment">&lt;!-- iOS 设备 begin --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"apple-mobile-web-app-title"</span> <span class="attr">content</span>=<span class="string">"标题"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 添加到主屏后的标题（iOS 6 新增） --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"apple-mobile-web-app-capable"</span> <span class="attr">content</span>=<span class="string">"yes"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 是否启用 WebApp 全屏模式，删除苹果默认的工具栏和菜单栏 --&gt;</span></span><br><span class="line"> </span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"apple-itunes-app"</span> <span class="attr">content</span>=<span class="string">"app-id=myAppStoreID, affiliate-data=myAffiliateData, app-argument=myURL"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 添加智能 App 广告条 Smart App Banner（iOS 6+ Safari） --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"apple-mobile-web-app-status-bar-style"</span> <span class="attr">content</span>=<span class="string">"black"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 设置苹果工具栏颜色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"format-detection"</span> <span class="attr">content</span>=<span class="string">"telphone=no, email=no"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 忽略页面中的数字识别为电话，忽略email识别 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 启用360浏览器的极速模式(webkit) --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"renderer"</span> <span class="attr">content</span>=<span class="string">"webkit"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 避免IE使用兼容模式 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 不让百度转码 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Cache-Control"</span> <span class="attr">content</span>=<span class="string">"no-siteapp"</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 针对手持设备优化，主要是针对一些老的不识别viewport的浏览器，比如黑莓 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"HandheldFriendly"</span> <span class="attr">content</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 微软的老式浏览器 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"MobileOptimized"</span> <span class="attr">content</span>=<span class="string">"320"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- uc强制竖屏 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"screen-orientation"</span> <span class="attr">content</span>=<span class="string">"portrait"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- QQ强制竖屏 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"x5-orientation"</span> <span class="attr">content</span>=<span class="string">"portrait"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- UC强制全屏 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"full-screen"</span> <span class="attr">content</span>=<span class="string">"yes"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- QQ强制全屏 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"x5-fullscreen"</span> <span class="attr">content</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- UC应用模式 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"browsermode"</span> <span class="attr">content</span>=<span class="string">"application"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- QQ应用模式 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"x5-page-mode"</span> <span class="attr">content</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- windows phone 点击无高光 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"msapplication-tap-highlight"</span> <span class="attr">content</span>=<span class="string">"no"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- iOS 图标 begin --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"apple-touch-icon-precomposed"</span> <span class="attr">href</span>=<span class="string">"/apple-touch-icon-57x57-precomposed.png"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- iPhone 和 iTouch，默认 57x57 像素，必须有 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"apple-touch-icon-precomposed"</span> <span class="attr">sizes</span>=<span class="string">"114x114"</span> <span class="attr">href</span>=<span class="string">"/apple-touch-icon-114x114-precomposed.png"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Retina iPhone 和 Retina iTouch，114x114 像素，可以没有，但推荐有 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"apple-touch-icon-precomposed"</span> <span class="attr">sizes</span>=<span class="string">"144x144"</span> <span class="attr">href</span>=<span class="string">"/apple-touch-icon-144x144-precomposed.png"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Retina iPad，144x144 像素，可以没有，但推荐有 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- iOS 图标 end --&gt;</span></span><br><span class="line"> </span><br><span class="line">    <span class="comment">&lt;!-- iOS 启动画面 begin --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"apple-touch-startup-image"</span> <span class="attr">sizes</span>=<span class="string">"768x1004"</span> <span class="attr">href</span>=<span class="string">"/splash-screen-768x1004.png"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- iPad 竖屏 768 x 1004（标准分辨率） --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"apple-touch-startup-image"</span> <span class="attr">sizes</span>=<span class="string">"1536x2008"</span> <span class="attr">href</span>=<span class="string">"/splash-screen-1536x2008.png"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- iPad 竖屏 1536x2008（Retina） --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"apple-touch-startup-image"</span> <span class="attr">sizes</span>=<span class="string">"1024x748"</span> <span class="attr">href</span>=<span class="string">"/Default-Portrait-1024x748.png"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- iPad 横屏 1024x748（标准分辨率） --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"apple-touch-startup-image"</span> <span class="attr">sizes</span>=<span class="string">"2048x1496"</span> <span class="attr">href</span>=<span class="string">"/splash-screen-2048x1496.png"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- iPad 横屏 2048x1496（Retina） --&gt;</span></span><br><span class="line"> </span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"apple-touch-startup-image"</span> <span class="attr">href</span>=<span class="string">"/splash-screen-320x480.png"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- iPhone/iPod Touch 竖屏 320x480 (标准分辨率) --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"apple-touch-startup-image"</span> <span class="attr">sizes</span>=<span class="string">"640x960"</span> <span class="attr">href</span>=<span class="string">"/splash-screen-640x960.png"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- iPhone/iPod Touch 竖屏 640x960 (Retina) --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"apple-touch-startup-image"</span> <span class="attr">sizes</span>=<span class="string">"640x1136"</span> <span class="attr">href</span>=<span class="string">"/splash-screen-640x1136.png"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- iPhone 5/iPod Touch 5 竖屏 640x1136 (Retina) --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- iOS 启动画面 end --&gt;</span></span><br><span class="line"> </span><br><span class="line">    <span class="comment">&lt;!-- iOS 设备 end --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"msapplication-TileColor"</span> <span class="attr">content</span>=<span class="string">"#000"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Windows 8 磁贴颜色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"msapplication-TileImage"</span> <span class="attr">content</span>=<span class="string">"icon.png"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Windows 8 磁贴图标 --&gt;</span></span><br><span class="line"> </span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"alternate"</span> <span class="attr">type</span>=<span class="string">"application/rss+xml"</span> <span class="attr">title</span>=<span class="string">"RSS"</span> <span class="attr">href</span>=<span class="string">"/rss.xml"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 添加 RSS 订阅 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"shortcut icon"</span> <span class="attr">type</span>=<span class="string">"image/ico"</span> <span class="attr">href</span>=<span class="string">"/favicon.ico"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 添加 favicon icon --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- sns 社交标签 begin --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 参考微博API --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">property</span>=<span class="string">"og:type"</span> <span class="attr">content</span>=<span class="string">"类型"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">property</span>=<span class="string">"og:url"</span> <span class="attr">content</span>=<span class="string">"URL地址"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">property</span>=<span class="string">"og:title"</span> <span class="attr">content</span>=<span class="string">"标题"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">property</span>=<span class="string">"og:image"</span> <span class="attr">content</span>=<span class="string">"图片"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">property</span>=<span class="string">"og:description"</span> <span class="attr">content</span>=<span class="string">"描述"</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- sns 社交标签 end --&gt;</span></span><br><span class="line"> </span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>标题<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> HTML </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HTML </tag>
            
            <tag> Meta </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mock简明文档</title>
      <link href="/2020/02/03/2020-2-3-Mock/"/>
      <url>/2020/02/03/2020-2-3-Mock/</url>
      
        <content type="html"><![CDATA[<h1 id="Mock简明文档"><a href="#Mock简明文档" class="headerlink" title="Mock简明文档"></a>Mock简明文档</h1><h2 id="Mock-mock"><a href="#Mock-mock" class="headerlink" title="Mock.mock()"></a>Mock.mock()</h2><ul><li>Mock.mock( requestUrl?, requestType?, template|function(options) )</li><li>Mock.mock( template )</li><li>Mock.mock( requestUrl, template )</li><li>Mock.mock( requestUrl, requestType, template )</li><li>Mock.mock( requestUrl, requestType, function(options) )</li></ul><blockquote><p>requestUrl: 要拦截的URL，字符串或正则表达式<br><br>requestType: 要拦截的请求类型，get/post/put/delete/options…<br><br>template: 数据模板<br><br>function(options)：生成响应数据的函数，options –&gt; { url, type, body }</p></blockquote><hr><h2 id="语法规范"><a href="#语法规范" class="headerlink" title="语法规范"></a>语法规范</h2><h3 id="数据模板定义"><a href="#数据模板定义" class="headerlink" title="数据模板定义"></a>数据模板定义</h3><blockquote><p>数据模板中每个属性由3部分组成： <strong>属性名|生成规则：属性值</strong></p></blockquote><ol><li>‘name|min-max’: value</li><li>‘name|count’: value</li><li>‘name|min-max.dmin-dmax’: value</li><li>‘name|min-max.dcount’: value</li><li>‘name|count.dmin-dmax’: value</li><li>‘name|count.dcout’: value</li><li>‘name|+step’: value</li></ol><p><em>属性值</em>中可以包含@占位符<br><em>属性值</em>还指定了最终值的初始值和类型</p><h4 id="1-属性值是字符串"><a href="#1-属性值是字符串" class="headerlink" title="1.属性值是字符串"></a>1.属性值是字符串</h4><ol><li>‘name|min-max’: string<blockquote><p>通过重复 string 生成一个字符串，重复次数大于等于 min，小于等于 max</p></blockquote></li><li>‘name|count’: string<blockquote><p>通过重复 string 生成一个字符串，重复次数等于 count</p></blockquote></li></ol><h4 id="2-属性值是数字"><a href="#2-属性值是数字" class="headerlink" title="2.属性值是数字"></a>2.属性值是数字</h4><ol><li>‘name|+1’: number<blockquote><p>属性值自动加 1，初始值为 number</p></blockquote></li><li>‘name|min-max’: number<blockquote><p>生成一个大于等于 min、小于等于 max 的整数，属性值 number 只是用来确定类型</p></blockquote></li><li>‘name|min-max.dmin-dmax’: number<blockquote><p>生成一个浮点数，整数部分大于等于 min、小于等于 max，小数部分保留 dmin 到 dmax 位</p></blockquote></li></ol><h4 id="3-属性值是布尔值"><a href="#3-属性值是布尔值" class="headerlink" title="3.属性值是布尔值"></a>3.属性值是布尔值</h4><ol><li>‘name|1’: boolean<blockquote><p>随机生成一个布尔值，值为 true 的概率是 1/2，值为 false 的概率同样是 1/2</p></blockquote></li><li>‘name|min-max’: value<blockquote><p>随机生成一个布尔值，值为 value 的概率是 min / (min + max)，值为 !value 的概率是 max / (min + max)</p></blockquote></li></ol><h4 id="4-属性值是对象"><a href="#4-属性值是对象" class="headerlink" title="4.属性值是对象"></a>4.属性值是对象</h4><ol><li>‘name|count’: object<blockquote><p>从属性值 object 中随机选取 count 个属性</p></blockquote></li><li>‘name|min-max’: object<blockquote><p>从属性值 object 中随机选取 min 到 max 个属性</p></blockquote></li></ol><h4 id="5-属性值是数组"><a href="#5-属性值是数组" class="headerlink" title="5.属性值是数组"></a>5.属性值是数组</h4><ol><li>‘name|1’: array<blockquote><p>从属性值 array 中随机选取 1 个元素，作为最终值</p></blockquote></li><li>‘name|+1’: array<blockquote><p>从属性值 array 中顺序选取 1 个元素，作为最终值</p></blockquote></li><li>‘name|min-max’: array<blockquote><p>通过重复属性值 array 生成一个新数组，重复次数大于等于 min，小于等于 max</p></blockquote></li><li>‘name|count’: array<blockquote><p>通过重复属性值 array 生成一个新数组，重复次数为 count</p></blockquote></li></ol><p>&nbsp;<br>&nbsp;</p><h4 id="6-属性值是函数"><a href="#6-属性值是函数" class="headerlink" title="6.属性值是函数"></a>6.属性值是函数</h4><ol><li>‘name’: function<blockquote><p>执行函数 function，取其返回值作为最终的属性值，函数的上下文为属性 ‘name’ 所在的对象</p></blockquote></li></ol><p>&nbsp;<br>&nbsp;</p><h4 id="7-属性值是正则表达式"><a href="#7-属性值是正则表达式" class="headerlink" title="7.属性值是正则表达式"></a>7.属性值是正则表达式</h4><ol><li>‘name’: regexp<blockquote><p>根据正则表达式 regexp 反向生成可以匹配它的字符串。用于生成自定义格式的字符串</p></blockquote></li></ol><p>&nbsp;<br>&nbsp;</p><h3 id="数据占位符定义"><a href="#数据占位符定义" class="headerlink" title="数据占位符定义"></a>数据占位符定义</h3><ol><li>用 @ 来标识其后的字符串是 占位符</li><li>占位符 引用的是 Mock.Random 中的方法</li><li>通过 Mock.Random.extend() 来扩展自定义占位符</li><li>占位符 也可以引用 数据模板 中的属性</li><li>占位符 会优先引用 数据模板 中的属性</li><li>占位符 支持 相对路径 和 绝对路径</li></ol><p>&nbsp;<br>&nbsp;</p><h2 id="Mock-setup"><a href="#Mock-setup" class="headerlink" title="Mock.setup()"></a>Mock.setup()</h2><blockquote><p>配置Ajax请求的行为，暂时支持的配置项有timeout</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Mock.setup(&#123;</span><br><span class="line">  timeout: <span class="number">500</span></span><br><span class="line">&#125;)</span><br><span class="line">Mock.setup(&#123;</span><br><span class="line">  timeout: <span class="string">'100-600'</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="Mock-Random"><a href="#Mock-Random" class="headerlink" title="Mock.Random"></a>Mock.Random</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Random = Mock.Random</span><br><span class="line">Random.email() <span class="comment">// =&gt; sd.sdf@oksd.com</span></span><br><span class="line">Mock.mock(<span class="string">'@email'</span>) <span class="comment">// =&gt; sd.sdf@oksd.com</span></span><br><span class="line">Mock.mock(&#123; <span class="attr">email</span>: <span class="string">'sd.sdf@oksd.com'</span> &#125;) <span class="comment">// =&gt; &#123; email: "sd.sdf@oksd.com" &#125;</span></span><br></pre></td></tr></table></figure><h3 id="Mock-Random提供的完整方法（占位符）"><a href="#Mock-Random提供的完整方法（占位符）" class="headerlink" title="Mock.Random提供的完整方法（占位符）:"></a>Mock.Random提供的完整方法（占位符）:</h3><table><thead><tr><th align="left">Type</th><th align="left">Method</th></tr></thead><tbody><tr><td align="left">Basic</td><td align="left">boolean, natural, integer, float, character, string, range, date, time, datetime, now</td></tr><tr><td align="left">Image</td><td align="left">image, dataImage</td></tr><tr><td align="left">Color</td><td align="left">color</td></tr><tr><td align="left">Text</td><td align="left">paragraph, sentence, word, title, cparagraph, csentence, cword, ctitle</td></tr><tr><td align="left">Name</td><td align="left">first, last, name, cfirst, clast, cname</td></tr><tr><td align="left">Web</td><td align="left">url, domain, email, ip, tld</td></tr><tr><td align="left">Address</td><td align="left">area(region, province, city(bool), county(bool), zip), region</td></tr><tr><td align="left">Helper</td><td align="left">capitalize(首字母大写), upper(大写), lower(小写), pick(从数组任取一个), shuffle(打乱数组元素顺序)</td></tr><tr><td align="left">Miscellaneous</td><td align="left">guid, id</td></tr></tbody></table><h4 id="Basic"><a href="#Basic" class="headerlink" title="Basic"></a>Basic</h4><ol><li>Random.boolean(min?, max?, current? )</li><li>Random.natural(min?, max? )</li><li>Random.integer(min?, max? )</li><li>Random.float( min?, max?, dmin?, dmax? )</li><li>Random.character( pool? ) // pool =&gt; lower/upper/number/symbol</li><li>Random.string( pool?, min?, max? ) // pool =&gt; lower/upper/number/symbol</li><li>Random.range( start?, stop, step? )</li></ol><h4 id="Color"><a href="#Color" class="headerlink" title="Color"></a>Color</h4><ol><li>Random.color() // =&gt; #3538B2</li><li>Random.hex() // =&gt; #3538B2</li><li>Random.rgb() // =&gt; rgb(242, 198, 121)</li><li>Random.rgba() // =&gt; rgba(242, 198, 121, 0.13)</li><li>Random.hsl() // =&gt; hsl(345, 82, 71)</li></ol><p>&nbsp;<br>&nbsp;</p><h4 id="Image"><a href="#Image" class="headerlink" title="Image"></a>Image</h4><h5 id="Random-image"><a href="#Random-image" class="headerlink" title="Random.image()"></a>Random.image()</h5><ol><li>Random.image()</li><li>Random.image( size )</li><li>Random.image( size, background )</li><li>Random.image( size, background, text )</li><li>Random.image( size, background, foreground, text )</li><li>Random.image( size, background, foreground, format, text )</li></ol><h5 id="Random-dataImage"><a href="#Random-dataImage" class="headerlink" title="Random.dataImage()"></a>Random.dataImage()</h5><ol><li>Random.dataImage()</li><li>Random.dataImage( size )</li><li>Random.dataImage( size, text )</li></ol><h4 id="Text"><a href="#Text" class="headerlink" title="Text"></a>Text</h4><ol><li>Random.paragraph( min?, max? )</li><li>Random.cparagraph( min?, max? )</li><li>Random.sentence( min?, max? )</li><li>Random.csentence( min?, max? )</li><li>Random.word( min?, max? )</li><li>Random.cword( pool?, min?, max? )</li><li>Random.title( min?, max? )</li><li>Random.ctitle( min?, max? )</li></ol><h4 id="Name"><a href="#Name" class="headerlink" title="Name"></a>Name</h4><ol><li>Random.first()</li><li>Random.last()</li><li>Random.name( middle? )</li><li>Random.cfirst()</li><li>Random.clast()</li><li>Random.cname()</li></ol><h4 id="Web"><a href="#Web" class="headerlink" title="Web"></a>Web</h4><ol><li>Random.url( protocol?, host? )</li><li>Random.protocol()</li><li>Random.domain() // 域名</li><li>Random.tld() // 顶级域名</li><li>Random.email( domain? )</li><li>Random.ip()</li></ol><h4 id="Address"><a href="#Address" class="headerlink" title="Address"></a>Address</h4><ol><li>Random.region()</li><li>Random.province()</li><li>Random.city( prefix? )</li><li>Random.county( prefix? )</li><li>Random.zip()</li></ol><p>&nbsp;<br>&nbsp;</p><h4 id="Helper"><a href="#Helper" class="headerlink" title="Helper"></a>Helper</h4><ol><li>Random.capitalize( word )</li><li>Random.upper( str )</li><li>Random.lower( str )</li><li>Random.pick( arr )</li><li>Random.shuffle( arr )</li></ol><h4 id="Miscellaneous"><a href="#Miscellaneous" class="headerlink" title="Miscellaneous"></a>Miscellaneous</h4><ol><li>Random.guid()</li><li>Random.id()</li><li>Random.increment( step? )</li></ol><h4 id="Date"><a href="#Date" class="headerlink" title="Date"></a>Date</h4><ol><li>Random.date( format? )</li></ol><table><thead><tr><th align="left">Format</th><th align="left">Description</th><th align="left">Example</th></tr></thead><tbody><tr><td align="left">yyyy</td><td align="left">A full numeric representation of a year, 4 digits</td><td align="left">1999 or 2003</td></tr><tr><td align="left">yy</td><td align="left">A two digit representation of a year</td><td align="left">99 or 03</td></tr><tr><td align="left">y</td><td align="left">A two digit representation of a year</td><td align="left">99 or 03</td></tr><tr><td align="left">MM</td><td align="left">Numeric representation of a month, with leading zeros</td><td align="left">01 to 12</td></tr><tr><td align="left">M</td><td align="left">Numeric representation of a month, without leading zeros</td><td align="left">1 to 12</td></tr><tr><td align="left">dd</td><td align="left">Day of the month, 2 digits with leading zeros</td><td align="left">01 to 31</td></tr><tr><td align="left">d</td><td align="left">Day of the month without leading zeros</td><td align="left">1 to 31</td></tr><tr><td align="left">HH</td><td align="left">24-hour format of an hour with leading zeros</td><td align="left">00 to 23</td></tr><tr><td align="left">H</td><td align="left">24-hour format of an hour without leading zeros</td><td align="left">0 to 23</td></tr><tr><td align="left">hh</td><td align="left">12-hour format of an hour without leading zeros</td><td align="left">01 to 12</td></tr><tr><td align="left">h</td><td align="left">12-hour format of an hour with leading zeros</td><td align="left">1 to 12</td></tr><tr><td align="left">mm</td><td align="left">Minutes, with leading zeros</td><td align="left">00 to 59</td></tr><tr><td align="left">m</td><td align="left">Minutes, without leading zeros</td><td align="left">0 to 59</td></tr><tr><td align="left">ss</td><td align="left">Seconds, with leading zeros</td><td align="left">00 to 59</td></tr><tr><td align="left">s</td><td align="left">Seconds, without leading zeros</td><td align="left">0 to 59</td></tr><tr><td align="left">SS</td><td align="left">Milliseconds, with leading zeros</td><td align="left">000 to 999</td></tr><tr><td align="left">S</td><td align="left">Milliseconds, without leading zeros</td><td align="left">0 to 999</td></tr><tr><td align="left">A</td><td align="left">Uppercase Ante meridiem and Post meridiem</td><td align="left">AM or PM</td></tr><tr><td align="left">a</td><td align="left">Lowercase Ante meridiem and Post meridiem</td><td align="left">am or pm</td></tr><tr><td align="left">T</td><td align="left">Milliseconds, since 1970-1-1 00:00:00 UTC</td><td align="left">759883437303</td></tr></tbody></table><p>&nbsp;<br>&nbsp;</p><ol start="2"><li>Random.time( format? )</li><li>Random.datetime( format? )</li><li>Random.now( unit?, format? ) // unit =&gt; year、month、week、day、hour、minute、second、week</li></ol><p>&nbsp;<br>&nbsp;</p><h3 id="扩展"><a href="#扩展" class="headerlink" title="扩展"></a>扩展</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Random.extend(&#123;</span><br><span class="line">  fruit () &#123;</span><br><span class="line">    <span class="keyword">const</span> fruit = [<span class="string">'apple'</span>, <span class="string">'peach'</span>, <span class="string">'lemon'</span>]</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.pick(fruit)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">Random.fruit() <span class="comment">// =&gt; 'peach'</span></span><br><span class="line">Mock.mock(<span class="string">'@fruit'</span>)  <span class="comment">// =&gt; 'lemon'</span></span><br><span class="line">Mock.mock(&#123;</span><br><span class="line">  fruit: <span class="string">'@fruit'</span> <span class="comment">// =&gt; 'peach'</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="Mock-valid"><a href="#Mock-valid" class="headerlink" title="Mock.valid()"></a>Mock.valid()</h3><h4 id="Mock-valid-template-data"><a href="#Mock-valid-template-data" class="headerlink" title="Mock.valid( template, data )"></a>Mock.valid( template, data )</h4><h3 id="Mock-toJSONSchema"><a href="#Mock-toJSONSchema" class="headerlink" title="Mock.toJSONSchema()"></a>Mock.toJSONSchema()</h3><h4 id="Mock-toJSONSchema-template"><a href="#Mock-toJSONSchema-template" class="headerlink" title="Mock.toJSONSchema( template )"></a>Mock.toJSONSchema( template )</h4>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
          <category> Mock </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> Mock </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ngnix HTTPS 配置</title>
      <link href="/2020/02/02/2020-2-2-Ngnix-HTTPS-config/"/>
      <url>/2020/02/02/2020-2-2-Ngnix-HTTPS-config/</url>
      
        <content type="html"><![CDATA[<h1 id="Ngnix-HTTPS-配置"><a href="#Ngnix-HTTPS-配置" class="headerlink" title="Ngnix HTTPS 配置"></a>Ngnix HTTPS 配置</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen       80;</span><br></pre></td></tr></table></figure><hr><h2 id=""><a href="#" class="headerlink" title="*"></a>*</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">listen       443 ssl;</span><br><span class="line">    server_name  andychao217.cn alias www.andychao217.cn;</span><br><span class="line">ssl_certificate      C:&#x2F;UPUPW_NP7.0&#x2F;Nginx&#x2F;conf&#x2F;ssl&#x2F;server.crt;</span><br><span class="line">    ssl_certificate_key  C:&#x2F;UPUPW_NP7.0&#x2F;Nginx&#x2F;conf&#x2F;ssl&#x2F;server.key;</span><br><span class="line">    ssl_session_timeout  5m;</span><br><span class="line">    ssl_protocols  SSLv2 SSLv3 TLSv1 TLSv1.1 TLSv1.2;</span><br><span class="line">    ssl_ciphers  HIGH:!aNULL:!MD5;</span><br><span class="line">    ssl_prefer_server_ciphers   on;</span><br><span class="line">    if ($scheme &#x3D; http) &#123;</span><br><span class="line">        return   301 https:&#x2F;&#x2F;$host$request_uri;</span><br><span class="line">    &#125;</span><br><span class="line"> &#96;&#96;&#96;    </span><br><span class="line">---</span><br></pre></td></tr></table></figure><pre><code>location / {    root   C:/UPUPW_NP7.0/vhosts/andychao217.cn;    index  index.html index.htm default.html default.htm index.php default.php app.php u.php;    include        C:/UPUPW_NP7.0/vhosts/andychao217.cn/up-*.conf;}autoindex off;include advanced_settings.conf;#include expires.conf;location ~* .*\/(attachment|attachments|uploadfiles|avatar)\/.*\.(php|PHP7|phps|asp|aspx|jsp)$ {    deny all;}location ~ ^.+\.php {    root           C:/UPUPW_NP7.0/vhosts/andychao217.cn;    fastcgi_pass   bakend;    fastcgi_index  index.php;    fastcgi_split_path_info ^((?U).+\.php)(/?.+)$;    fastcgi_param  PATH_INFO $fastcgi_path_info;    fastcgi_param  PATH_TRANSLATED $document_root$fastcgi_path_info;</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">## *</span><br></pre></td></tr></table></figure><pre><code>fastcgi_param  HTTPS  $https if_not_empty;</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">---</span><br></pre></td></tr></table></figure><pre><code>    include        fastcgi.conf;}</code></pre><p>}<br>#server andychao217.cn end}</p><pre><code></code></pre>]]></content>
      
      
      <categories>
          
          <category> Server </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Server </tag>
            
            <tag> 服务器 </tag>
            
            <tag> 配置 </tag>
            
            <tag> Config </tag>
            
            <tag> Ngnix </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Qt获取分辨率</title>
      <link href="/2020/02/01/2020-2-1-Qt-aquire-resolution/"/>
      <url>/2020/02/01/2020-2-1-Qt-aquire-resolution/</url>
      
        <content type="html"><![CDATA[<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">GLWidget::getScreenInfo</span><span class="params">()</span>  <span class="comment">//得到当前计算机的屏幕分辨率</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    QDesktopWidget* desktopWidget = QApplication::desktop();</span><br><span class="line">    QRect screenRect = desktopWidget-&gt;screenGeometry();</span><br><span class="line">    g_nActScreenW = screenRect.<span class="built_in">width</span>();</span><br><span class="line">    g_nActScreenH = screenRect.<span class="built_in">height</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//得到当前控件相对于屏幕的坐标</span></span><br><span class="line">widgetPos = ui-&gt;startDateTimeValue-&gt;mapToGlobal(ui-&gt;startDateTimeValue-&gt;pos());</span><br><span class="line">widgetW = widgetPos.x();</span><br><span class="line">widgetH = widgetPos.y();</span><br><span class="line"></span><br><span class="line"><span class="comment">//控件相对于软件窗口的坐标</span></span><br><span class="line">ui-&gt;startDateTimeValue-&gt;pos()</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> C++ </category>
          
          <category> Qt </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Qt </tag>
            
            <tag> C++ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Qt错误-LNK1181-无法打开输入文件</title>
      <link href="/2020/01/31/2020-1-31-Qt-error-LNK1181/"/>
      <url>/2020/01/31/2020-1-31-Qt-error-LNK1181/</url>
      
        <content type="html"><![CDATA[<h2 id="Qt错误-LNK1181-无法打开输入文件“debug-main-obj”"><a href="#Qt错误-LNK1181-无法打开输入文件“debug-main-obj”" class="headerlink" title="Qt错误:LNK1181:无法打开输入文件“debug\main.obj”"></a>Qt错误:LNK1181:无法打开输入文件“debug\main.obj”</h2><p>==error: LNK1181: cannot open input file ‘debug\main.obj’==</p><h3 id="5个解决方案"><a href="#5个解决方案" class="headerlink" title="5个解决方案"></a>5个解决方案</h3><hr><ol><li>如果项目的路径(任何文件夹的名称)包含空格，也会出现此问题</li></ol><hr><ol start="2"><li><ul><li>Okay, we finally have a real answer for this generalized problem instead of     the OP’s typo problem if that didn’t unblock you either.</li><li>好的，我们最终得到了这个广义问题的真正答案，而不是OP的排字问题，如果它也没有阻止你的话。</li><li>Actual Problem (black-box perspective): The “Build directory” auto-filled entry breaks for projects inside whitespace directories. Qt Creator actually prohibits you and tells you not to use whitespace when making new Projects. You can still close a new project and re-name it to add whitespace, and Qt Creator will handle it gracefully. If you copy the build directory, even with whitespace in it, and paste that into the field replacing the broken auto-generated path (mine was using relative paths) then JOM will start working correctly, as QMake does not generate any errors. I can’t speak for other Make tools.</li><li>实际问题(黑盒透视图):“构建目录”自动填充空格目录中的项目的条目中断。Qt创建者实际上禁止您，并告诉您在创建新项目时不要使用空格。您仍然可以关闭一个新项目并重新命名它以添加空格，Qt创建者将优雅地处理它。如果您复制构建目录(即使其中有空格)，并将其粘贴到字段中，以替换损坏的自动生成路径(我使用的是相对路径)，那么JOM将开始正常工作，因为QMake不会生成任何错误。我不能代表其他制造工具。</li><li>Make or clone down your project with whitespace</li><li>用空格将项目复制或复制。</li><li>Load it in Qt Creator</li><li>载入Qt创建者。</li><li>Run QMAKE</li><li>运行QMAKE</li><li>Select the “Project” button on the left-hand side</li><li>选择左边的“项目”按钮</li><li>Make sure you’re in the “Build” tab</li><li>确保你在“构建”选项卡中</li><li>Select “Browse”, and then re-select the shadow directory QMAKE made</li><li>选择“浏览”，然后重新选择创建的影子目录QMAKE</li><li>That should unblock you if it wasn’t a simple issue for deleting the old QMAKE-generated folders, which is the most common problem people face with this specific error while developing within Qt Creator.</li><li>如果删除旧的qmake生成的文件夹不是一个简单的问题，那么应该会解除您的阻塞，这是在Qt Creator中开发时遇到的最常见的问题。</li></ul></li></ol><hr><ol start="3"><li><ul><li><p>The problem has been solved.</p></li><li><p>问题已经解决了。</p></li><li><p>The problem was, when create a new project (GUI or Console), all source files that belong to this new project take a wrong extension ex:main.cp, but the correct extension is supposed to be ex:main.cpp. And when change all the source files extension from .cp to .cpp worked fine.</p></li><li><p>问题是，当创建一个新项目(GUI或控制台)时，属于这个新项目的所有源文件都采用了错误的扩展名:main。但是正确的扩展应该是ex:main.cpp。当将所有源文件扩展名从.cp更改为.cpp时，效果很好。</p></li><li><p>Or change the default source file extension from [Tools -&gt; Option -&gt; C++].</p><p>  <img src="https://i.stack.imgur.com/wQTzo.jpg" alt="enter image description here"></p></li><li><p>或者从[Tools -&gt;选项-&gt; c++]中更改默认的源文件扩展名。</p></li></ul></li></ol><hr><ol start="4"><li><ul><li>hmm If I remember correctly when I faced this kind of problems using your        similar setup (QtCreator and Windows) running QMAKE &amp; rebuilding the project       again helped me solve this linker errors.</li><li>嗯，如果我没记错的话，当我使用类似的设置(QtCreator和Windows)运行QMAKE和重新构建项目时，我再次帮助我解决了链接器错误。</li></ul></li></ol><hr><ol start="5"><li><ul><li>Run Clean and qMake and rebuild. I has like this problem and this helped me.</li><li>运行干净，qMake和重建。我喜欢这个问题，这对我有帮助。</li></ul></li></ol>]]></content>
      
      
      <categories>
          
          <category> Qt </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Qt </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Toastr options</title>
      <link href="/2020/01/30/2020-1-30-Toastr-options/"/>
      <url>/2020/01/30/2020-1-30-Toastr-options/</url>
      
        <content type="html"><![CDATA[<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">toastr.options = &#123;</span><br><span class="line"><span class="string">"closeButton"</span>: <span class="literal">true</span>,</span><br><span class="line"><span class="string">"debug"</span>: <span class="literal">false</span>,</span><br><span class="line"><span class="string">"newestOnTop"</span>: <span class="literal">true</span>,</span><br><span class="line"><span class="string">"progressBar"</span>: <span class="literal">false</span>,</span><br><span class="line"><span class="string">"rtl"</span>: <span class="literal">false</span>,</span><br><span class="line"><span class="string">"positionClass"</span>: <span class="string">"toast-top-center"</span>,</span><br><span class="line"><span class="string">"preventDuplicates"</span>: <span class="literal">true</span>,</span><br><span class="line"><span class="string">"onclick"</span>: <span class="literal">null</span>,</span><br><span class="line"><span class="string">"showDuration"</span>: <span class="number">100</span>,</span><br><span class="line"><span class="string">"hideDuration"</span>: <span class="number">500</span>,</span><br><span class="line"><span class="string">"timeOut"</span>: <span class="number">2000</span>,</span><br><span class="line"><span class="string">"extendedTimeOut"</span>: <span class="number">800</span>,</span><br><span class="line"><span class="string">"showEasing"</span>: <span class="string">"swing"</span>,</span><br><span class="line"><span class="string">"hideEasing"</span>: <span class="string">"linear"</span>,</span><br><span class="line"><span class="string">"showMethod"</span>: <span class="string">"fadeIn"</span>,</span><br><span class="line"><span class="string">"hideMethod"</span>: <span class="string">"fadeOut"</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> 前端 </tag>
            
            <tag> Toastr </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Utils.js</title>
      <link href="/2020/01/29/2020-1-29-Utils-js/"/>
      <url>/2020/01/29/2020-1-29-Utils-js/</url>
      
        <content type="html"><![CDATA[<h1 id="createRequest"><a href="#createRequest" class="headerlink" title="createRequest"></a>createRequest</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createRequest</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">        request = <span class="keyword">new</span> XMLHttpRequest();  <span class="comment">//Chrome, Firefox, Safari..</span></span><br><span class="line">    &#125; <span class="keyword">catch</span> (tryMS)&#123;                     <span class="comment">//IE</span></span><br><span class="line">       <span class="keyword">try</span>&#123;</span><br><span class="line">           request = <span class="keyword">new</span> ActiveXObject(<span class="string">"Msxm12.XMLHTTP"</span>);</span><br><span class="line">       &#125; <span class="keyword">catch</span> (otherMS)&#123;</span><br><span class="line">           <span class="keyword">try</span>&#123;</span><br><span class="line">               request = <span class="keyword">new</span> ActiveXObject(<span class="string">"Microsoft.XMLHTTP"</span>);</span><br><span class="line">           &#125; <span class="keyword">catch</span> (failed)&#123;</span><br><span class="line">               request = <span class="literal">null</span>;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">    &#125; </span><br><span class="line">        </span><br><span class="line">    <span class="keyword">return</span> request;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="addEventHandler"><a href="#addEventHandler" class="headerlink" title="addEventHandler"></a>addEventHandler</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addEventHandler</span>(<span class="params">obj, eventName, handler</span>)</span>&#123;</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">document</span>.attachEvent)&#123;                     <span class="comment">//IE</span></span><br><span class="line">obj.attachEvent(on+eventName, handler);</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">document</span>.addEventListener)&#123;          <span class="comment">//Chrome, Firefox, Safari..</span></span><br><span class="line">obj.addEventListener(eventName, handler, <span class="literal">false</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="getActivatedObject"><a href="#getActivatedObject" class="headerlink" title="getActivatedObject"></a>getActivatedObject</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getActivatedObject</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line"><span class="keyword">var</span> obj;</span><br><span class="line"><span class="keyword">if</span>(!e)&#123;</span><br><span class="line"><span class="comment">//early version of IE</span></span><br><span class="line">obj = <span class="built_in">window</span>.event.srcElement;</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(e.srcElement)&#123;</span><br><span class="line"><span class="comment">//IE 7 or later</span></span><br><span class="line">obj = e.srcElement;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="comment">//Firefox, Chrome, Opera, Safari, Edge</span></span><br><span class="line">obj = e.target;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> obj;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> 前端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue修饰符大全</title>
      <link href="/2020/01/28/2020-1-28-Vue-shortcuts/"/>
      <url>/2020/01/28/2020-1-28-Vue-shortcuts/</url>
      
        <content type="html"><![CDATA[<h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h2><ul><li>表单修饰符</li><li>事件修饰符</li><li>鼠标按键修饰符</li><li>键值修饰符</li><li>v-bind修饰符</li></ul><h2 id="表单修饰符"><a href="#表单修饰符" class="headerlink" title="表单修饰符"></a>表单修饰符</h2><p>填写表单，最常用的是什么？input！v-model~而我们的修饰符正是为了简化这些东西而存在的</p><h3 id="lazy"><a href="#lazy" class="headerlink" title=".lazy"></a>.lazy</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">v-model</span>=<span class="string">"value"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;value&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://user-gold-cdn.xitu.io/2019/2/9/168d0f6f9dfa057e?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="image"></p><p>从这里我们可以看到，我们还在输入的时候，光标还在的时候，下面的值就已经出来了，可以说是非常地实时。但是有时候我们希望，在我们输入完所有东西，光标离开才更新视图。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">v-model.lazy</span>=<span class="string">"value"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;value&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>这样即可~这样只有当我们光标离开输入框的时候，它才会更新视图，相当于在onchange事件触发更新。</p><h3 id="trim"><a href="#trim" class="headerlink" title=".trim"></a>.trim</h3><p>在我们的输入框中，我们经常需要过滤一下一些输入完密码不小心多敲了一下空格的兄弟输入的内容。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">v-model.trim</span>=<span class="string">"value"</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://user-gold-cdn.xitu.io/2019/2/9/168d0f6fc16d4e60?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="image"></p><p>为了让你更清楚的看到，我改了一下样式，不过问题不大，相信你已经清楚看到这个大大的hello左右两边没有空格，尽管你在input框里敲烂了空格键。<br>需要注意的是，它只能过滤首尾的空格！首尾，中间的是不会过滤的</p><h3 id="number"><a href="#number" class="headerlink" title=".number"></a>.number</h3><p>看这个名字就知道，应该是限制输入数字或者输入的东西转换成数字，but不是辣么赶单。</p><p><img src="https://user-gold-cdn.xitu.io/2019/2/9/168d0f6fadf87647?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="clipboard.png"></p><p><img src="https://user-gold-cdn.xitu.io/2019/2/9/168d0f6faea45fe7?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="clipboard.png"></p><p>如果你先输入数字，那它就会限制你输入的只能是数字。如果你先输入字符串，那它就相当于没有加.number</p><h2 id="事件修饰符"><a href="#事件修饰符" class="headerlink" title="事件修饰符"></a>事件修饰符</h2><h3 id="stop"><a href="#stop" class="headerlink" title=".stop"></a>.stop</h3><p>由于事件冒泡的机制，我们给元素绑定点击事件的时候，也会触发父级的点击事件。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> @<span class="attr">click</span>=<span class="string">"shout(2)"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"shout(1)"</span>&gt;</span>ok<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">shout(e)&#123;</span><br><span class="line">    console.log(e)</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;1</span><br><span class="line">&#x2F;&#x2F;2</span><br></pre></td></tr></table></figure><p>一键阻止事件冒泡，简直方便得不行。相当于调用了event.stopPropagation()方法。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> @<span class="attr">click</span>=<span class="string">"shout(2)"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click.stop</span>=<span class="string">"shout(1)"</span>&gt;</span>ok<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">//只输出1</span><br></pre></td></tr></table></figure><h3 id="prevent"><a href="#prevent" class="headerlink" title=".prevent"></a>.prevent</h3><p>用于阻止事件的默认行为，例如，当点击提交按钮时阻止对表单的提交。相当于调用了event.preventDefault()方法。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 提交事件不再重载页面 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">v-on:submit.prevent</span>=<span class="string">"onSubmit"</span>&gt;</span><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>注意：修饰符可以同时使用多个,但是可能会因为顺序而有所不同。<br>用 v-on:click.prevent.self 会阻止所有的点击，而 v-on:click.self.prevent 只会阻止对元素自身的点击。<br>也就是从左往右判断~</strong></p><h3 id="self"><a href="#self" class="headerlink" title=".self"></a>.self</h3><p>只当事件是从事件绑定的元素本身触发时才触发回调。像下面所示，刚刚我们从.stop时候知道子元素会冒泡到父元素导致触发父元素的点击事件，当我们加了这个.self以后，我们点击button不会触发父元素的点击事件shout，只有当点击到父元素的时候（蓝色背景）才会shout~从这个self的英文翻译过来就是‘自己，本身’可以看出这个修饰符的用法</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"blue"</span> @<span class="attr">click.self</span>=<span class="string">"shout(2)"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"shout(1)"</span>&gt;</span>ok<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://user-gold-cdn.xitu.io/2019/2/9/168d0f706c68a036?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="clipboard.png"></p><h3 id="once"><a href="#once" class="headerlink" title=".once"></a>.once</h3><p>这个修饰符的用法也是和名字一样简单粗暴，只能用一次，绑定了事件以后只能触发一次，第二次就不会触发。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//键盘按坏都只能shout一次</span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click.once</span>=<span class="string">"shout(1)"</span>&gt;</span>ok<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="capture"><a href="#capture" class="headerlink" title=".capture"></a>.capture</h3><p>从上面我们知道了事件的冒泡，其实完整的事件机制是：捕获阶段–目标阶段–冒泡阶段。<br>默认的呢，是事件触发是从目标开始往上冒泡。<br>当我们加了这个.capture以后呢，我们就反过来了，事件触发从包含这个元素的顶层开始往下触发。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> @<span class="attr">click.capture</span>=<span class="string">"shout(1)"</span>&gt;</span></span><br><span class="line">    obj1</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> @<span class="attr">click.capture</span>=<span class="string">"shout(2)"</span>&gt;</span></span><br><span class="line">        obj2</span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> @<span class="attr">click</span>=<span class="string">"shout(3)"</span>&gt;</span></span><br><span class="line">            obj3</span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> @<span class="attr">click</span>=<span class="string">"shout(4)"</span>&gt;</span></span><br><span class="line">                obj4</span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">// 1 2 4 3</span><br></pre></td></tr></table></figure><p>从上面这个例子我们点击obj4的时候，就可以清楚地看出区别，obj1，obj2在捕获阶段就触发了事件，因此是先1后2，后面的obj3，obj4是默认的冒泡阶段触发，因此是先4然后冒泡到3~</p><h3 id="passive"><a href="#passive" class="headerlink" title=".passive"></a>.passive</h3><p>当我们在监听元素滚动事件的时候，会一直触发onscroll事件，在pc端是没啥问题的，但是在移动端，会让我们的网页变卡，因此我们使用这个修饰符的时候，相当于给onscroll事件整了一个.lazy修饰符</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 滚动事件的默认行为 (即滚动行为) 将会立即触发 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 而不会等待 `onScroll` 完成  --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 这其中包含 `event.preventDefault()` 的情况 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-on:scroll.passive</span>=<span class="string">"onScroll"</span>&gt;</span>...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="native"><a href="#native" class="headerlink" title=".native"></a>.native</h3><p>我们经常会写很多的小组件，有些小组件可能会绑定一些事件，但是，像下面这样绑定事件是不会触发的</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">My-component</span> @<span class="attr">click</span>=<span class="string">"shout(3)"</span>&gt;</span><span class="tag">&lt;/<span class="name">My-component</span>&gt;</span></span><br></pre></td></tr></table></figure><p>必须使用.native来修饰这个click事件（即&lt;My-component @click.native=”shout(3)”&gt;</My-component>），可以理解为该修饰符的作用就是把一个vue组件转化为一个普通的HTML标签，<br>注意：<strong>使用.native修饰符来操作普通HTML标签是会令事件失效的</strong></p><h2 id="鼠标按钮修饰符"><a href="#鼠标按钮修饰符" class="headerlink" title="鼠标按钮修饰符"></a>鼠标按钮修饰符</h2><p>刚刚我们讲到这个click事件，我们一般是会用左键触发，有时候我们需要更改右键菜单啥的，就需要用到右键点击或者中间键点击，这个时候就要用到鼠标按钮修饰符</p><ul><li>.left 左键点击</li><li>.right 右键点击</li><li>.middle 中键点击</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click.right</span>=<span class="string">"shout(1)"</span>&gt;</span>ok<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="键值修饰符"><a href="#键值修饰符" class="headerlink" title="键值修饰符"></a>键值修饰符</h2><p>其实这个也算是事件修饰符的一种，因为它都是用来修饰键盘事件的。比如onkeyup，onkeydown啊</p><h3 id="keyCode"><a href="#keyCode" class="headerlink" title=".keyCode"></a>.keyCode</h3><p>如果不用keyCode修饰符，那我们每次按下键盘都会触发shout，当我们想指定按下某一个键才触发这个shout的时候，这个修饰符就有用了，具体键码查看键码对应表</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> @<span class="attr">keyup.keyCode</span>=<span class="string">"shout(4)"</span>&gt;</span></span><br></pre></td></tr></table></figure><p>为了方便我们使用，vue给一些常用的键提供了别名</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//普通键</span></span><br><span class="line">.enter </span><br><span class="line">.tab</span><br><span class="line">.delete <span class="comment">//(捕获“删除”和“退格”键)</span></span><br><span class="line">.space</span><br><span class="line">.esc</span><br><span class="line">.up</span><br><span class="line">.down</span><br><span class="line">.left</span><br><span class="line">.right</span><br><span class="line"></span><br><span class="line"><span class="comment">//系统修饰键</span></span><br><span class="line">.ctrl</span><br><span class="line">.alt</span><br><span class="line">.meta</span><br><span class="line">.shift</span><br></pre></td></tr></table></figure><p>可以通过全局 config.keyCodes 对象自定义按键修饰符别名：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 可以使用 `v-on:keyup.f1`</span></span><br><span class="line">Vue.config.keyCodes.f1 = <span class="number">112</span></span><br></pre></td></tr></table></figure><p>我们从上面看到，键分成了普通常用的键和系统修饰键，区别是什么呢？<br>当我们写如下代码的时候,我们会发现如果仅仅使用系统修饰键是无法触发keyup事件的。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> @<span class="attr">keyup.ctrl</span>=<span class="string">"shout(4)"</span>&gt;</span></span><br></pre></td></tr></table></figure><p>那该如何呢？我们需要将系统修饰键和其他键码链接起来使用，比如</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> @<span class="attr">keyup.ctrl.67</span>=<span class="string">"shout(4)"</span>&gt;</span></span><br></pre></td></tr></table></figure><p>这样当我们同时按下ctrl+c时，就会触发keyup事件。另，如果是鼠标事件，那就可以单独使用系统修饰符。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">mouseover.ctrl</span>=<span class="string">"shout(1)"</span>&gt;</span>ok<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">mousedown.ctrl</span>=<span class="string">"shout(1)"</span>&gt;</span>ok<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click.ctrl.67</span>=<span class="string">"shout(1)"</span>&gt;</span>ok<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><p>大概是什么意思呢，就是你不能单手指使用系统修饰键的修饰符（最少两个手指，可以多个）。你可以一个手指按住系统修饰键一个手指按住另外一个键来实现键盘事件。也可以用一个手指按住系统修饰键，另一只手按住鼠标来实现鼠标事件。</p><h3 id="exact-2-5新增"><a href="#exact-2-5新增" class="headerlink" title=".exact (2.5新增)"></a>.exact (2.5新增)</h3><p>我们上面说了这个系统修饰键，当我们像这样&lt;button type=”text” @click.ctrl=”shout(4)”&gt;</button>绑定了click键按下的事件，惊奇的是，我们同时按下几个系统修饰键，比如ctrl shift点击，也能触发，可能有些场景我们只需要或者只能按一个系统修饰键来触发（像制作一些快捷键的时候），而当我们按下ctrl和其他键的时候则无法触发。那就这样写。<br>注意：这个只是限制系统修饰键的，像下面这样书写以后你还是可以按下ctrl + c，ctrl+v或者ctrl+普通键 来触发，但是不能按下ctrl + shift +普通键来触发。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"text"</span> @<span class="attr">click.ctrl.exact</span>=<span class="string">"shout(4)"</span>&gt;</span>ok<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><p>然后下面这个你可以同时按下enter+普通键来触发，但是不能按下系统修饰键+enter来触发。相信你已经能听懂了</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> @<span class="attr">keydown.enter.exact</span>=<span class="string">"shout('我被触发了')"</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="v-bind修饰符"><a href="#v-bind修饰符" class="headerlink" title="v-bind修饰符"></a>v-bind修饰符</h2><h3 id="sync-2-3-0-新增"><a href="#sync-2-3-0-新增" class="headerlink" title=".sync(2.3.0+ 新增)"></a>.sync(2.3.0+ 新增)</h3><p>在有些情况下，我们可能需要对一个 prop 进行“双向绑定”。不幸的是，真正的双向绑定会带来维护上的问题，因为子组件可以修改父组件，且在父组件和子组件都没有明显的改动来源。我们通常的做法是</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//父亲组件</span></span><br><span class="line">&lt;comp :myMessage=<span class="string">"bar"</span> @update:myMessage=<span class="string">"func"</span>&gt;&lt;<span class="regexp">/comp&gt;</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/js</span></span><br><span class="line"><span class="regexp">func(e)&#123;</span></span><br><span class="line"><span class="regexp"> this.bar = e;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/子组件js</span></span><br><span class="line"><span class="regexp">func2()&#123;</span></span><br><span class="line"><span class="regexp">  this.$emit('update:myMessage',params);</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><p>现在这个.sync修饰符就是简化了上面的步骤</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//父组件</span></span><br><span class="line">&lt;comp :myMessage.sync=<span class="string">"bar"</span>&gt;&lt;<span class="regexp">/comp&gt; </span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/子组件</span></span><br><span class="line"><span class="regexp">this.$emit('update:myMessage',params);</span></span><br></pre></td></tr></table></figure><p>这样确实会方便很多，但是也有很多需要注意的点</p><ol><li>使用sync的时候，子组件传递的事件名必须为update:value，其中value必须与子组件中props中声明的名称完全一致(如上例中的myMessage，不能使用my-message)</li><li>注意带有 .sync 修饰符的 v-bind 不能和表达式一起使用 (例如 v-bind:title.sync=”doc.title + ‘!’” 是无效的)。取而代之的是，你只能提供你想要绑定的属性名，类似 v-model。</li><li>将 v-bind.sync 用在一个字面量的对象上，例如 v-bind.sync=”{ title: doc.title }”，是无法正常工作的，因为在解析一个像这样的复杂表达式的时候，有很多边缘情况需要考虑。<h3 id="prop"><a href="#prop" class="headerlink" title=".prop"></a>.prop</h3>要学习这个修饰符，我们首先要搞懂两个东西的区别。</li></ol><ul><li>Property：节点对象在内存中存储的属性，可以访问和设置。</li><li>Attribute：节点对象的其中一个属性( property )，值是一个对象。</li></ul><p><em>(可以通过点访问法 document.getElementById(‘xx’).attributes 或者 document.getElementById(‘xx’).getAttributes(‘xx’) 读取，通过 document.getElementById(‘xx’).setAttribute(‘xx’,value) 新增和修改)</em></p><p>在标签里定义的所有属性包括 HTML 属性和自定义属性都会在 attributes 对象里以键值对的方式存在。</p><p>其实attribute和property两个单词，翻译出来都是属性，但是《javascript高级程序设计》将它们翻译为特性和属性，以示区分</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//这里的id,value,style都属于property</span><br><span class="line">//index属于attribute</span><br><span class="line">//id、title等既是属性，也是特性。修改属性，其对应的特性会发生改变；修改特性，属性也会改变</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"uid"</span> <span class="attr">title</span>=<span class="string">"title1"</span> <span class="attr">value</span>=<span class="string">"1"</span> <span class="attr">:index</span>=<span class="string">"index"</span>&gt;</span></span><br><span class="line">//input.index === undefined</span><br><span class="line">//input.attributes.index === this.index</span><br></pre></td></tr></table></figure><p>从上面我们可以看到如果直接使用v-bind绑定，则默认会绑定到dom节点的attribute。为了</p><ul><li>通过自定义属性存储变量，避免暴露数据</li><li>防止污染 HTML 结构</li></ul><p>我们可以使用这个修饰符，如下</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"uid"</span> <span class="attr">title</span>=<span class="string">"title1"</span> <span class="attr">value</span>=<span class="string">"1"</span> <span class="attr">:index.prop</span>=<span class="string">"index"</span>&gt;</span></span><br><span class="line">//input.index === this.index</span><br><span class="line">//input.attributes.index === undefined</span><br></pre></td></tr></table></figure><h3 id="camel"><a href="#camel" class="headerlink" title=".camel"></a>.camel</h3><p>由于HTML 特性是不区分大小写的。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">svg</span> <span class="attr">:viewBox</span>=<span class="string">"viewBox"</span>&gt;</span><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br></pre></td></tr></table></figure><p>实际上会渲染为</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">svg</span> <span class="attr">viewbox</span>=<span class="string">"viewBox"</span>&gt;</span><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br></pre></td></tr></table></figure><p>这将导致渲染失败，因为 SVG 标签只认 viewBox，却不知道 viewbox 是什么。</p><p>如果我们使用.camel修饰符，那它就会被渲染为驼峰名。</p><p>另，如果你使用字符串模版，则没有这些限制。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  template: <span class="string">'&lt;svg :viewBox="viewBox"&gt;&lt;/svg&gt;'</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
          <category> Vue.js </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> 前端 </tag>
            
            <tag> Vue.js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>一行代码解决各种IE兼容问题,IE6,IE7,IE8,IE9,IE10</title>
      <link href="/2020/01/27/2020-1-27-capability-in-IE/"/>
      <url>/2020/01/27/2020-1-27-capability-in-IE/</url>
      
        <content type="html"><![CDATA[<p>在网站开发中不免因为各种兼容问题苦恼，针对兼容问题，其实IE给出了解决方案Google也给出了解决方案</p><p>百度也应用了这种方案去解决IE的兼容问题</p><p>百度源代码如下</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!Doctype <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">html</span> <span class="attr">xmlns</span>=<span class="string">http://www.w3.org/1999/xhtml</span> <span class="attr">xmlns:bd</span>=<span class="string">http://www.baidu.com/2010/xbdml</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">Content-Type</span> <span class="attr">content</span>=<span class="string">“text/html;charset</span>=<span class="string">utf-8″</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">X-UA-Compatible</span> <span class="attr">content</span>=<span class="string">IE</span>=<span class="string">EmulateIE7</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">title</span>&gt;</span>百度一下，你就知道 <span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"><span class="keyword">var</span> wpo=&#123;<span class="attr">start</span>:<span class="keyword">new</span> <span class="built_in">Date</span>*<span class="number">1</span>,<span class="attr">pid</span>:<span class="number">109</span>,<span class="attr">page</span>:‘superpage’&#125;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">X-UA-Compatible</span> <span class="attr">content</span>=<span class="string">IE</span>=<span class="string">EmulateIE7</span>&gt;</span></span><br></pre></td></tr></table></figure><p>可以打开百度，右键查看源码看下！我们可以看下文件头是否存在这样一行代码！</p><p>这句话的意思是强制使用IE7模式来解析网页代码！</p><p>在这里送上几种IE使用模式！</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">“X-UA-Compatible”</span> <span class="attr">content</span>=<span class="string">“IE</span>=<span class="string">8″</span>&gt;</span></span><br><span class="line"> 2. Google Chrome Frame也可以让IE用上Chrome的引擎:</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">“X-UA-Compatible”</span> <span class="attr">content</span>=<span class="string">“chrome</span>=<span class="string">1″</span> /&gt;</span></span><br><span class="line"> 3.强制IE8使用IE7模式来解析</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">“X-UA-Compatible”</span> <span class="attr">content</span>=<span class="string">“IE</span>=<span class="string">EmulateIE7″</span>&gt;</span><span class="tag">&lt;<span class="name">!–</span> <span class="attr">IE7</span> <span class="attr">mode</span> –&gt;</span></span><br><span class="line"> //或者</span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">“X-UA-Compatible”</span> <span class="attr">content</span>=<span class="string">“IE</span>=<span class="string">7″</span>&gt;</span><span class="tag">&lt;<span class="name">!–</span> <span class="attr">IE7</span> <span class="attr">mode</span> –&gt;</span></span><br><span class="line">4.强制IE8使用IE6或IE5模式来解析</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">“X-UA-Compatible”</span> <span class="attr">content</span>=<span class="string">“IE</span>=<span class="string">6″</span>&gt;</span><span class="tag">&lt;<span class="name">!–</span> <span class="attr">IE6</span> <span class="attr">mode</span> –&gt;</span> </span><br><span class="line"></span><br><span class="line"> <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">“X-UA-Compatible”</span> <span class="attr">content</span>=<span class="string">“IE</span>=<span class="string">5″</span>&gt;</span><span class="tag">&lt;<span class="name">!–</span> <span class="attr">IE5</span> <span class="attr">mode</span> –&gt;</span> </span><br><span class="line"></span><br><span class="line">5.如果一个特定版本的IE支持所要求的兼容性模式多于一种，如：</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">“X-UA-Compatible”</span> <span class="attr">content</span>=<span class="string">“IE</span>=<span class="string">5;</span> <span class="attr">IE</span>=<span class="string">8″</span> /&gt;</span></span><br></pre></td></tr></table></figure><p>二.设定网站服务器以指定预设兼容性模式</p><p>如果服务器是自己的话，可以在服务器上定义一个自订标头来为它们的网站预设一个特定的文件兼容性模式。<br>这个特定的方法取决于你的网站服务器。</p><p>录入，下列的 web.config文件使Microsoft Internet Information Services (IIS)能定义一个自订标头以自动使用IE7 mode来编译所有网页。</p><p>另外还有一起其他的解决方案，例如google的</p><p>ie7 – js中是一个JavaScript库（解决IE与W3C标准的冲突的JS库），使微软的Internet Explorer的行为像一个Web标准兼容的浏览器，支持更多的W3C标准，支持CSS2、CSS3选择器。<br>它修复了许多的HTML和CSS问题，并使 得透明PNG在IE5、IE6下正确显示。</p><p>使IE5,IE6兼容到IE7模式（推荐）</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">!–[if</span> <span class="attr">lt</span> <span class="attr">IE</span> <span class="attr">7</span>]&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">”http://ie7-js.googlecode.com/svn/version/2.0(beta)/IE7.js”</span> <span class="attr">type</span>=<span class="string">”text/javascript”</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">![endif]–</span>&gt;</span></span><br><span class="line">使IE5,IE6,IE7兼容到IE8模式</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">!–[if</span> <span class="attr">lt</span> <span class="attr">IE</span> <span class="attr">8</span>]&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">”http://ie7-js.googlecode.com/svn/version/2.0(beta)/IE8.js”</span> <span class="attr">type</span>=<span class="string">”text/javascript”</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">![endif]–</span>&gt;</span></span><br><span class="line">使IE5,IE6,IE7,IE8兼容到IE9模式</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">!–[if</span> <span class="attr">lt</span> <span class="attr">IE</span> <span class="attr">9</span>]&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">”http://ie7-js.googlecode.com/svn/version/2.1(beta4)/IE9.js”</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">![endif]–</span>&gt;</span></span><br></pre></td></tr></table></figure><p>解决PNG显示问题</p><p>只需将透明png图片命名为*-trans.png</p><p>需要注意的是：此方法对背景平铺(background-repeat)和背景(background-position)无法起到任何作用,默认会占满整个容器。</p><p>转载：<a href="http://hi.baidu.com/myplan/blog/item/cdb09dfa1fa748a99f514626.html" target="_blank" rel="noopener">http://hi.baidu.com/myplan/blog/item/cdb09dfa1fa748a99f514626.html</a></p><p>三、<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><br>创建HTML5时发现这么一句话，不知其什么意思，百度如下：<br>这样写可以达到的效果是如果安装了GCF，则使用GCF来渲染页面，如果没安装GCF，则用最高版本的IE内核进行渲染。<br>Google Chrome Frame（谷歌内嵌浏览器框架GCF）。<br>这个插件可以让用户的IE浏览器外不变，但用户在浏览网页时，实际上使用的是Google Chrome浏览器内核，而且支持IE6、7、8等多个版本的IE浏览器。</p>]]></content>
      
      
      <categories>
          
          <category> HTML </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> HTML </tag>
            
            <tag> IE </tag>
            
            <tag> Meta </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用Navigator.userAgent.toLowerCase()判断移动端类型</title>
      <link href="/2020/01/26/2020-1-26-Navigator-userAgent-toLowerCase/"/>
      <url>/2020/01/26/2020-1-26-Navigator-userAgent-toLowerCase/</url>
      
        <content type="html"><![CDATA[<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ua = navigator.userAgent.toLowerCase();</span><br><span class="line"><span class="keyword">if</span> (<span class="regexp">/android|adr/gi</span>.test(ua)) &#123;</span><br><span class="line">    <span class="comment">// 安卓</span></span><br><span class="line">     </span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="regexp">/\(i[^;]+;( U;)? CPU.+Mac OS X/gi</span>.test(ua))&#123;</span><br><span class="line">    <span class="comment">//苹果</span></span><br><span class="line">     </span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="regexp">/iPad/gi</span>.test(ua))&#123;</span><br><span class="line">    <span class="comment">//ipad</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> 前端 </tag>
            
            <tag> userAgent </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>全局禁止鼠标右键菜单</title>
      <link href="/2020/01/25/2020-1-25-forbid-contextmenu/"/>
      <url>/2020/01/25/2020-1-25-forbid-contextmenu/</url>
      
        <content type="html"><![CDATA[<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="built_in">document</span>).bind(<span class="string">"contextmenu"</span>,<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;);</span><br><span class="line">$(<span class="built_in">document</span>).bind(<span class="string">"selectstart"</span>,<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> 前端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>前端如何检测系统黑暗模式(Dark Mode)</title>
      <link href="/2020/01/24/2020-1-24-Dark-Mode/"/>
      <url>/2020/01/24/2020-1-24-Dark-Mode/</url>
      
        <content type="html"><![CDATA[<h2 id="白天不知夜的黑"><a href="#白天不知夜的黑" class="headerlink" title="白天不知夜的黑"></a>白天不知夜的黑</h2><p>iOS 13 发布至今，除了带来无以计数的 bug 以外，还带来了在 Andorid Q 中就先一步实现的暗黑模式（dark mode）。基于 OLED 屏幕的特性，暗黑模式相对来说更为省电，良好的设计也能在黑夜中为用户提供更好的视觉体验。因此，在过去的一段时间里，各大 app 纷纷推出了针对暗黑模式的更新。从此暗黑模式的时代来临了。</p><p>那么问题来了，前端工程师如何为 web 应用实现暗黑模式呢？</p><p>在没有白天和暗黑模式都没有的黑夜里，我们通常可以通过 JavaScript 判断本地时间或者获取服务器时间来判断是否改为当前 web 应用添加暗黑模式的层叠样式表。这样做直观且粗暴，简单的是无论平台是否是支持暗黑模式的 iOS 13+ 还是不支持暗黑模式的 Ubuntu 12.04，用户都能获得“暗黑模式”的体验；粗暴的是，这个体验也就真的仅仅是体验而已了。且不说是否符合日出日落的规律，如果是 app 内嵌的 html 页面，大多数时候都会获得一个无法和 app 同昼同夜的糟糕体验。</p><p>那么为了和 OS 的暗黑模式同时同分同秒同生死，我们还有什么解决方案？幸运的是，媒体查询总是能救开发者于水火。</p><h2 id="prefers-color-scheme"><a href="#prefers-color-scheme" class="headerlink" title="prefers-color-scheme"></a>prefers-color-scheme</h2><p>media query 为开发者提供了系统主题检测的属性：prefers-color-scheme，有三个可用的值：no-preference、light 和 dark。</p><p>从值上很容易理解这个属性的作用，我们只要考虑如何使用即可：</p><h3 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* light mode */</span></span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">prefers-color-scheme:</span> light) &#123;</span><br><span class="line">  <span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#f0f0f0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* dark mode */</span></span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">prefers-color-scheme:</span> dark) &#123;</span><br><span class="line">  <span class="selector-tag">body</span>&#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#3e3e3e</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="JavaScript"><a href="#JavaScript" class="headerlink" title="JavaScript"></a>JavaScript</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="built_in">window</span>.matchMedia &amp;&amp; <span class="built_in">window</span>.matchMedia(<span class="string">'(prefers-color-scheme: dark)'</span>).matches) &#123;</span><br><span class="line">  <span class="comment">// dark mode</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
          <category> CSS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> 前端 </tag>
            
            <tag> CSS </tag>
            
            <tag> 黑暗模式 </tag>
            
            <tag> Dark Mode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>如何只在IE上加载CSS样式表</title>
      <link href="/2020/01/23/2020-1-23-IE-only-CSS/"/>
      <url>/2020/01/23/2020-1-23-IE-only-CSS/</url>
      
        <content type="html"><![CDATA[<h2 id="IE9以及低于IE9版本"><a href="#IE9以及低于IE9版本" class="headerlink" title="IE9以及低于IE9版本 :"></a>IE9以及低于IE9版本 :</h2><p>可以使用条件注释语句来加载特定于ie的样式表。如下所示，使用外部样式表。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--[if IE]&gt;</span></span><br><span class="line"><span class="comment">  &lt;link rel="stylesheet" type="text/css" href="all-ie-only.css" /&gt;</span></span><br><span class="line"><span class="comment">&lt;![endif]--&gt;</span></span><br></pre></td></tr></table></figure><h2 id="IE10或IE11"><a href="#IE10或IE11" class="headerlink" title="IE10或IE11:"></a>IE10或IE11:</h2><p>使用媒体查询（-ms-high-contrast）来加载样式表。由于-ms-high-contrast是微软特有的(并且只在IE 10+中可用)，所以只能在Internet Explorer 10或更高版本中解析。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@media</span> all <span class="keyword">and</span> (<span class="attribute">-ms-high-contrast:</span> none), (<span class="attribute">-ms-high-contrast:</span> active) &#123;</span><br><span class="line">     <span class="comment">/* IE10+ CSS styles go here */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="微软-Edge12"><a href="#微软-Edge12" class="headerlink" title="微软 Edge12 :"></a>微软 Edge12 :</h2><p>可以使用@supports</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@supports</span> (<span class="attribute">-ms-accelerator:</span>true) &#123;</span><br><span class="line">  <span class="comment">/* IE Edge 12+ CSS styles go here */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>如果我们想只针对IE加载样式表，只需要设置条件注释和-ms-high-contrast媒体查询即可。</p>]]></content>
      
      
      <categories>
          
          <category> CSS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> CSS </tag>
            
            <tag> IE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>实现访问Apache时的目录浏览功能</title>
      <link href="/2020/01/22/2020-1-22-Apache-folder-view/"/>
      <url>/2020/01/22/2020-1-22-Apache-folder-view/</url>
      
        <content type="html"><![CDATA[<h1 id="Apache-File-List-View"><a href="#Apache-File-List-View" class="headerlink" title="Apache File List View"></a>Apache File List View</h1><h3 id="1-实现原理"><a href="#1-实现原理" class="headerlink" title="1. 实现原理"></a>1. 实现原理</h3><p>通过apache的一个模块：mod_autoindex</p><p>这个模块的主要功能是自动对目录中的内容生成列表，这样当我们对服务器地址进行访问时在浏览器端可以看到访问目录下文件列表，点击它浏览器能打开的则打开查看，不能打开的则弹出是否保存的对话框，当然也可以右键链接另存为，这样就实现了访问下载文件的功能</p><p>对于mod_autoindex更多知识可以查看<a href="http://www.jinbuguo.com/apache/menu22/mod/mod_autoindex.html" target="_blank" rel="noopener">apache手册</a>或者可以点击下载<a href="http://download.csdn.net/detail/chen_gong1992/9700259" target="_blank" rel="noopener">apache中文手册</a></p><h3 id="2-配置httpd-conf文件"><a href="#2-配置httpd-conf文件" class="headerlink" title="2. 配置httpd.conf文件"></a>2. 配置httpd.conf文件</h3><p>apache的目录索引样式用mod_autoindex模块一般默认为开启状态。</p><p>找到httpd.conf文件，查找下面的内容</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;Directory&gt;</span><br><span class="line">    Options FollowSymLinks</span><br><span class="line">    AllowOverride None</span><br><span class="line">    Order deny, allow</span><br><span class="line">#   Deny from all</span><br><span class="line">    Allow from all</span><br><span class="line">&lt;&#x2F;Directory&gt;</span><br></pre></td></tr></table></figure><p>如果有#号注释则去掉，没有这句话就补上去。这样就开启了mod_autoindex</p><p>LoadModule autoindex_module modules/mod_autoindex.so</p><p>另外，检查一下访问权限，如果发现下面有deny from all请注释掉，改成allow from all。</p><h3 id="3-设置请求目录"><a href="#3-设置请求目录" class="headerlink" title="3.设置请求目录"></a>3.设置请求目录</h3><p>当从服务器请求一个目录的时候，可能来自: </p><ul><li>mod_dir的DirectoryIndex指定首页 </li><li>mod_autoindex目录</li></ul><p>如果你想直接访问mod_autoindex目录列表,那就删除服务器目录下的mod_dir的DirectoryIndex指定首页，或者在配置文件httpd.conf中修改。</p><h3 id="4-优化显示"><a href="#4-优化显示" class="headerlink" title="4.优化显示"></a>4.优化显示</h3><p>将下面的代码加到httpd.conf文件中</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Options Indexes FollowSymLinks</span><br><span class="line">IndexOptions FancyIndexing FoldersFirst NameWidth&#x3D;* DescriptionWidth&#x3D;* SuppressHTMLPreamble HTMLTable</span><br><span class="line">IndexOptions Charset&#x3D;utf-8 IconHeight&#x3D;16 IconWidth&#x3D;16 SuppressRules</span><br><span class="line">IndexIgnore web header.html footer.html actions defects</span><br><span class="line">HeaderName &#x2F;web&#x2F;header.html</span><br><span class="line">ReadmeName &#x2F;web&#x2F;footer.html</span><br><span class="line">Include conf&#x2F;extra&#x2F;httpd-autoindex.conf</span><br><span class="line">IndexOrderDefault Ascending Date</span><br><span class="line">ServerSignature Off</span><br></pre></td></tr></table></figure><p>下面对上面的配置代码进行解读:</p><ul><li><strong>Indexes</strong>：索引, 默认是开启索引浏览,如果不想开启前面加个-, -Indexes就是禁止目录浏览</li><li><strong>IndexOptions</strong>：FancyIndexing 开启富样式索引，这里说一下：IndexOptions指令的FancyIndexing选项可以让列表头部增加可以产生按Name, Lastmodified, Size, Description排序产生的目录列，跟在后面的命令这个主要是美化样式显示。</li><li><strong>FoldersFirst</strong>：文件夹优先，这里指让目录中的文件夹排在前面</li><li><strong>NameWidth</strong>、<strong>DescriptionWidth</strong>： 文件名和描述文字的长度，这里*表示长度自适应，当然默认的情况下是没有描述的，需要使用AddDescription指令添加描述SuppressHTMLPreamble 是去掉apache自动生成一些HTML代码 例如 Index/of</li><li><strong>ofHTMLTable</strong>：是启用HTML表格样式，以表格的方式展示列表 </li><li><strong>Charset=utf-8</strong>：设置字符集,建议用utf-8,用GB2312会乱码 </li><li><strong>IconHeight</strong>、<strong>IconWidth</strong>：设置图标的大小 </li><li><strong>SuppressRules</strong>：在FancyIndexing开启的情况下取消hr下划线 </li><li><strong>IgnoreCase</strong>：排序不区分大小写 </li><li><strong>IndexIgnore</strong>：设置哪些类型的文件不显示出来, 如IndexIgnore README .htaccess *.bak *~ </li><li><strong>HeaderName</strong>：/web/header.html 这个是头文件, 注意是绝对路径 </li><li><strong>ReadmeName</strong>：/web/footer.html 这个结尾的文件, appache如果发现了这些文件，就在文件列表之前首先显示这些文件的内容，可以看出，其实个性化的原理就是把Apache的目录列表嵌在了header.htm与footer.html中间的表格中，两个文件的其他部分都可以自定义内容的。</li><li><strong>Include conf/extra/httpd-autoindex.conf</strong>： 加载apache目录下的extra/httpd-autoindex.conf文件为文件添加小图标，httpd-autoindex.conf文件里有关于小图标的设置，这里就不展开了。</li><li><strong>IndexOrderDefault Ascending Date</strong>：默认按文件的创建时间排序； </li><li><strong>ServerSignature Off</strong>：防止服务器的信息泄露 这个不用管，off掉就行 </li></ul><p>==header.html==</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!Doctype <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Mr.CG的站点<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line">        p&#123;</span><br><span class="line">            font-family: "微软雅黑";</span><br><span class="line"><span class="css">            <span class="selector-tag">color</span>: <span class="selector-id">#0080FF</span>;</span></span><br><span class="line">            font-weight: bolder;</span><br><span class="line"><span class="css">            <span class="selector-tag">font-size</span><span class="selector-pseudo">:36px</span>;</span></span><br><span class="line">            text-align: center;</span><br><span class="line">        &#125;</span><br><span class="line">        h3&#123;</span><br><span class="line">            width: 79%;</span><br><span class="line">            margin: 0 auto;</span><br><span class="line">            text-align: right;</span><br><span class="line"><span class="css">            <span class="selector-tag">color</span>: <span class="selector-id">#757575</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line">        table &#123;</span><br><span class="line"><span class="css">            <span class="selector-tag">width</span><span class="selector-pseudo">:80</span>%;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">border-collapse</span><span class="selector-pseudo">:collapse</span>;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">border</span><span class="selector-pseudo">:1px</span> <span class="selector-id">#858585</span> <span class="selector-tag">solid</span>;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">margin</span><span class="selector-pseudo">:0</span> <span class="selector-tag">auto</span></span></span><br><span class="line">        &#125;</span><br><span class="line">        table td &#123; </span><br><span class="line"><span class="css">            <span class="selector-tag">line-height</span><span class="selector-pseudo">:17px</span>;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">font-size</span><span class="selector-pseudo">:15px</span>;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">text-align</span><span class="selector-pseudo">:left</span>;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">border</span><span class="selector-pseudo">:1px</span> <span class="selector-id">#858585</span> <span class="selector-tag">solid</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-tag">table</span> <span class="selector-tag">td</span><span class="selector-pseudo">:nth-child(1)</span>&#123; </span></span><br><span class="line"><span class="css">            <span class="selector-tag">width</span><span class="selector-pseudo">:20px</span>;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">text-align</span><span class="selector-pseudo">:right</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-tag">table</span> <span class="selector-tag">tr</span><span class="selector-pseudo">:nth-child(odd)</span>&#123; </span></span><br><span class="line"><span class="css">            <span class="selector-tag">background</span>:<span class="selector-id">#f0f0f0</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-tag">table</span> <span class="selector-tag">tr</span><span class="selector-pseudo">:hover</span>&#123;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">background</span>:<span class="selector-id">#ACD6FF</span>;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">color</span>:<span class="selector-id">#990000</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line">        table th &#123;</span><br><span class="line"><span class="css">            <span class="selector-tag">background</span>:<span class="selector-id">#999999</span>;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">line-height</span><span class="selector-pseudo">:17px</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-tag">table</span> <span class="selector-tag">th</span>  <span class="selector-tag">a</span><span class="selector-pseudo">:link</span> &#123;</span></span><br><span class="line">            text-decoration: none; </span><br><span class="line"><span class="css">            <span class="selector-tag">color</span>:<span class="selector-id">#FFFFFF</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-tag">table</span> <span class="selector-tag">th</span>  <span class="selector-tag">a</span><span class="selector-pseudo">:visited</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">color</span>:<span class="selector-id">#FFFFFF</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-tag">table</span> <span class="selector-tag">th</span>  <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">color</span>:<span class="selector-id">#FFFF00</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Welcome<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p>==footer.html==</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span> Power by Mr.CG<span class="tag">&lt;<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Server </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Server </tag>
            
            <tag> 服务器 </tag>
            
            <tag> 配置 </tag>
            
            <tag> Config </tag>
            
            <tag> Apache </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>彻底删除windows.old</title>
      <link href="/2020/01/21/2020-1-21-delete-windows-old/"/>
      <url>/2020/01/21/2020-1-21-delete-windows-old/</url>
      
        <content type="html"><![CDATA[<p>管理员身份运行CMD  rd/s/q c:\Windows.old</p>]]></content>
      
      
      <categories>
          
          <category> Windows </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 配置 </tag>
            
            <tag> Config </tag>
            
            <tag> Windows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>页面跳转至指定位置</title>
      <link href="/2020/01/20/2020-1-20-jump-to-target-area-in-page/"/>
      <url>/2020/01/20/2020-1-20-jump-to-target-area-in-page/</url>
      
        <content type="html"><![CDATA[<h6 id="方法主要利用scrolltop值做运动，-用于到达用户指定的位置（如返回顶部把参数target设置为0即可），处理了多种情况如-scrolltop-gt-目标值-向上运动-，等4种情况-，-代码及用法贴上："><a href="#方法主要利用scrolltop值做运动，-用于到达用户指定的位置（如返回顶部把参数target设置为0即可），处理了多种情况如-scrolltop-gt-目标值-向上运动-，等4种情况-，-代码及用法贴上：" class="headerlink" title="方法主要利用scrolltop值做运动， 用于到达用户指定的位置（如返回顶部把参数target设置为0即可），处理了多种情况如 scrolltop &gt; 目标值 向上运动 ，等4种情况  ， 代码及用法贴上："></a>方法主要利用scrolltop值做运动， 用于到达用户指定的位置（如返回顶部把参数target设置为0即可），处理了多种情况如 scrolltop &gt; 目标值 向上运动 ，等4种情况  ， 代码及用法贴上：</h6><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">goTo = <span class="function"><span class="keyword">function</span>(<span class="params">target</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> scrollT = <span class="built_in">document</span>.body.scrollTop|| <span class="built_in">document</span>.documentElement.scrollTop</span><br><span class="line">    <span class="keyword">if</span> (scrollT &gt;target) &#123;</span><br><span class="line">        <span class="keyword">var</span> timer = setInterval(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> scrollT = <span class="built_in">document</span>.body.scrollTop|| <span class="built_in">document</span>.documentElement.scrollTop</span><br><span class="line">            <span class="keyword">var</span> step = <span class="built_in">Math</span>.floor(-scrollT/<span class="number">6</span>);</span><br><span class="line">            <span class="built_in">document</span>.documentElement.scrollTop = <span class="built_in">document</span>.body.scrollTop = step + scrollT;</span><br><span class="line">            <span class="keyword">if</span> (scrollT &lt;= target) &#123;</span><br><span class="line">                <span class="built_in">document</span>.body.scrollTop = <span class="built_in">document</span>.documentElement.scrollTop = target;</span><br><span class="line">                clearTimeout(timer);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, <span class="number">20</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (scrollT == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> timer = setInterval(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> scrollT = <span class="built_in">document</span>.body.scrollTop|| <span class="built_in">document</span>.documentElement.scrollTop</span><br><span class="line">            <span class="keyword">var</span> step = <span class="built_in">Math</span>.floor(<span class="number">300</span>/<span class="number">3</span>*<span class="number">0.7</span>);</span><br><span class="line">            <span class="built_in">document</span>.documentElement.scrollTop = <span class="built_in">document</span>.body.scrollTop = step + scrollT;</span><br><span class="line">            <span class="built_in">console</span>.log(scrollT)</span><br><span class="line">            <span class="keyword">if</span> (scrollT &gt;= target) &#123;</span><br><span class="line">                <span class="built_in">document</span>.body.scrollTop = <span class="built_in">document</span>.documentElement.scrollTop = target;</span><br><span class="line">                clearTimeout(timer);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,<span class="number">20</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (scrollT &lt; target) &#123;</span><br><span class="line">        <span class="keyword">var</span> timer = setInterval(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> scrollT = <span class="built_in">document</span>.body.scrollTop|| <span class="built_in">document</span>.documentElement.scrollTop</span><br><span class="line">            <span class="keyword">var</span> step = <span class="built_in">Math</span>.floor(scrollT/<span class="number">6</span>);</span><br><span class="line">            <span class="built_in">document</span>.documentElement.scrollTop = <span class="built_in">document</span>.body.scrollTop = step + scrollT;</span><br><span class="line">            <span class="keyword">if</span> (scrollT &gt;= target) &#123;</span><br><span class="line">                <span class="built_in">document</span>.body.scrollTop = <span class="built_in">document</span>.documentElement.scrollTop = target;</span><br><span class="line">                clearTimeout(timer);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,<span class="number">20</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (target == scrollT) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h6 id="用法-function-target-目前唯一target（目标距离number）"><a href="#用法-function-target-目前唯一target（目标距离number）" class="headerlink" title="用法 function(target) / / 目前唯一target（目标距离number）"></a>用法 function(target) / / 目前唯一target（目标距离number）</h6><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">on(goPs,<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; goTo(<span class="number">2450</span>) &#125;); <span class="comment">//运动到scrolltop值为2450地位置，下面也一样， 运动到指定的位置</span></span><br><span class="line">on(goTop,<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; buffer.goTo(<span class="number">0</span>) &#125;)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> 前端 </tag>
            
            <tag> Url </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>微信小程序，实现 watch 属性，监听数据变化</title>
      <link href="/2020/01/19/2020-1-19-wechat-miniapp-watch/"/>
      <url>/2020/01/19/2020-1-19-wechat-miniapp-watch/</url>
      
        <content type="html"><![CDATA[<h1 id="微信小程序，实现-watch-属性，监听数据变化"><a href="#微信小程序，实现-watch-属性，监听数据变化" class="headerlink" title="微信小程序，实现 watch 属性，监听数据变化"></a>微信小程序，实现 watch 属性，监听数据变化</h1><h2 id="目标"><a href="#目标" class="headerlink" title="目标"></a>目标</h2><p>在微信小程序实现 watch 属性，监听 data 中的属性，当被监听属性的值改变时，执行我们指定的方法。</p><h2 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h2><p>Vue 的 computed 和 watch 可以很方便的检测数据的变化，从而做出相应的改变，所以，模仿 vue 肯定是一个不错的选择。</p><p>与 Vue 一样，我们使用 ES5 的Object.defineProperty()方法，劫持对象的 <strong>getter/setter</strong>，从而实现给对象赋值时(调用 setter)，执行 watch 对象中相对应的函数，达到监听效果。</p><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p>不啰嗦，上代码，真实可用。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">observe</span>(<span class="params">obj, key, watchFun, deep, page</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> val = obj[key];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (val != <span class="literal">null</span> &amp;&amp; <span class="keyword">typeof</span> val === <span class="string">"object"</span> &amp;&amp; deep) &#123;</span><br><span class="line">    <span class="built_in">Object</span>.keys(val).forEach(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">      observe(val, item, watchFun, deep, page);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">Object</span>.defineProperty(obj, key, &#123;</span><br><span class="line">    configurable: <span class="literal">true</span>,</span><br><span class="line">    enumerable: <span class="literal">true</span>,</span><br><span class="line">    <span class="keyword">set</span>: function(value) &#123;</span><br><span class="line">      watchFun.call(page, value, val);</span><br><span class="line">      val = value;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (deep) &#123;</span><br><span class="line">        observe(obj, key, watchFun, deep, page);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="keyword">get</span>: function() &#123;</span><br><span class="line">      <span class="keyword">return</span> val;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">setWatcher</span>(<span class="params">page</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> data = page.data;</span><br><span class="line">  <span class="keyword">let</span> watch = page.watch;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">Object</span>.keys(watch).forEach(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> targetData = data;</span><br><span class="line">    <span class="keyword">let</span> keys = item.split(<span class="string">"."</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; keys.length - <span class="number">1</span>; i++) &#123;</span><br><span class="line">      targetData = targetData[keys[i]];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> targetKey = keys[keys.length - <span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> watchFun = watch[item].handler || watch[item];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> deep = watch[item].deep;</span><br><span class="line">    observe(targetData, targetKey, watchFun, deep, page);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="注意事项："><a href="#注意事项：" class="headerlink" title="注意事项："></a>注意事项：</h4><ul><li>watch 只能监听已存在的属性，数组的 push()，pop()等方法并不会触发监听函数。</li></ul><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> watch <span class="keyword">from</span> <span class="string">"./watch.js"</span>;</span><br><span class="line"></span><br><span class="line">Page(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    name: <span class="string">"二狗子"</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  onLoad() &#123;</span><br><span class="line">    watch.setWatcher(<span class="keyword">this</span>);</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  watch: &#123;</span><br><span class="line">    name: <span class="function"><span class="keyword">function</span>(<span class="params">newVal, oldVal</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(newVal, oldVal);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h4 id="首先在需要的页面引入"><a href="#首先在需要的页面引入" class="headerlink" title="首先在需要的页面引入"></a>首先在需要的页面引入</h4><ul><li>在 Page 的onLoad钩子设置监听器</li><li>然后就可以愉快的使用了。</li></ul><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>watch 会使代码更简洁，逻辑更清晰，在响应式数据处理上很方便。</p>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
          <category> 小程序 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> 前端 </tag>
            
            <tag> 小程序 </tag>
            
            <tag> 微信 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数组比最大值和最小值</title>
      <link href="/2020/01/18/2020-1-18-max-and-min-in-array/"/>
      <url>/2020/01/18/2020-1-18-max-and-min-in-array/</url>
      
        <content type="html"><![CDATA[<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.max = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">Math</span>.max.apply(&#123;&#125;,<span class="keyword">this</span>)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Array</span>.prototype.min = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">Math</span>.min.apply(&#123;&#125;,<span class="keyword">this</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">array.min()</span><br><span class="line"></span><br><span class="line">array.max()</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> 前端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>查找并显示所有LocalStorage数据</title>
      <link href="/2020/01/17/2020-1-17-find-and-display-all-localstorage-data/"/>
      <url>/2020/01/17/2020-1-17-find-and-display-all-localstorage-data/</url>
      
        <content type="html"><![CDATA[<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">findAllLocalStorageItems</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> itemList = <span class="built_in">document</span>.getElementById(<span class="string">'itemlist'</span>);</span><br><span class="line">    </span><br><span class="line">    itemList.innerHTML = <span class="string">''</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i&lt;localStorage.length; i++)&#123;</span><br><span class="line">        <span class="keyword">var</span> key = localStorage.key(i);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">var</span> item = localStorage.getItem(key);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">var</span> newItem = <span class="built_in">document</span>.createElement(<span class="string">'li'</span>);</span><br><span class="line">        newItem.innerHTML = key + <span class="string">": "</span> + item;</span><br><span class="line">        itemList.appendChild(newItem);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> 前端 </tag>
            
            <tag> LocalStorage </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>根据JSON数据动态生成表格，并可编辑</title>
      <link href="/2020/01/16/2020-1-16-JSON-to-editable-table/"/>
      <url>/2020/01/16/2020-1-16-JSON-to-editable-table/</url>
      
        <content type="html"><![CDATA[<p>JSON</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">getdata([</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">"id"</span>: <span class="string">"1"</span>, </span><br><span class="line">        <span class="attr">"国家"</span>: <span class="string">"中国"</span>, </span><br><span class="line">        <span class="attr">"capital"</span>: <span class="string">"北京"</span>, </span><br><span class="line">        <span class="attr">"hhh"</span>: <span class="string">"dfa"</span>, </span><br><span class="line">        <span class="attr">"location"</span>: <span class="string">"Asia"</span></span><br><span class="line">    &#125;, </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">"id"</span>: <span class="string">"2"</span>, </span><br><span class="line">        <span class="attr">"国家"</span>: <span class="string">"美国"</span>, </span><br><span class="line">        <span class="attr">"capital"</span>: <span class="string">"纽约"</span>, </span><br><span class="line">        <span class="attr">"hhh"</span>: <span class="string">"dfa"</span>, </span><br><span class="line">        <span class="attr">"location"</span>: <span class="string">"America"</span></span><br><span class="line">    &#125;, </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">"id"</span>: <span class="string">"3"</span>, </span><br><span class="line">        <span class="attr">"国家"</span>: <span class="string">"英国"</span>, </span><br><span class="line">        <span class="attr">"capital"</span>: <span class="string">"伦敦"</span>, </span><br><span class="line">        <span class="attr">"hhh"</span>: <span class="string">"dfa"</span>, </span><br><span class="line">        <span class="attr">"location"</span>: <span class="string">"Europe"</span></span><br><span class="line">    &#125;, </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">"id"</span>: <span class="string">"4"</span>, </span><br><span class="line">        <span class="attr">"国家"</span>: <span class="string">"日本"</span>, </span><br><span class="line">        <span class="attr">"capital"</span>: <span class="string">"东京"</span>, </span><br><span class="line">        <span class="attr">"hhh"</span>: <span class="string">"dfa"</span>, </span><br><span class="line">        <span class="attr">"location"</span>: <span class="string">"Asia"</span></span><br><span class="line">    &#125;, </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">"id"</span>: <span class="string">"5"</span>, </span><br><span class="line">        <span class="attr">"国家"</span>: <span class="string">"韩国"</span>, </span><br><span class="line">        <span class="attr">"capital"</span>: <span class="string">"首尔"</span>, </span><br><span class="line">        <span class="attr">"hhh"</span>: <span class="string">"dfa"</span>, </span><br><span class="line">        <span class="attr">"location"</span>: <span class="string">"Asia"</span></span><br><span class="line">    &#125;, </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">"id"</span>: <span class="string">"6"</span>, </span><br><span class="line">        <span class="attr">"国家"</span>: <span class="string">"法国"</span>, </span><br><span class="line">        <span class="attr">"capital"</span>: <span class="string">"柏林"</span>, </span><br><span class="line">        <span class="attr">"hhh"</span>: <span class="string">"dfa"</span>, </span><br><span class="line">        <span class="attr">"location"</span>: <span class="string">"Europe"</span></span><br><span class="line">    &#125;</span><br><span class="line">])</span><br></pre></td></tr></table></figure><p>HTML</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"../../../ICPAS/Wnmp/WWW/css/bootstrap.css"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-12 col-sm-12 col-xs-12"</span> <span class="attr">id</span>=<span class="string">"content"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- winbatchadd Modal --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"modal"</span> <span class="attr">class</span>=<span class="string">"modal fade"</span> <span class="attr">tabindex</span>=<span class="string">"-1"</span> <span class="attr">role</span>=<span class="string">"dialog"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal-dialog"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal-content"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal-header"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h4</span> <span class="attr">class</span>=<span class="string">"modal-title"</span> &gt;</span>编辑<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal-body"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>  <span class="attr">id</span>=<span class="string">"modal_content"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal-footer"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"btn-group btn-group-justified"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"btn-group"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btnAdd"</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">class</span>=<span class="string">"btn btn-success"</span>&gt;</span>确定<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"btn-group"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">class</span>=<span class="string">"btn btn-danger"</span> <span class="attr">data-dismiss</span>=<span class="string">"modal"</span>&gt;</span>取消<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="comment">&lt;!-- /.modal-content --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="comment">&lt;!-- /.modal --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- winbatchadd Modal --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../../../ICPAS/Wnmp/WWW/js/jquery-1.11.3.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../../../ICPAS/Wnmp/WWW/js/bootstrap.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"3.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>  <span class="attr">src</span>=<span class="string">"4.json?callback=getdata"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>JavaScript</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// JavaScript Document</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> bgColor;</span><br><span class="line"><span class="keyword">var</span> list = [];</span><br><span class="line"></span><br><span class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;list.length;i++)&#123;</span><br><span class="line">list[i].toolbar = <span class="string">'&lt;button class="btn btn-link btn-block" onclick="edit1('</span> + i + <span class="string">')"&gt;编辑&lt;/button&gt;'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">var</span> content = <span class="built_in">window</span>.document.getElementById(<span class="string">"content"</span>);</span><br><span class="line"><span class="comment">//创建表格</span></span><br><span class="line"><span class="keyword">var</span> table = <span class="built_in">window</span>.document.createElement(<span class="string">"table"</span>);</span><br><span class="line">table.border = <span class="number">1</span>;</span><br><span class="line">table.setAttribute(<span class="string">'class'</span>,<span class="string">'table table-responsive table-bordered'</span>);</span><br><span class="line">content.appendChild(table);</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建标题行</span></span><br><span class="line"><span class="keyword">var</span> thead = <span class="built_in">window</span>.document.createElement(<span class="string">"thead"</span>);</span><br><span class="line"><span class="keyword">var</span> itemHead = list[<span class="number">0</span>];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> index <span class="keyword">in</span> itemHead) &#123;</span><br><span class="line"><span class="comment">//创建标题单元格添加到thead</span></span><br><span class="line"><span class="keyword">var</span> th = <span class="built_in">window</span>.document.createElement(<span class="string">"th"</span>);</span><br><span class="line">th.style.textAlign = <span class="string">"center"</span>;</span><br><span class="line">th.innerHTML = index;</span><br><span class="line">thead.appendChild(th);</span><br><span class="line">&#125;</span><br><span class="line">table.appendChild(thead);</span><br><span class="line"></span><br><span class="line"><span class="comment">//遍历对象，创建行和单元格</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; list.length; i++) &#123;</span><br><span class="line"><span class="keyword">var</span> item = list[i];</span><br><span class="line"><span class="comment">//创建行</span></span><br><span class="line"><span class="keyword">var</span> tr = <span class="built_in">window</span>.document.createElement(<span class="string">"tr"</span>);</span><br><span class="line"><span class="keyword">if</span> (i % <span class="number">2</span> == <span class="number">0</span>) &#123;</span><br><span class="line">tr.style.backgroundColor = <span class="string">"white"</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">tr.style.backgroundColor = <span class="string">"whitesmoke"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//注册指向行的事件</span></span><br><span class="line">   tr.onmouseover = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">bgColor = <span class="keyword">this</span>.style.backgroundColor;</span><br><span class="line"><span class="keyword">this</span>.style.backgroundColor = <span class="string">"lightgray"</span>;</span><br><span class="line">&#125;</span><br><span class="line">tr.onmouseout = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.style.backgroundColor = bgColor;</span><br><span class="line">&#125;</span><br><span class="line">table.appendChild(tr);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> item) &#123;</span><br><span class="line"><span class="comment">//创建单元格</span></span><br><span class="line"><span class="keyword">var</span> td = <span class="built_in">window</span>.document.createElement(<span class="string">"td"</span>);</span><br><span class="line">td.innerHTML = item[key];</span><br><span class="line">td.style.textAlign = <span class="string">"center"</span>;</span><br><span class="line">tr.appendChild(td);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$(<span class="string">'#btnAdd'</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">var</span> label = $(<span class="string">'#modal_content'</span>).find(<span class="string">'label'</span>);</span><br><span class="line"><span class="keyword">var</span> input = $(<span class="string">'#modal_content'</span>).find(<span class="string">'input'</span>);</span><br><span class="line"><span class="keyword">var</span> object = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i&lt;label.length;i++)&#123;</span><br><span class="line">object[label[i].innerText] = input[i].value;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(object);</span><br><span class="line">&#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">edit1</span>(<span class="params">index</span>)</span>&#123;</span><br><span class="line">$(<span class="string">'#modal_content'</span>).empty();</span><br><span class="line"><span class="keyword">var</span> modal_content = <span class="built_in">document</span>.getElementById(<span class="string">'modal_content'</span>);</span><br><span class="line"><span class="keyword">var</span> data = list[index]</span><br><span class="line"><span class="comment">//console.log(data);</span></span><br><span class="line"><span class="keyword">delete</span> data.toolbar;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> index <span class="keyword">in</span> data)&#123;</span><br><span class="line"><span class="comment">//console.log(modal_content);</span></span><br><span class="line"><span class="keyword">var</span> form_group = <span class="built_in">window</span>.document.createElement(<span class="string">"div"</span>);</span><br><span class="line">form_group.setAttribute(<span class="string">'class'</span>,<span class="string">'form-group col-md-6 col-sm-6 col-xs-6'</span>);</span><br><span class="line">modal_content.appendChild(form_group);</span><br><span class="line"><span class="keyword">var</span> label = <span class="built_in">window</span>.document.createElement(<span class="string">"label"</span>);</span><br><span class="line">label.innerHTML = index;</span><br><span class="line">label.setAttribute(<span class="string">'class'</span>,<span class="string">'control-label'</span>);</span><br><span class="line">form_group.appendChild(label);</span><br><span class="line"><span class="keyword">var</span> input = <span class="built_in">window</span>.document.createElement(<span class="string">"input"</span>);</span><br><span class="line">input.value = data[index];</span><br><span class="line">input.setAttribute(<span class="string">'class'</span>,<span class="string">'form-control'</span>);</span><br><span class="line">form_group.appendChild(input);</span><br><span class="line">&#125;</span><br><span class="line">$(<span class="string">'#modal'</span>).modal(<span class="string">'show'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getdata</span>(<span class="params">result</span>)</span>&#123;</span><br><span class="line">list = result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
          <category> HTML </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> 前端 </tag>
            
            <tag> JSON </tag>
            
            <tag> HTML </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>正则表达式合集</title>
      <link href="/2020/01/15/2020-1-15-reg-pack/"/>
      <url>/2020/01/15/2020-1-15-reg-pack/</url>
      
        <content type="html"><![CDATA[<h2 id="一、校验数字的表达式"><a href="#一、校验数字的表达式" class="headerlink" title="一、校验数字的表达式"></a>一、校验数字的表达式</h2><pre><code>- 数字：^[0-9]*$- n位的数字：^d{n}$- 至少n位的数字：^d{n,}$- m-n位的数字：^d{m,n}$- 零和非零开头的数字：^(0|[1-9][0-9]*)$- 非零开头的最多带两位小数的数字：^([1-9][0-9]*)+(.[0-9]{1,2})?$- 带1-2位小数的正数或负数：^(-)?d+(.d{1,2})?$- 正数、负数、和小数：^(-|+)?d+(.d+)?$- 有两位小数的正实数：^[0-9]+(.[0-9]{2})?$- 有1~3位小数的正实数：^[0-9]+(.[0-9]{1,3})?$- 非零的正整数：^[1-9]d*$ 或 ^([1-9][0-9]*){1,3}$ 或 ^+?[1-9][0-9]*$- 非零的负整数：^-[1-9][]0-9&quot;*$ 或 ^-[1-9]d*$- 非负整数：^d+$ 或 ^[1-9]d*|0$- 非正整数：^-[1-9]d*|0$ 或 ^((-d+)|(0+))$- 非负浮点数：^d+(.d+)?$ 或 ^[1-9]d*.d*|0.d*[1-9]d*|0?.0+|0$- 非正浮点数：^((-d+(.d+)?)|(0+(.0+)?))$ 或 ^(-([1-9]d*.d*|0.d*[1-9]d*))|0?.0+|0$- 正浮点数：^[1-9]d*.d*|0.d*[1-9]d*$ 或 ^(([0-9]+.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*.[0-9]+)|([0-9]*[1-9][0-9]*))$- 负浮点数：^-([1-9]d*.d*|0.d*[1-9]d*)$ 或 ^(-(([0-9]+.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*.[0-9]+)|([0-9]*[1-9][0-9]*)))$- 浮点数：^(-?d+)(.d+)?$ 或 ^-?([1-9]d*.d*|0.d*[1-9]d*|0?.0+|0)$</code></pre><h2 id="二、校验字符的表达式"><a href="#二、校验字符的表达式" class="headerlink" title="二、校验字符的表达式"></a>二、校验字符的表达式</h2><pre><code>- 汉字：^[一-龥]{0,}$- 英文和数字：^[A-Za-z0-9]+$ 或 ^[A-Za-z0-9]{4,40}$- 长度为3-20的所有字符：^.{3,20}$- 由26个英文字母组成的字符串：^[A-Za-z]+$- 由26个大写英文字母组成的字符串：^[A-Z]+$- 由26个小写英文字母组成的字符串：^[a-z]+$- 由数字和26个英文字母组成的字符串：^[A-Za-z0-9]+$- 由数字、26个英文字母或者下划线组成的字符串：^w+$ 或 ^w{3,20}$- 中文、英文、数字包括下划线：^[一-龥A-Za-z0-9_]+$- 中文、英文、数字但不包括下划线等符号：^[一-龥A-Za-z0-9]+$ 或 ^[一-龥A-Za-z0-9]{2,20}$- 可以输入含有^%&amp;&apos;,;=?$&quot;等字符：[^%&amp;&apos;,;=?$&quot;]+ 12 禁止输入含有~的字符：[^~&quot;]+</code></pre><h2 id="三、特殊需求表达式"><a href="#三、特殊需求表达式" class="headerlink" title="三、特殊需求表达式"></a>三、特殊需求表达式</h2><pre><code>- Email地址：^w+([-+.]w+)*@w+([-.]w+)*.w+([-.]w+)*$- 域名：[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(/.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+/.?- InternetURL：[a-zA-z]+://[^s]* 或 ^http://([w-]+.)+[w-]+(/[w-./?%&amp;=]*)?$- 手机号码：^(13[0-9]|14[5|7]|15[0|1|2|3|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])d{8}$- 电话号码(“XXX-XXXXXXX”、”XXXX-XXXXXXXX”、”XXX-XXXXXXX”、”XXX-XXXXXXXX”、”XXXXXXX”和”XXXXXXXX)：^((d{3,4}-)|d{3.4}-)?d{7,8}$- 国内电话号码(0511-4405222、021-87888822)：d{3}-d{8}|d{4}-d{7}- 身份证号(15位、18位数字)：^d{15}|d{18}$- 短身份证号码(数字、字母x结尾)：^([0-9]){7,18}(x|X)?$ 或 ^d{8,18}|[0-9x]{8,18}|[0-9X]{8,18}?$- 帐号是否合法(字母开头，允许5-16字节，允许字母数字下划线)：^[a-zA-Z][a-zA-Z0-9_]{4,15}$- 密码(以字母开头，长度在6~18之间，只能包含字母、数字和下划线)：^[a-zA-Z]w{5,17}$- 强密码(必须包含大小写字母和数字的组合，不能使用特殊字符，长度在8-10之间)：^(?=.*d)(?=.*[a-z])(?=.*[A-Z]).{8,10}$- 日期格式：^d{4}-d{1,2}-d{1,2}- 一年的12个月(01～09和1～12)：^(0?[1-9]|1[0-2])$- 一个月的31天(01～09和1～31)：^((0?[1-9])|((1|2)[0-9])|30|31)$</code></pre><h2 id="四、钱的输入格式"><a href="#四、钱的输入格式" class="headerlink" title="四、钱的输入格式"></a>四、钱的输入格式</h2><pre><code>1.有四种钱的表示形式我们可以接受:”10000.00” 和 “10,000.00”, 和没有 “分” 的 “10000” 和 “10,000”：^[1-9][0-9]*$2.这表示任意一个不以0开头的数字,但是,这也意味着一个字符”0”不通过,所以我们采用下面的形式：^(0|[1-9][0-9]*)$3.一个0或者一个不以0开头的数字.我们还可以允许开头有一个负号：^(0|-?[1-9][0-9]*)$4.这表示一个0或者一个可能为负的开头不为0的数字.让用户以0开头好了.把负号的也去掉,因为钱总不能是负的吧.下面我们要加的是说明可能的小数部分：^[0-9]+(.[0-9]+)?$5.必须说明的是,小数点后面至少应该有1位数,所以”10.”是不通过的,但是 “10” 和 “10.2” 是通过的：^[0-9]+(.[0-9]{2})?$6.这样我们规定小数点后面必须有两位,如果你认为太苛刻了,可以这样：^[0-9]+(.[0-9]{1,2})?$7.这样就允许用户只写一位小数.下面我们该考虑数字中的逗号了,我们可以这样：^[0-9]{1,3}(,[0-9]{3})*(.[0-9]{1,2})?$8.1到3个数字,后面跟着任意个 逗号+3个数字,逗号成为可选,而不是必须：^([0-9]+|[0-9]{1,3}(,[0-9]{3})*)(.[0-9]{1,2})?$</code></pre><p>==备注：这就是最终结果了,别忘了”+”可以用”*”替代如果你觉得空字符串也可以接受的话(奇怪,为什么?)最后,别忘了在用函数时去掉去掉那个反斜杠,一般的错误都在这里==</p><h2 id="五、其他"><a href="#五、其他" class="headerlink" title="五、其他"></a>五、其他</h2><pre><code>- xml文件：^([a-zA-Z]+-?)+[a-zA-Z0-9]+\.[x|X][m|M][l|L]$- 中文字符的正则表达式：[一-龥]- 双字节字符：[^-ÿ] (包括汉字在内，可以用来计算字符串的长度(一个双字节字符长度计2，ASCII字符计1))- 空白行的正则表达式：s* (可以用来删除空白行)- HTML标记的正则表达式：&lt;(S*?)[^&gt;]*&gt;.*?&lt;/&gt;|&lt;.*? /&gt; (网上流传的版本太糟糕，上面这个也仅仅能部分，对于复杂的嵌套标记依旧无能为力)- 首尾空白字符的正则表达式：^s*|s*$或(^s*)|(s*$) (可以用来删除行首行尾的空白字符(包括空格、制表符、换页符等等)，非常有用的表达式)- 腾讯QQ号：[1-9][0-9]{4,} (腾讯QQ号从10000开始)- 中国邮政编码：[1-9]d{5}(?!d) (中国邮政编码为6位数字)- IP地址：d+.d+.d+.d+ (提取IP地址时有用)- IP地址：((?:(?:25[0-5]|2[0-4]\d|[01]?\d?\d)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d?\d))</code></pre>]]></content>
      
      
      <categories>
          
          <category> 基础知识 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> RegExp </tag>
            
            <tag> 正则 </tag>
            
            <tag> 基础知识 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>百度云TTS文字转语音</title>
      <link href="/2020/01/14/2020-1-14-Baidu-TTS/"/>
      <url>/2020/01/14/2020-1-14-Baidu-TTS/</url>
      
        <content type="html"><![CDATA[<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>百度地图将文字转化为语音并播放<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 这里调用的是百度文字转语音开放API --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"ttsText"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">id</span>=<span class="string">"tts_btn"</span> <span class="attr">onclick</span>=<span class="string">"doTTS()"</span> <span class="attr">value</span>=<span class="string">"播放"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">            <span class="function"><span class="keyword">function</span> <span class="title">doTTS</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> ttsText = <span class="built_in">document</span>.getElementById(<span class="string">'ttsText'</span>).value;</span></span><br><span class="line">                </span><br><span class="line"><span class="actionscript">                <span class="keyword">var</span> ttsAudio = <span class="keyword">new</span> Audio();</span></span><br><span class="line"><span class="actionscript">                ttsAudio.src = <span class="string">'http://tts.baidu.com/text2audio?lan=zh&amp;ie=UTF-8&amp;per=3&amp;spd=5&amp;text='</span> + ttsText</span></span><br><span class="line">                ttsAudio.play();</span><br><span class="line">            &#125;</span><br><span class="line">            /*</span><br><span class="line">            代码中改变传参可更改配置：</span><br><span class="line">            </span><br><span class="line">            lan=zh（语言zh:中文；en:英文；fr:法文；）</span><br><span class="line">            </span><br><span class="line">            ie=UTF-8（字符集）</span><br><span class="line">            </span><br><span class="line">            per=3（每3个字符停顿）</span><br><span class="line">            </span><br><span class="line">            spd=5（语音播放速度，数字越大越快0-15）</span><br><span class="line">            </span><br><span class="line">            text=“”（需要转换的文字）</span><br><span class="line">            */</span><br><span class="line">            <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> 前端 </tag>
            
            <tag> 百度 </tag>
            
            <tag> TTS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>纯CSS仿iOS开关</title>
      <link href="/2020/01/13/2020-1-13-ios-swicth-button-css/"/>
      <url>/2020/01/13/2020-1-13-ios-swicth-button-css/</url>
      
        <content type="html"><![CDATA[<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!doctype <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge,chrome=1"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1,maximum-scale=1, user-scalable=no"</span> <span class="attr">name</span>=<span class="string">"viewport"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line"><span class="css">            <span class="selector-class">.Switch</span> &#123;</span></span><br><span class="line">                margin-top: auto;</span><br><span class="line">                margin-right: auto;</span><br><span class="line">                margin-left: auto;</span><br><span class="line">                margin-bottom: auto;</span><br><span class="line">                padding: 0;</span><br><span class="line">                width: 800px;</span><br><span class="line">            &#125;</span><br><span class="line"><span class="css">            <span class="selector-class">.Switch</span> <span class="selector-tag">li</span> &#123;</span></span><br><span class="line">                clear: both;</span><br><span class="line">                line-height: 44px;</span><br><span class="line"><span class="css">                <span class="selector-tag">border-bottom</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#CCC</span>;</span></span><br><span class="line">                list-style: none;</span><br><span class="line">            &#125;</span><br><span class="line"><span class="css">            <span class="selector-class">.Switch</span> <span class="selector-tag">input</span> &#123;</span></span><br><span class="line">                display: none</span><br><span class="line">            &#125;</span><br><span class="line"><span class="css">            <span class="selector-class">.Switch</span> <span class="selector-tag">label</span> &#123;</span></span><br><span class="line">                width: 52px;</span><br><span class="line"><span class="css">                <span class="selector-tag">background</span>: <span class="selector-id">#CCC</span>;</span></span><br><span class="line">                height: 28px;</span><br><span class="line">                border-radius: 14px;</span><br><span class="line">                float: right;</span><br><span class="line">                margin: 8px 10px 0 0;</span><br><span class="line"><span class="css">                <span class="selector-tag">box-shadow</span>: 0 1<span class="selector-tag">px</span> 2<span class="selector-tag">px</span> <span class="selector-tag">rgba</span>(0,0,0,<span class="selector-class">.1</span>) <span class="selector-tag">inset</span>;</span></span><br><span class="line">            &#125;</span><br><span class="line"><span class="css">            <span class="selector-class">.Switch</span> <span class="selector-tag">label</span> <span class="selector-tag">em</span> &#123;</span></span><br><span class="line">                width: 26px;</span><br><span class="line">                height: 26px;</span><br><span class="line">                float: left;</span><br><span class="line">                margin: 1px;</span><br><span class="line">                border-radius: 13px;</span><br><span class="line"><span class="css">                <span class="selector-tag">box-shadow</span>: 2<span class="selector-tag">px</span> 3<span class="selector-tag">px</span> 8<span class="selector-tag">px</span> <span class="selector-tag">rgba</span>(0,0,0,<span class="selector-class">.1</span>);</span></span><br><span class="line"><span class="css">                <span class="selector-tag">background</span>: <span class="selector-id">#FFF</span>;</span></span><br><span class="line">            &#125;</span><br><span class="line"><span class="css">            <span class="selector-class">.Switch</span> <span class="selector-tag">input</span><span class="selector-pseudo">:checked</span> + <span class="selector-tag">label</span> &#123;</span></span><br><span class="line"><span class="css">                <span class="selector-tag">background</span>: <span class="selector-id">#a4d714</span>;</span></span><br><span class="line">            &#125;</span><br><span class="line"><span class="css">            <span class="selector-class">.Switch</span> <span class="selector-tag">input</span><span class="selector-pseudo">:checked</span> + <span class="selector-tag">label</span> <span class="selector-tag">em</span> &#123;</span></span><br><span class="line">                float: right;</span><br><span class="line">            &#125;</span><br><span class="line"><span class="css">            <span class="selector-class">.Switch</span> <span class="selector-tag">input</span><span class="selector-pseudo">:disabled</span> + <span class="selector-tag">label</span> &#123;</span></span><br><span class="line"><span class="css">                <span class="selector-tag">opacity</span>: 0<span class="selector-class">.5</span></span></span><br><span class="line">            &#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>开关测试2<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"Switch"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"Storage"</span> <span class="attr">id</span>=<span class="string">"date"</span> /&gt;</span></span><br><span class="line">                    流量不足提醒</span><br><span class="line">                <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"date"</span>&gt;</span><span class="tag">&lt;<span class="name">em</span>&gt;</span><span class="tag">&lt;/<span class="name">em</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"Storage2"</span> <span class="attr">id</span>=<span class="string">"blance"</span> <span class="attr">checked</span> /&gt;</span></span><br><span class="line">                    余额不足提醒</span><br><span class="line">                <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"blance"</span>&gt;</span><span class="tag">&lt;<span class="name">em</span>&gt;</span><span class="tag">&lt;/<span class="name">em</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"Storage2"</span> <span class="attr">id</span>=<span class="string">"integral"</span> <span class="attr">disabled</span> /&gt;</span></span><br><span class="line">                    积分兑换提醒</span><br><span class="line">                <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"integral"</span>&gt;</span><span class="tag">&lt;<span class="name">em</span>&gt;</span><span class="tag">&lt;/<span class="name">em</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> CSS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>获取今天日期</title>
      <link href="/2020/01/12/2020-1-12-get-today/"/>
      <url>/2020/01/12/2020-1-12-get-today/</url>
      
        <content type="html"><![CDATA[<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">var</span> day1 = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line"><span class="number">3</span>  day1.setDate(day1.getDate() - <span class="number">1</span>);</span><br><span class="line"><span class="number">4</span>  <span class="keyword">var</span> s1 = day1.format(<span class="string">"yyyy-MM-dd"</span>);</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *对Date的扩展，将 Date 转化为指定格式的String</span></span><br><span class="line"><span class="comment"> *月(M)、日(d)、小时(h)、分(m)、秒(s)、季度(q) 可以用 1-2 个占位符，</span></span><br><span class="line"><span class="comment"> *年(y)可以用 1-4 个占位符，毫秒(S)只能用 1 个占位符(是 1-3 位的数字)</span></span><br><span class="line"><span class="comment"> *例子：</span></span><br><span class="line"><span class="comment"> *(new Date()).Format("yyyy-MM-dd hh:mm:ss.S") ==&gt; 2006-07-02 08:09:04.423</span></span><br><span class="line"><span class="comment"> *(new Date()).Format("yyyy-M-d h:m:s.S")      ==&gt; 2006-7-2 8:9:4.18</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="built_in">Date</span>.prototype.format = <span class="function"><span class="keyword">function</span> (<span class="params">fmt</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> o = &#123;</span><br><span class="line">        <span class="string">"M+"</span>: <span class="keyword">this</span>.getMonth() + <span class="number">1</span>, <span class="comment">//月份</span></span><br><span class="line">        <span class="string">"d+"</span>: <span class="keyword">this</span>.getDate(), <span class="comment">//日</span></span><br><span class="line">        <span class="string">"h+"</span>: <span class="keyword">this</span>.getHours(), <span class="comment">//小时</span></span><br><span class="line">        <span class="string">"m+"</span>: <span class="keyword">this</span>.getMinutes(), <span class="comment">//分</span></span><br><span class="line">        <span class="string">"s+"</span>: <span class="keyword">this</span>.getSeconds(), <span class="comment">//秒</span></span><br><span class="line">        <span class="string">"q+"</span>: <span class="built_in">Math</span>.floor((<span class="keyword">this</span>.getMonth() + <span class="number">3</span>) / <span class="number">3</span>), <span class="comment">//季度</span></span><br><span class="line">        <span class="string">"S"</span>: <span class="keyword">this</span>.getMilliseconds() <span class="comment">//毫秒</span></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">if</span> (<span class="regexp">/(y+)/</span>.test(fmt)) fmt = fmt.replace(<span class="built_in">RegExp</span>.$<span class="number">1</span>, (<span class="keyword">this</span>.getFullYear() + <span class="string">""</span>).substr(<span class="number">4</span> - <span class="built_in">RegExp</span>.$<span class="number">1.</span>length));</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> k <span class="keyword">in</span> o)</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"("</span> + k + <span class="string">")"</span>).test(fmt)) fmt = fmt.replace(<span class="built_in">RegExp</span>.$<span class="number">1</span>, (<span class="built_in">RegExp</span>.$<span class="number">1.</span>length == <span class="number">1</span>) ? (o[k]) : ((<span class="string">"00"</span> + o[k]).substr((<span class="string">""</span> + o[k]).length)));</span><br><span class="line">    <span class="keyword">return</span> fmt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> Date </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>防止恶意解析(禁止通过IP直接访问网站)</title>
      <link href="/2020/01/11/2020-1-11-forbid-IP-connection/"/>
      <url>/2020/01/11/2020-1-11-forbid-IP-connection/</url>
      
        <content type="html"><![CDATA[<h1 id="防止恶意解析"><a href="#防止恶意解析" class="headerlink" title="防止恶意解析"></a>防止恶意解析</h1><h2 id="禁止通过-IP-直接访问网站"><a href="#禁止通过-IP-直接访问网站" class="headerlink" title="禁止通过 IP 直接访问网站"></a>禁止通过 IP 直接访问网站</h2><ol><li>什么是恶意解析</li></ol><p>一般情况下，要使域名能访问到网站需要两步，第一步，将域名解析到网站所在的主机，第二步，在 web 服务器中将域名与相应的网站绑定。但是，如果通过主机 IP 能直接访问某网站，那么把域名解析到这个 IP 也将能访问到该网站，而无需在主机上绑定，也就是说任何人将任何域名解析到这个 IP 就能访问到这个网站。可能您并不介意通过别人的域名访问到您的网站，但是如果这个域名是未备案域名呢？一旦被查出，封 IP、拔线甚至罚款的后果都是需要您来承担的。某些别有用心的人，通过将未备案域名解析到别人的主机上，使其遭受损失，这是一种新兴的攻击手段。</p><ol start="2"><li>Apache 服务</li></ol><p>在用 apache 搭建的 WEB 服务器的时候，如何想只能通过设定的域名访问，而不能直接通过服务器的 IP 地址访问呢，有以下两种方法可以实现（当然肯定还会有其他方法可以实现），都是修改 httpd.conf 文件来实现的，下面举例说明。</p><pre><code>在httpd.conf文件最后面，加入以下代码</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">NameVirtualHost *:80</span><br><span class="line">&lt;VirtualHost *:80&gt;</span><br><span class="line">    ServerName 221.*.*.*</span><br><span class="line">    &lt;Location &#x2F;&gt;</span><br><span class="line">        Order Allow,Deny</span><br><span class="line">        Deny from all</span><br><span class="line">    &lt;&#x2F;Location&gt;</span><br><span class="line">&lt;&#x2F;VirtualHost&gt;</span><br><span class="line">　　　　</span><br><span class="line">&lt;VirtualHost *:80&gt;</span><br><span class="line">    DocumentRoot &quot;&#x2F;www&#x2F;web&quot;</span><br><span class="line">    ServerName www.wzlinux.com</span><br><span class="line">&lt;&#x2F;VirtualHost&gt;</span><br></pre></td></tr></table></figure><p>说明：上部分是实现拒绝直接通过 221.<em>.</em>.<em>这个 IP 的任何访问请求，这时如果你用 221.</em>.<em>.</em>访问，会提示拒绝访问。下部分就是允许通过 <a href="http://www.wzlinux.com" target="_blank" rel="noopener">www.wzlinux.com</a> 这个域名访问，主目录指向/www/web(这里假设你的网站的根目录是/www/web)。</p><ol start="3"><li>Tomcat 服务</li></ol><p>修改 server.xml 这个配置文件。</p><p>比如服务器 IP 地址是 192.168.1.2 ，相应域名是 <a href="http://www.wzlinux.com。" target="_blank" rel="noopener">www.wzlinux.com。</a></p><p>打开 %TOMCAT_HOME%/conf/server.xml 文件，找到 Engine 节点作如下 Xml 代码。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;Engine name&#x3D;&quot;Catalina&quot; defaultHost&#x3D;&quot;www.piis.cn&quot;&gt;</span><br><span class="line">　　&lt;Host name&#x3D;&quot;www.piis.cn&quot; appBase&#x3D;&quot;webapps&quot;</span><br><span class="line">　　      unpackWARs&#x3D;&quot;true&quot; autoDeploy&#x3D;&quot;true&quot;</span><br><span class="line">　　      xmlValidation&#x3D;&quot;false&quot; xmlNamespaceAware&#x3D;&quot;false&quot;&#x2F;&gt;</span><br><span class="line">　　&lt;Host name&#x3D;&quot;192.168.1.2&quot; appBase&#x3D;&quot;ipapps&quot;</span><br><span class="line">　　      unpackWARs&#x3D;&quot;true&quot; autoDeploy&#x3D;&quot;true&quot;</span><br><span class="line">　　      xmlValidation&#x3D;&quot;false&quot; xmlNamespaceAware&#x3D;&quot;false&quot;&#x2F;&gt;</span><br><span class="line">&lt;&#x2F;Engine&gt;</span><br></pre></td></tr></table></figure><p>注意事项：</p><ol><li><p>Engine 节点配置的 defaultHost 表明缺省访问的 Host。defaultHost 对应的名称必须存在于 Engine 节点下配置的 host 节点中。</p></li><li><p>当一台机器有多个 IP，而按照规定只允许通过一个指定的域名访问时很有用。此时，把 defaultHost 指定为非域名对应的 host，这样不通过域名访问时就都定位到指定的非域名 HOST 了。</p></li><li><p>Host 节点 name 对应 IP 地址，以及域名。一个 Host 只有指定一个 IP 或域名。</p></li><li><p>Host 节点的 appBase ，对应的是存放 web 应用的目录。这里输入的目录相对于 %TOMCAT_HOME%，如上面的 <a href="http://www.wzlinux.com" target="_blank" rel="noopener">www.wzlinux.com</a> 对应的目录是 %TOMCAT_HOME%/webapps，而 192.168.1.2 对应的目录是 %TOMCAT_HOME%/ipapps。</p></li><li><p>Nginx 服务</p></li></ol><p>定义一个默认的空主机名，禁止其访问，需要通过的域名一定要在其他 server 配置。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen       80 default;</span><br><span class="line">    server_name  &quot;&quot;;</span><br><span class="line">    return  444;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">或者</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">    listen       80 default;</span><br><span class="line">    server_name  _;</span><br><span class="line">    return  444;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Server </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Server </tag>
            
            <tag> 服务器 </tag>
            
            <tag> 配置 </tag>
            
            <tag> Config </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>输入密码检测大写是否锁定JS实现代码</title>
      <link href="/2020/01/10/2020-1-10-detect-caps-lock/"/>
      <url>/2020/01/10/2020-1-10-detect-caps-lock/</url>
      
        <content type="html"><![CDATA[<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"passwd"</span> <span class="attr">id</span>=<span class="string">"loginPasswd"</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">style</span>=<span class="string">"*display:block;"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"color:#F90;padding:2px; position:absolute; display:none;"</span> <span class="attr">id</span>=<span class="string">"capital"</span>&gt;</span>大写锁定已开启</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="actionscript">        (<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> inputPWD = <span class="built_in">document</span>.getElementById(<span class="string">'loginPasswd'</span>);</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">var</span> capital = <span class="literal">false</span>;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">var</span> capitalTip = &#123;</span></span><br><span class="line"><span class="javascript">                elem:<span class="built_in">document</span>.getElementById(<span class="string">'capital'</span>),</span></span><br><span class="line"><span class="actionscript">                toggle:<span class="function"><span class="keyword">function</span><span class="params">(s)</span></span>&#123;</span></span><br><span class="line"><span class="actionscript">                    <span class="keyword">var</span> sy = <span class="keyword">this</span>.elem.style;</span></span><br><span class="line"><span class="actionscript">                    <span class="keyword">var</span> d = sy.display;</span></span><br><span class="line">                    if(s)&#123;</span><br><span class="line">                        sy.display = s;</span><br><span class="line"><span class="actionscript">                    &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="actionscript">                        sy.display = d ==<span class="string">'none'</span> ? <span class="string">''</span> : <span class="string">'none'</span>;</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"><span class="actionscript">            <span class="keyword">var</span> detectCapsLock = <span class="function"><span class="keyword">function</span><span class="params">(event)</span></span>&#123;</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">if</span>(capital)&#123;<span class="keyword">return</span>&#125;;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> e = event||<span class="built_in">window</span>.event;</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">var</span> keyCode = e.keyCode||e.which; <span class="comment">// 按键的keyCode</span></span></span><br><span class="line"><span class="actionscript">                <span class="keyword">var</span> isShift = e.shiftKey ||(keyCode == <span class="number">16</span> ) || <span class="literal">false</span> ; <span class="comment">// shift键是否按住</span></span></span><br><span class="line">                if (</span><br><span class="line"><span class="actionscript">                    ((keyCode &gt;= <span class="number">65</span> &amp;&amp; keyCode &lt;= <span class="number">90</span> ) &amp;&amp; !isShift) <span class="comment">// Caps Lock 打开，且没有按住shift键</span></span></span><br><span class="line"><span class="actionscript">                    || ((keyCode &gt;= <span class="number">97</span> &amp;&amp; keyCode &lt;= <span class="number">122</span> ) &amp;&amp; isShift)<span class="comment">// Caps Lock 打开，且按住shift键</span></span></span><br><span class="line">                )&#123;</span><br><span class="line"><span class="actionscript">                    capitalTip.toggle(<span class="string">'block'</span>);</span></span><br><span class="line"><span class="actionscript">                    capital=<span class="literal">true</span>;</span></span><br><span class="line"><span class="actionscript">                &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="actionscript">                    capitalTip.toggle(<span class="string">'none'</span>);</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            inputPWD.onkeypress = detectCapsLock;</span><br><span class="line"><span class="actionscript">            inputPWD.onkeyup=<span class="function"><span class="keyword">function</span><span class="params">(event)</span></span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> e = event||<span class="built_in">window</span>.event;</span></span><br><span class="line">                if(e.keyCode == 20 &amp;&amp; capital)&#123;</span><br><span class="line">                    capitalTip.toggle();</span><br><span class="line"><span class="actionscript">                    <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)();</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> 前端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2018/08/31/hello-world/"/>
      <url>/2018/08/31/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
      
      
      <categories>
          
          <category> Other </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Other </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
